{"version":3,"file":"statusBar-B5Tf-SpZ.js","sources":["../../../esm/services/statusBar.js"],"sourcesContent":["import { BaseService } from \"../glue\";\nimport { StatusBarEvent, StatusBarModel } from \"../models/statusBar\";\nimport { arraylize, searchById } from \"../utils\";\nclass StatusBarService extends BaseService {\n  state;\n  constructor() {\n    super(\"statusBar\");\n    this.state = new StatusBarModel();\n  }\n  get(id) {\n    return this.getAll().find(searchById(id));\n  }\n  getAll() {\n    return this.getState().data;\n  }\n  add(item) {\n    this.dispatch((draft) => {\n      draft.data.push(...arraylize(item));\n    });\n  }\n  update(item, predict) {\n    this.dispatch((draft) => {\n      const target = draft.data.find(searchById(typeof item === \"object\" ? item.id : item));\n      if (!target)\n        return;\n      Object.assign(target, typeof item === \"object\" ? item : predict?.(target));\n    });\n  }\n  remove(id) {\n    this.dispatch((draft) => {\n      const idx = draft.data.findIndex(searchById(id));\n      if (idx === -1)\n        return;\n      draft.data.splice(idx, 1);\n    });\n  }\n  toggle(id) {\n    this.update(id, (prev) => ({ hidden: !prev.hidden }));\n  }\n  reset() {\n    this.setState(new StatusBarModel());\n  }\n  // ===================== Subscriptions =====================\n  onClick(callback) {\n    this.subscribe(StatusBarEvent.onClick, callback);\n  }\n  onContextMenu(callback) {\n    this.subscribe(StatusBarEvent.onContextMenu, callback);\n  }\n}\nexport {\n  StatusBarService\n};\n"],"names":["StatusBarService","BaseService","StatusBarModel","id","searchById","item","draft","arraylize","predict","target","idx","prev","callback","StatusBarEvent"],"mappings":"oLAGA,MAAMA,UAAyBC,CAAY,CACzC,MACA,aAAc,CACZ,MAAM,WAAW,EACjB,KAAK,MAAQ,IAAIC,CACnB,CACA,IAAIC,EAAI,CACN,OAAO,KAAK,OAAM,EAAG,KAAKC,EAAWD,CAAE,CAAC,CAC1C,CACA,QAAS,CACP,OAAO,KAAK,SAAQ,EAAG,IACzB,CACA,IAAIE,EAAM,CACR,KAAK,SAAUC,GAAU,CACvBA,EAAM,KAAK,KAAK,GAAGC,EAAUF,CAAI,CAAC,CACpC,CAAC,CACH,CACA,OAAOA,EAAMG,EAAS,CACpB,KAAK,SAAUF,GAAU,CACvB,MAAMG,EAASH,EAAM,KAAK,KAAKF,EAAW,OAAOC,GAAS,SAAWA,EAAK,GAAKA,CAAI,CAAC,EAC/EI,GAEL,OAAO,OAAOA,EAAQ,OAAOJ,GAAS,SAAWA,EAAOG,IAAUC,CAAM,CAAC,CAC3E,CAAC,CACH,CACA,OAAON,EAAI,CACT,KAAK,SAAUG,GAAU,CACvB,MAAMI,EAAMJ,EAAM,KAAK,UAAUF,EAAWD,CAAE,CAAC,EAC3CO,IAAQ,IAEZJ,EAAM,KAAK,OAAOI,EAAK,CAAC,CAC1B,CAAC,CACH,CACA,OAAOP,EAAI,CACT,KAAK,OAAOA,EAAKQ,IAAU,CAAE,OAAQ,CAACA,EAAK,MAAM,EAAG,CACtD,CACA,OAAQ,CACN,KAAK,SAAS,IAAIT,CAAgB,CACpC,CAEA,QAAQU,EAAU,CAChB,KAAK,UAAUC,EAAe,QAASD,CAAQ,CACjD,CACA,cAAcA,EAAU,CACtB,KAAK,UAAUC,EAAe,cAAeD,CAAQ,CACvD,CACF"}