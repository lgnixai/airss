import{d as et,T as tt,L as nt}from"./editor.api-ZhmqmMMK.js";var $e={exports:{}},rt=$e.exports,Ke;function it(){return Ke||(Ke=1,function(le,W){(function(Y,V){le.exports=V()})(rt,()=>{return Y={770:function(Q,$,_){var U=this&&this.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty($,"__esModule",{value:!0}),$.setDefaultDebugCall=$.createOnigScanner=$.createOnigString=$.loadWASM=$.OnigScanner=$.OnigString=void 0;const B=U(_(418));let y=null,D=!1;class A{static _utf8ByteLength(i){let r=0;for(let c=0,g=i.length;c<g;c++){const a=i.charCodeAt(c);let l=a,u=!1;if(a>=55296&&a<=56319&&c+1<g){const e=i.charCodeAt(c+1);e>=56320&&e<=57343&&(l=65536+(a-55296<<10)|e-56320,u=!0)}r+=l<=127?1:l<=2047?2:l<=65535?3:4,u&&c++}return r}constructor(i){const r=i.length,c=A._utf8ByteLength(i),g=c!==r,a=g?new Uint32Array(r+1):null;g&&(a[r]=c);const l=g?new Uint32Array(c+1):null;g&&(l[c]=r);const u=new Uint8Array(c);let e=0;for(let n=0;n<r;n++){const f=i.charCodeAt(n);let m=f,P=!1;if(f>=55296&&f<=56319&&n+1<r){const E=i.charCodeAt(n+1);E>=56320&&E<=57343&&(m=65536+(f-55296<<10)|E-56320,P=!0)}g&&(a[n]=e,P&&(a[n+1]=e),m<=127?l[e+0]=n:m<=2047?(l[e+0]=n,l[e+1]=n):m<=65535?(l[e+0]=n,l[e+1]=n,l[e+2]=n):(l[e+0]=n,l[e+1]=n,l[e+2]=n,l[e+3]=n)),m<=127?u[e++]=m:m<=2047?(u[e++]=192|(1984&m)>>>6,u[e++]=128|(63&m)>>>0):m<=65535?(u[e++]=224|(61440&m)>>>12,u[e++]=128|(4032&m)>>>6,u[e++]=128|(63&m)>>>0):(u[e++]=240|(1835008&m)>>>18,u[e++]=128|(258048&m)>>>12,u[e++]=128|(4032&m)>>>6,u[e++]=128|(63&m)>>>0),P&&n++}this.utf16Length=r,this.utf8Length=c,this.utf16Value=i,this.utf8Value=u,this.utf16OffsetToUtf8=a,this.utf8OffsetToUtf16=l}createString(i){const r=i._omalloc(this.utf8Length);return i.HEAPU8.set(this.utf8Value,r),r}}class b{constructor(i){if(this.id=++b.LAST_ID,!y)throw new Error("Must invoke loadWASM first.");this._onigBinding=y,this.content=i;const r=new A(i);this.utf16Length=r.utf16Length,this.utf8Length=r.utf8Length,this.utf16OffsetToUtf8=r.utf16OffsetToUtf8,this.utf8OffsetToUtf16=r.utf8OffsetToUtf16,this.utf8Length<1e4&&!b._sharedPtrInUse?(b._sharedPtr||(b._sharedPtr=y._omalloc(1e4)),b._sharedPtrInUse=!0,y.HEAPU8.set(r.utf8Value,b._sharedPtr),this.ptr=b._sharedPtr):this.ptr=r.createString(y)}convertUtf8OffsetToUtf16(i){return this.utf8OffsetToUtf16?i<0?0:i>this.utf8Length?this.utf16Length:this.utf8OffsetToUtf16[i]:i}convertUtf16OffsetToUtf8(i){return this.utf16OffsetToUtf8?i<0?0:i>this.utf16Length?this.utf8Length:this.utf16OffsetToUtf8[i]:i}dispose(){this.ptr===b._sharedPtr?b._sharedPtrInUse=!1:this._onigBinding._ofree(this.ptr)}}$.OnigString=b,b.LAST_ID=0,b._sharedPtr=0,b._sharedPtrInUse=!1;class I{constructor(i,r){var c,g;if(!y)throw new Error("Must invoke loadWASM first.");const a=[],l=[];for(let P=0,E=i.length;P<E;P++){const G=new A(i[P]);a[P]=G.createString(y),l[P]=G.utf8Length}const u=y._omalloc(4*i.length);y.HEAPU32.set(a,u/4);const e=y._omalloc(4*i.length);y.HEAPU32.set(l,e/4),this._onigBinding=y,this._options=(c=r?.options)!==null&&c!==void 0?c:[10];const n=this.onigOptions(this._options),f=this.onigSyntax((g=r?.syntax)!==null&&g!==void 0?g:0),m=y._createOnigScanner(u,e,i.length,n,f);this._ptr=m;for(let P=0,E=i.length;P<E;P++)y._ofree(a[P]);y._ofree(e),y._ofree(u),m===0&&function(P){throw new Error(P.UTF8ToString(P._getLastOnigError()))}(y)}dispose(){this._onigBinding._freeOnigScanner(this._ptr)}findNextMatchSync(i,r,c){let g=D,a=this._options;if(Array.isArray(c)?(c.includes(25)&&(g=!0),a=a.concat(c)):typeof c=="boolean"&&(g=c),typeof i=="string"){i=new b(i);const l=this._findNextMatchSync(i,r,g,a);return i.dispose(),l}return this._findNextMatchSync(i,r,g,a)}_findNextMatchSync(i,r,c,g){const a=this._onigBinding,l=this.onigOptions(g);let u;if(u=c?a._findNextOnigScannerMatchDbg(this._ptr,i.id,i.ptr,i.utf8Length,i.convertUtf16OffsetToUtf8(r),l):a._findNextOnigScannerMatch(this._ptr,i.id,i.ptr,i.utf8Length,i.convertUtf16OffsetToUtf8(r),l),u===0)return null;const e=a.HEAPU32;let n=u/4;const f=e[n++],m=e[n++];let P=[];for(let E=0;E<m;E++){const G=i.convertUtf8OffsetToUtf16(e[n++]),q=i.convertUtf8OffsetToUtf16(e[n++]);P[E]={start:G,end:q,length:q-G}}return{index:f,captureIndices:P}}onigOptions(i){return i.map(r=>this.onigOption(r)).reduce((r,c)=>r|c,this._onigBinding.ONIG_OPTION_NONE)}onigSyntax(i){switch(i){case 0:return this._onigBinding.ONIG_SYNTAX_DEFAULT;case 1:return this._onigBinding.ONIG_SYNTAX_ASIS;case 2:return this._onigBinding.ONIG_SYNTAX_POSIX_BASIC;case 3:return this._onigBinding.ONIG_SYNTAX_POSIX_EXTENDED;case 4:return this._onigBinding.ONIG_SYNTAX_EMACS;case 5:return this._onigBinding.ONIG_SYNTAX_GREP;case 6:return this._onigBinding.ONIG_SYNTAX_GNU_REGEX;case 7:return this._onigBinding.ONIG_SYNTAX_JAVA;case 8:return this._onigBinding.ONIG_SYNTAX_PERL;case 9:return this._onigBinding.ONIG_SYNTAX_PERL_NG;case 10:return this._onigBinding.ONIG_SYNTAX_RUBY;case 11:return this._onigBinding.ONIG_SYNTAX_PYTHON;case 12:return this._onigBinding.ONIG_SYNTAX_ONIGURUMA}}onigOption(i){switch(i){case 1:return this._onigBinding.ONIG_OPTION_NONE;case 0:case 25:return this._onigBinding.ONIG_OPTION_DEFAULT;case 2:return this._onigBinding.ONIG_OPTION_IGNORECASE;case 3:return this._onigBinding.ONIG_OPTION_EXTEND;case 4:return this._onigBinding.ONIG_OPTION_MULTILINE;case 5:return this._onigBinding.ONIG_OPTION_SINGLELINE;case 6:return this._onigBinding.ONIG_OPTION_FIND_LONGEST;case 7:return this._onigBinding.ONIG_OPTION_FIND_NOT_EMPTY;case 8:return this._onigBinding.ONIG_OPTION_NEGATE_SINGLELINE;case 9:return this._onigBinding.ONIG_OPTION_DONT_CAPTURE_GROUP;case 10:return this._onigBinding.ONIG_OPTION_CAPTURE_GROUP;case 11:return this._onigBinding.ONIG_OPTION_NOTBOL;case 12:return this._onigBinding.ONIG_OPTION_NOTEOL;case 13:return this._onigBinding.ONIG_OPTION_CHECK_VALIDITY_OF_STRING;case 14:return this._onigBinding.ONIG_OPTION_IGNORECASE_IS_ASCII;case 15:return this._onigBinding.ONIG_OPTION_WORD_IS_ASCII;case 16:return this._onigBinding.ONIG_OPTION_DIGIT_IS_ASCII;case 17:return this._onigBinding.ONIG_OPTION_SPACE_IS_ASCII;case 18:return this._onigBinding.ONIG_OPTION_POSIX_IS_ASCII;case 19:return this._onigBinding.ONIG_OPTION_TEXT_SEGMENT_EXTENDED_GRAPHEME_CLUSTER;case 20:return this._onigBinding.ONIG_OPTION_TEXT_SEGMENT_WORD;case 21:return this._onigBinding.ONIG_OPTION_NOT_BEGIN_STRING;case 22:return this._onigBinding.ONIG_OPTION_NOT_END_STRING;case 23:return this._onigBinding.ONIG_OPTION_NOT_BEGIN_POSITION;case 24:return this._onigBinding.ONIG_OPTION_CALLBACK_EACH_MATCH}}}$.OnigScanner=I;let k=!1,p=null;$.loadWASM=function(w){if(k)return p;let i,r,c,g;if(k=!0,function(a){return typeof a.instantiator=="function"}(w))i=w.instantiator,r=w.print;else{let a;(function(l){return l.data!==void 0})(w)?(a=w.data,r=w.print):a=w,i=function(l){return typeof Response<"u"&&l instanceof Response}(a)?typeof WebAssembly.instantiateStreaming=="function"?function(l){return u=>WebAssembly.instantiateStreaming(l,u)}(a):function(l){return async u=>{const e=await l.arrayBuffer();return WebAssembly.instantiate(e,u)}}(a):function(l){return u=>WebAssembly.instantiate(l,u)}(a)}return p=new Promise((a,l)=>{c=a,g=l}),function(a,l,u,e){(0,B.default)({print:l,instantiateWasm:(n,f)=>{if(typeof performance>"u"){const m=()=>Date.now();n.env.emscripten_get_now=m,n.wasi_snapshot_preview1.emscripten_get_now=m}return a(n).then(m=>f(m.instance),e),{}}}).then(n=>{y=n,u()})}(i,r,c,g),p},$.createOnigString=function(w){return new b(w)},$.createOnigScanner=function(w){return new I(w)},$.setDefaultDebugCall=function(w){D=w}},418:Q=>{var $=(typeof document<"u"&&document.currentScript&&document.currentScript.src,function(_={}){var U,B,y=_;y.ready=new Promise((h,v)=>{U=h,B=v});var D,A=Object.assign({},y);typeof read<"u"&&read,D=h=>{if(typeof readbuffer=="function")return new Uint8Array(readbuffer(h));let v=read(h,"binary");return typeof v=="object"||q(R),v;var R},typeof clearTimeout>"u"&&(globalThis.clearTimeout=h=>{}),typeof setTimeout>"u"&&(globalThis.setTimeout=h=>typeof h=="function"?h():q()),typeof scriptArgs<"u"&&scriptArgs,typeof onig_print<"u"&&(typeof console>"u"&&(console={}),console.log=onig_print,console.warn=console.error=typeof printErr<"u"?printErr:onig_print);var b,I,k=y.print||console.log.bind(console),p=y.printErr||console.error.bind(console);Object.assign(y,A),A=null,y.arguments&&y.arguments,y.thisProgram&&y.thisProgram,y.quit&&y.quit,y.wasmBinary&&(b=y.wasmBinary),y.noExitRuntime,typeof WebAssembly!="object"&&q("no native wasm support detected");var w,i,r,c,g,a,l,u,e=!1;function n(){var h=I.buffer;y.HEAP8=w=new Int8Array(h),y.HEAP16=r=new Int16Array(h),y.HEAPU8=i=new Uint8Array(h),y.HEAPU16=c=new Uint16Array(h),y.HEAP32=g=new Int32Array(h),y.HEAPU32=a=new Uint32Array(h),y.HEAPF32=l=new Float32Array(h),y.HEAPF64=u=new Float64Array(h)}var f=[],m=[],P=[],E=0,G=null;function q(h){y.onAbort&&y.onAbort(h),p(h="Aborted("+h+")"),e=!0,h+=". Build with -sASSERTIONS for more info.";var v=new WebAssembly.RuntimeError(h);throw B(v),v}var ee,he;function re(h){return h.startsWith("data:application/octet-stream;base64,")}function ue(h){if(h==ee&&b)return new Uint8Array(b);if(D)return D(h);throw"both async and sync fetching of the wasm failed"}function _e(h,v,R){return function(T){return Promise.resolve().then(()=>ue(T))}(h).then(T=>WebAssembly.instantiate(T,v)).then(T=>T).then(R,T=>{p(`failed to asynchronously prepare wasm: ${T}`),q(T)})}re(ee="onig.wasm")||(he=ee,ee=y.locateFile?y.locateFile(he,""):""+he);var we=h=>{for(;h.length>0;)h.shift()(y)},Se=void 0,de=h=>{for(var v="",R=h;i[R];)v+=Se[i[R++]];return v},Ae={},Ee={},s=void 0,t=h=>{throw new s(h)},o=void 0,C=(h,v,R)=>{function T(H){var X=R(H);X.length!==h.length&&(oe=>{throw new o(oe)})("Mismatched type converter count");for(var z=0;z<h.length;++z)d(h[z],X[z])}h.forEach(function(H){});var N=new Array(v.length),M=[],F=0;v.forEach((H,X)=>{Ee.hasOwnProperty(H)?N[X]=Ee[H]:(M.push(H),Ae.hasOwnProperty(H)||(Ae[H]=[]),Ae[H].push(()=>{N[X]=Ee[H],++F===M.length&&T(N)}))}),M.length===0&&T(N)};function d(h,v,R={}){if(!("argPackAdvance"in v))throw new TypeError("registerType registeredInstance requires argPackAdvance");return function(T,N,M={}){var F=N.name;if(T||t(`type "${F}" must have a positive integer typeid pointer`),Ee.hasOwnProperty(T)){if(M.ignoreDuplicateRegistrations)return;t(`Cannot register type '${F}' twice`)}if(Ee[T]=N,Ae.hasOwnProperty(T)){var H=Ae[T];delete Ae[T],H.forEach(X=>X())}}(h,v,R)}function O(){this.allocated=[void 0],this.freelist=[]}var S=new O,L=()=>{for(var h=0,v=S.reserved;v<S.allocated.length;++v)S.allocated[v]!==void 0&&++h;return h},j=h=>(h||t("Cannot use deleted val. handle = "+h),S.get(h).value),x=h=>{switch(h){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return S.allocate({refcount:1,value:h})}};function Z(h){return this.fromWireType(g[h>>2])}var te=(h,v)=>{switch(v){case 4:return function(R){return this.fromWireType(l[R>>2])};case 8:return function(R){return this.fromWireType(u[R>>3])};default:throw new TypeError(`invalid float width (${v}): ${h}`)}},ce=(h,v,R)=>{switch(v){case 1:return R?T=>w[T>>0]:T=>i[T>>0];case 2:return R?T=>r[T>>1]:T=>c[T>>1];case 4:return R?T=>g[T>>2]:T=>a[T>>2];default:throw new TypeError(`invalid integer width (${v}): ${h}`)}};function pe(h){return this.fromWireType(a[h>>2])}var Ce,K=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,ve=(h,v,R)=>{for(var T=v+R,N=v;h[N]&&!(N>=T);)++N;if(N-v>16&&h.buffer&&K)return K.decode(h.subarray(v,N));for(var M="";v<N;){var F=h[v++];if(128&F){var H=63&h[v++];if((224&F)!=192){var X=63&h[v++];if((F=(240&F)==224?(15&F)<<12|H<<6|X:(7&F)<<18|H<<12|X<<6|63&h[v++])<65536)M+=String.fromCharCode(F);else{var z=F-65536;M+=String.fromCharCode(55296|z>>10,56320|1023&z)}}else M+=String.fromCharCode((31&F)<<6|H)}else M+=String.fromCharCode(F)}return M},ye=(h,v)=>h?ve(i,h,v):"",Pe=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Te=(h,v)=>{for(var R=h,T=R>>1,N=T+v/2;!(T>=N)&&c[T];)++T;if((R=T<<1)-h>32&&Pe)return Pe.decode(i.subarray(h,R));for(var M="",F=0;!(F>=v/2);++F){var H=r[h+2*F>>1];if(H==0)break;M+=String.fromCharCode(H)}return M},be=(h,v,R)=>{if(R===void 0&&(R=2147483647),R<2)return 0;for(var T=v,N=(R-=2)<2*h.length?R/2:h.length,M=0;M<N;++M){var F=h.charCodeAt(M);r[v>>1]=F,v+=2}return r[v>>1]=0,v-T},Re=h=>2*h.length,xe=(h,v)=>{for(var R=0,T="";!(R>=v/4);){var N=g[h+4*R>>2];if(N==0)break;if(++R,N>=65536){var M=N-65536;T+=String.fromCharCode(55296|M>>10,56320|1023&M)}else T+=String.fromCharCode(N)}return T},Ge=(h,v,R)=>{if(R===void 0&&(R=2147483647),R<4)return 0;for(var T=v,N=T+R-4,M=0;M<h.length;++M){var F=h.charCodeAt(M);if(F>=55296&&F<=57343&&(F=65536+((1023&F)<<10)|1023&h.charCodeAt(++M)),g[v>>2]=F,(v+=4)+4>N)break}return g[v>>2]=0,v-T},ie=h=>{for(var v=0,R=0;R<h.length;++R){var T=h.charCodeAt(R);T>=55296&&T<=57343&&++R,v+=4}return v};Ce=()=>performance.now();var De=h=>{var v=(h-I.buffer.byteLength+65535)/65536;try{return I.grow(v),n(),1}catch{}},Le=[null,[],[]];(()=>{for(var h=new Array(256),v=0;v<256;++v)h[v]=String.fromCharCode(v);Se=h})(),s=y.BindingError=class extends Error{constructor(h){super(h),this.name="BindingError"}},o=y.InternalError=class extends Error{constructor(h){super(h),this.name="InternalError"}},Object.assign(O.prototype,{get(h){return this.allocated[h]},has(h){return this.allocated[h]!==void 0},allocate(h){var v=this.freelist.pop()||this.allocated.length;return this.allocated[v]=h,v},free(h){this.allocated[h]=void 0,this.freelist.push(h)}}),S.allocated.push({value:void 0},{value:null},{value:!0},{value:!1}),S.reserved=S.allocated.length,y.count_emval_handles=L;var Ne,ge={_embind_register_bigint:(h,v,R,T,N)=>{},_embind_register_bool:(h,v,R,T)=>{d(h,{name:v=de(v),fromWireType:function(N){return!!N},toWireType:function(N,M){return M?R:T},argPackAdvance:8,readValueFromPointer:function(N){return this.fromWireType(i[N])},destructorFunction:null})},_embind_register_constant:(h,v,R)=>{h=de(h),C([],[v],function(T){return T=T[0],y[h]=T.fromWireType(R),[]})},_embind_register_emval:(h,v)=>{d(h,{name:v=de(v),fromWireType:R=>{var T=j(R);return(N=>{N>=S.reserved&&--S.get(N).refcount==0&&S.free(N)})(R),T},toWireType:(R,T)=>x(T),argPackAdvance:8,readValueFromPointer:Z,destructorFunction:null})},_embind_register_float:(h,v,R)=>{d(h,{name:v=de(v),fromWireType:T=>T,toWireType:(T,N)=>N,argPackAdvance:8,readValueFromPointer:te(v,R),destructorFunction:null})},_embind_register_integer:(h,v,R,T,N)=>{v=de(v);var M=X=>X;if(T===0){var F=32-8*R;M=X=>X<<F>>>F}var H=v.includes("unsigned");d(h,{name:v,fromWireType:M,toWireType:H?function(X,z){return this.name,z>>>0}:function(X,z){return this.name,z},argPackAdvance:8,readValueFromPointer:ce(v,R,T!==0),destructorFunction:null})},_embind_register_memory_view:(h,v,R)=>{var T=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][v];function N(M){var F=a[M>>2],H=a[M+4>>2];return new T(w.buffer,H,F)}d(h,{name:R=de(R),fromWireType:N,argPackAdvance:8,readValueFromPointer:N},{ignoreDuplicateRegistrations:!0})},_embind_register_std_string:(h,v)=>{var R=(v=de(v))==="std::string";d(h,{name:v,fromWireType:T=>{var N,M=a[T>>2],F=T+4;if(R)for(var H=F,X=0;X<=M;++X){var z=F+X;if(X==M||i[z]==0){var oe=ye(H,z-H);N===void 0?N=oe:(N+="\0",N+=oe),H=z+1}}else{var ne=new Array(M);for(X=0;X<M;++X)ne[X]=String.fromCharCode(i[F+X]);N=ne.join("")}return Oe(T),N},toWireType:(T,N)=>{var M;N instanceof ArrayBuffer&&(N=new Uint8Array(N));var F=typeof N=="string";F||N instanceof Uint8Array||N instanceof Uint8ClampedArray||N instanceof Int8Array||t("Cannot pass non-string to std::string"),M=R&&F?(ne=>{for(var se=0,J=0;J<ne.length;++J){var fe=ne.charCodeAt(J);fe<=127?se++:fe<=2047?se+=2:fe>=55296&&fe<=57343?(se+=4,++J):se+=3}return se})(N):N.length;var H=Fe(4+M+1),X=H+4;if(a[H>>2]=M,R&&F)((ne,se,J,fe)=>{if(!(fe>0))return 0;for(var Me=J,ke=J+fe-1,Ie=0;Ie<ne.length;++Ie){var ae=ne.charCodeAt(Ie);if(ae>=55296&&ae<=57343&&(ae=65536+((1023&ae)<<10)|1023&ne.charCodeAt(++Ie)),ae<=127){if(J>=ke)break;se[J++]=ae}else if(ae<=2047){if(J+1>=ke)break;se[J++]=192|ae>>6,se[J++]=128|63&ae}else if(ae<=65535){if(J+2>=ke)break;se[J++]=224|ae>>12,se[J++]=128|ae>>6&63,se[J++]=128|63&ae}else{if(J+3>=ke)break;se[J++]=240|ae>>18,se[J++]=128|ae>>12&63,se[J++]=128|ae>>6&63,se[J++]=128|63&ae}}se[J]=0})(N,i,X,M+1);else if(F)for(var z=0;z<M;++z){var oe=N.charCodeAt(z);oe>255&&(Oe(X),t("String has UTF-16 code units that do not fit in 8 bits")),i[X+z]=oe}else for(z=0;z<M;++z)i[X+z]=N[z];return T!==null&&T.push(Oe,H),H},argPackAdvance:8,readValueFromPointer:pe,destructorFunction:T=>Oe(T)})},_embind_register_std_wstring:(h,v,R)=>{var T,N,M,F,H;R=de(R),v===2?(T=Te,N=be,F=Re,M=()=>c,H=1):v===4&&(T=xe,N=Ge,F=ie,M=()=>a,H=2),d(h,{name:R,fromWireType:X=>{for(var z,oe=a[X>>2],ne=M(),se=X+4,J=0;J<=oe;++J){var fe=X+4+J*v;if(J==oe||ne[fe>>H]==0){var Me=T(se,fe-se);z===void 0?z=Me:(z+="\0",z+=Me),se=fe+v}}return Oe(X),z},toWireType:(X,z)=>{typeof z!="string"&&t(`Cannot pass non-string to C++ string type ${R}`);var oe=F(z),ne=Fe(4+oe+v);return a[ne>>2]=oe>>H,N(z,ne+4,oe+v),X!==null&&X.push(Oe,ne),ne},argPackAdvance:8,readValueFromPointer:Z,destructorFunction:X=>Oe(X)})},_embind_register_void:(h,v)=>{d(h,{isVoid:!0,name:v=de(v),argPackAdvance:0,fromWireType:()=>{},toWireType:(R,T)=>{}})},emscripten_get_now:Ce,emscripten_memcpy_big:(h,v,R)=>i.copyWithin(h,v,v+R),emscripten_resize_heap:h=>{var v=i.length,R=2147483648;if((h>>>=0)>R)return!1;for(var T,N=1;N<=4;N*=2){var M=v*(1+.2/N);M=Math.min(M,h+100663296);var F=Math.min(R,(T=Math.max(h,M))+(65536-T%65536)%65536);if(De(F))return!0}return!1},fd_write:(h,v,R,T)=>{for(var N=0,M=0;M<R;M++){var F=a[v>>2],H=a[v+4>>2];v+=8;for(var X=0;X<H;X++)z=h,oe=i[F+X],ne=void 0,ne=Le[z],oe===0||oe===10?((z===1?k:p)(ve(ne,0)),ne.length=0):ne.push(oe);N+=H}var z,oe,ne;return a[T>>2]=N,0}},me=function(){var h,v,R,T,N={env:ge,wasi_snapshot_preview1:ge};function M(F,H){var X,z=F.exports;return I=(me=z).memory,n(),me.__indirect_function_table,X=me.__wasm_call_ctors,m.unshift(X),function(oe){if(E--,y.monitorRunDependencies&&y.monitorRunDependencies(E),E==0&&G){var ne=G;G=null,ne()}}(),z}if(E++,y.monitorRunDependencies&&y.monitorRunDependencies(E),y.instantiateWasm)try{return y.instantiateWasm(N,M)}catch(F){p(`Module.instantiateWasm callback failed with error: ${F}`),B(F)}return(h=b,v=ee,R=N,T=function(F){M(F.instance)},h||typeof WebAssembly.instantiateStreaming!="function"||re(v)||typeof fetch!="function"?_e(v,R,T):fetch(v,{credentials:"same-origin"}).then(F=>WebAssembly.instantiateStreaming(F,R).then(T,function(H){return p(`wasm streaming compile failed: ${H}`),p("falling back to ArrayBuffer instantiation"),_e(v,R,T)}))).catch(B),{}}(),Fe=h=>(Fe=me.malloc)(h),Oe=h=>(Oe=me.free)(h);function We(){function h(){Ne||(Ne=!0,y.calledRun=!0,e||(we(m),U(y),y.onRuntimeInitialized&&y.onRuntimeInitialized(),function(){if(y.postRun)for(typeof y.postRun=="function"&&(y.postRun=[y.postRun]);y.postRun.length;)v=y.postRun.shift(),P.unshift(v);var v;we(P)}()))}E>0||(function(){if(y.preRun)for(typeof y.preRun=="function"&&(y.preRun=[y.preRun]);y.preRun.length;)v=y.preRun.shift(),f.unshift(v);var v;we(f)}(),E>0||(y.setStatus?(y.setStatus("Running..."),setTimeout(function(){setTimeout(function(){y.setStatus("")},1),h()},1)):h()))}if(y._omalloc=h=>(y._omalloc=me.omalloc)(h),y._ofree=h=>(y._ofree=me.ofree)(h),y._getLastOnigError=()=>(y._getLastOnigError=me.getLastOnigError)(),y._createOnigScanner=(h,v,R,T,N)=>(y._createOnigScanner=me.createOnigScanner)(h,v,R,T,N),y._freeOnigScanner=h=>(y._freeOnigScanner=me.freeOnigScanner)(h),y._findNextOnigScannerMatch=(h,v,R,T,N,M)=>(y._findNextOnigScannerMatch=me.findNextOnigScannerMatch)(h,v,R,T,N,M),y._findNextOnigScannerMatchDbg=(h,v,R,T,N,M)=>(y._findNextOnigScannerMatchDbg=me.findNextOnigScannerMatchDbg)(h,v,R,T,N,M),y.__embind_initialize_bindings=()=>(y.__embind_initialize_bindings=me._embind_initialize_bindings)(),y.dynCall_jiji=(h,v,R,T,N)=>(y.dynCall_jiji=me.dynCall_jiji)(h,v,R,T,N),y.UTF8ToString=ye,G=function h(){Ne||We(),Ne||(G=h)},y.preInit)for(typeof y.preInit=="function"&&(y.preInit=[y.preInit]);y.preInit.length>0;)y.preInit.pop()();return We(),_.ready});Q.exports=$}},V={},function Q($){var _=V[$];if(_!==void 0)return _.exports;var U=V[$]={exports:{}};return Y[$].call(U.exports,U,U.exports,Q),U.exports}(770);var Y,V})}($e)),$e.exports}var He=it();const ot=["indentationRules.decreaseIndentPattern","indentationRules.increaseIndentPattern","indentationRules.indentNextLinePattern","indentationRules.unIndentedLinePattern","folding.markers.start","folding.markers.end","wordPattern"];function st(le){const W=JSON.parse(le);for(const Y of ot){const V=at(W,Y);typeof V=="string"&&ut(W,Y,new RegExp(V))}return W}function at(le,W){return W.split(".").reduce((V,Q)=>V!=null?V[Q]:null,le)}function ut(le,W,Y){const V=W.split("."),Q=V.length-1;V.reduce(($,_,U)=>$==null?$:U===Q?($[_]=Y,null):$[_],le)}var qe={exports:{}},ct=qe.exports,Qe;function lt(){return Qe||(Qe=1,function(le,W){var Y={};(function(V,Q){le.exports=Q()})(ct,function(){return(()=>{var V={350:($,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.UseOnigurumaFindOptions=_.DebugFlags=void 0,_.DebugFlags={InDebugMode:typeof process<"u"&&!!Y.VSCODE_TEXTMATE_DEBUG},_.UseOnigurumaFindOptions=!1},527:($,_,U)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.LocalStackElement=_.StackElement=_.ScopeListElement=_.StackElementMetadata=_.Grammar=_.ScopeMetadata=_.ScopeDependencyProcessor=_.ScopeDependencyCollector=_.PartialScopeDependency=_.FullScopeDependency=_.createGrammar=void 0;var B=U(878),y=U(792),D=U(736),A=U(350),b=typeof performance>"u"?function(){return Date.now()}:function(){return performance.now()};_.createGrammar=function(s,t,o,C,d,O,S){return new f(s,t,o,C,d,O,S)};var I=function(s){this.scopeName=s};_.FullScopeDependency=I;var k=function(){function s(t,o){this.scopeName=t,this.include=o}return s.prototype.toKey=function(){return this.scopeName+"#"+this.include},s}();_.PartialScopeDependency=k;var p=function(){function s(){this.full=[],this.partial=[],this.visitedRule=new Set,this._seenFull=new Set,this._seenPartial=new Set}return s.prototype.add=function(t){t instanceof I?this._seenFull.has(t.scopeName)||(this._seenFull.add(t.scopeName),this.full.push(t)):this._seenPartial.has(t.toKey())||(this._seenPartial.add(t.toKey()),this.partial.push(t))},s}();function w(s,t,o,C,d){for(var O=0,S=C;O<S.length;O++){var L=S[O];if(!s.visitedRule.has(L)){s.visitedRule.add(L);var j=L.repository?B.mergeObjects({},d,L.repository):d;Array.isArray(L.patterns)&&w(s,t,o,L.patterns,j);var x=L.include;if(x)if(x==="$base"||x===t.scopeName)g(s,t,t);else if(x==="$self"||x===o.scopeName)g(s,t,o);else if(x.charAt(0)==="#")c(s,t,o,x.substring(1),j);else{var Z=x.indexOf("#");if(Z>=0){var te=x.substring(0,Z),ce=x.substring(Z+1);te===t.scopeName?c(s,t,t,ce,j):te===o.scopeName?c(s,t,o,ce,j):s.add(new k(te,x.substring(Z+1)))}else s.add(new I(x))}}}}_.ScopeDependencyCollector=p;var i=function(){function s(t,o){this.repo=t,this.initialScopeName=o,this.seenFullScopeRequests=new Set,this.seenPartialScopeRequests=new Set,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new I(this.initialScopeName)]}return s.prototype.processQueue=function(){var t=this.Q;this.Q=[];for(var o=new p,C=0,d=t;C<d.length;C++){var O=d[C];r(this.repo,this.initialScopeName,o,O)}for(var S=0,L=o.full;S<L.length;S++)O=L[S],this.seenFullScopeRequests.has(O.scopeName)||(this.seenFullScopeRequests.add(O.scopeName),this.Q.push(O));for(var j=0,x=o.partial;j<x.length;j++)O=x[j],this.seenFullScopeRequests.has(O.scopeName)||this.seenPartialScopeRequests.has(O.toKey())||(this.seenPartialScopeRequests.add(O.toKey()),this.Q.push(O))},s}();function r(s,t,o,C){var d=s.lookup(C.scopeName);if(d){C instanceof I?g(o,s.lookup(t),d):c(o,s.lookup(t),d,C.include);var O=s.injections(C.scopeName);if(O)for(var S=0,L=O;S<L.length;S++){var j=L[S];o.add(new I(j))}}else if(C.scopeName===t)throw new Error("No grammar provided for <"+t+">")}function c(s,t,o,C,d){d===void 0&&(d=o.repository),d&&d[C]&&w(s,t,o,[d[C]],d)}function g(s,t,o){if(o.patterns&&Array.isArray(o.patterns)&&w(s,t,o,o.patterns,o.repository),o.injections){var C=[];for(var d in o.injections)C.push(o.injections[d]);w(s,t,o,C,o.repository)}}function a(s,t){if(!s)return!1;if(s===t)return!0;var o=t.length;return s.length>o&&s.substr(0,o)===t&&s[o]==="."}function l(s,t){if(t.length<s.length)return!1;var o=0;return s.every(function(C){for(var d=o;d<t.length;d++)if(a(t[d],C))return o=d+1,!0;return!1})}function u(s,t,o,C,d){for(var O=D.createMatchers(t,l),S=y.RuleFactory.getCompiledRuleId(o,C,d.repository),L=0,j=O;L<j.length;L++){var x=j[L];s.push({debugSelector:t,matcher:x.matcher,ruleId:S,grammar:d,priority:x.priority})}}_.ScopeDependencyProcessor=i;var e=function(s,t,o,C){this.scopeName=s,this.languageId=t,this.tokenType=o,this.themeData=C};_.ScopeMetadata=e;var n=function(){function s(t,o,C){if(this._initialLanguage=t,this._themeProvider=o,this._cache=new Map,this._defaultMetaData=new e("",this._initialLanguage,0,[this._themeProvider.getDefaults()]),this._embeddedLanguages=Object.create(null),C)for(var d=Object.keys(C),O=0,S=d.length;O<S;O++){var L=d[O],j=C[L];typeof j=="number"&&j!==0?this._embeddedLanguages[L]=j:console.warn("Invalid embedded language found at scope "+L+": <<"+j+">>")}var x=Object.keys(this._embeddedLanguages).map(function(Z){return s._escapeRegExpCharacters(Z)});x.length===0?this._embeddedLanguagesRegex=null:(x.sort(),x.reverse(),this._embeddedLanguagesRegex=new RegExp("^(("+x.join(")|(")+"))($|\\.)",""))}return s.prototype.onDidChangeTheme=function(){this._cache=new Map,this._defaultMetaData=new e("",this._initialLanguage,0,[this._themeProvider.getDefaults()])},s.prototype.getDefaultMetadata=function(){return this._defaultMetaData},s._escapeRegExpCharacters=function(t){return t.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")},s.prototype.getMetadataForScope=function(t){if(t===null)return s._NULL_SCOPE_METADATA;var o=this._cache.get(t);return o||(o=this._doGetMetadataForScope(t),this._cache.set(t,o),o)},s.prototype._doGetMetadataForScope=function(t){var o=this._scopeToLanguage(t),C=this._toStandardTokenType(t),d=this._themeProvider.themeMatch(t);return new e(t,o,C,d)},s.prototype._scopeToLanguage=function(t){if(!t||!this._embeddedLanguagesRegex)return 0;var o=t.match(this._embeddedLanguagesRegex);return o&&(this._embeddedLanguages[o[1]]||0)||0},s.prototype._toStandardTokenType=function(t){var o=t.match(s.STANDARD_TOKEN_TYPE_REGEXP);if(!o)return 0;switch(o[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 8}throw new Error("Unexpected match for standard token type!")},s._NULL_SCOPE_METADATA=new e("",0,0,null),s.STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|meta\.embedded)\b/,s}(),f=function(){function s(t,o,C,d,O,S,L){if(this._scopeName=t,this._scopeMetadataProvider=new n(C,S,d),this._onigLib=L,this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=S,this._grammar=P(o,null),this._injections=null,this._tokenTypeMatchers=[],O)for(var j=0,x=Object.keys(O);j<x.length;j++)for(var Z=x[j],te=0,ce=D.createMatchers(Z,l);te<ce.length;te++){var pe=ce[te];this._tokenTypeMatchers.push({matcher:pe.matcher,type:O[Z]})}}return s.prototype.dispose=function(){for(var t=0,o=this._ruleId2desc;t<o.length;t++){var C=o[t];C&&C.dispose()}},s.prototype.createOnigScanner=function(t){return this._onigLib.createOnigScanner(t)},s.prototype.createOnigString=function(t){return this._onigLib.createOnigString(t)},s.prototype.onDidChangeTheme=function(){this._scopeMetadataProvider.onDidChangeTheme()},s.prototype.getMetadataForScope=function(t){return this._scopeMetadataProvider.getMetadataForScope(t)},s.prototype._collectInjections=function(){var t=this,o={lookup:function(O){return O===t._scopeName?t._grammar:t.getExternalGrammar(O)},injections:function(O){return t._grammarRepository.injections(O)}},C=new i(o,this._scopeName),d=[];return C.seenFullScopeRequests.forEach(function(O){var S=o.lookup(O);if(S){var L=S.injections;if(L)for(var j in L)u(d,j,L[j],t,S);if(t._grammarRepository){var x=t._grammarRepository.injections(O);x&&x.forEach(function(Z){var te=t.getExternalGrammar(Z);if(te){var ce=te.injectionSelector;ce&&u(d,ce,te,t,te)}})}}}),d.sort(function(O,S){return O.priority-S.priority}),d},s.prototype.getInjections=function(){if(this._injections===null&&(this._injections=this._collectInjections(),A.DebugFlags.InDebugMode&&this._injections.length>0)){console.log("Grammar "+this._scopeName+" contains the following injections:");for(var t=0,o=this._injections;t<o.length;t++){var C=o[t];console.log("  - "+C.debugSelector)}}return this._injections},s.prototype.registerRule=function(t){var o=++this._lastRuleId,C=t(o);return this._ruleId2desc[o]=C,C},s.prototype.getRule=function(t){return this._ruleId2desc[t]},s.prototype.getExternalGrammar=function(t,o){if(this._includedGrammars[t])return this._includedGrammars[t];if(this._grammarRepository){var C=this._grammarRepository.lookup(t);if(C)return this._includedGrammars[t]=P(C,o&&o.$base),this._includedGrammars[t]}},s.prototype.tokenizeLine=function(t,o,C){C===void 0&&(C=0);var d=this._tokenize(t,o,!1,C);return{tokens:d.lineTokens.getResult(d.ruleStack,d.lineLength),ruleStack:d.ruleStack,stoppedEarly:d.stoppedEarly}},s.prototype.tokenizeLine2=function(t,o,C){C===void 0&&(C=0);var d=this._tokenize(t,o,!0,C);return{tokens:d.lineTokens.getBinaryResult(d.ruleStack,d.lineLength),ruleStack:d.ruleStack,stoppedEarly:d.stoppedEarly}},s.prototype._tokenize=function(t,o,C,d){var O;if(this._rootId===-1&&(this._rootId=y.RuleFactory.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository)),o&&o!==Se.NULL)O=!1,o.reset();else{O=!0;var S=this._scopeMetadataProvider.getDefaultMetadata(),L=S.themeData[0],j=_e.set(0,S.languageId,S.tokenType,L.fontStyle,L.foreground,L.background),x=this.getRule(this._rootId).getName(null,null),Z=this._scopeMetadataProvider.getMetadataForScope(x),te=we.mergeMetadata(j,null,Z),ce=new we(null,x===null?"unknown":x,te);o=new Se(null,this._rootId,-1,-1,!1,null,ce,ce)}t+=`
`;var pe=this.createOnigString(t),Ce=pe.content.length,K=new Ae(C,t,this._tokenTypeMatchers),ve=ue(this,pe,O,0,o,K,!0,d);return m(pe),{lineLength:Ce,lineTokens:K,ruleStack:ve.stack,stoppedEarly:ve.stoppedEarly}},s}();function m(s){typeof s.dispose=="function"&&s.dispose()}function P(s,t){return(s=B.clone(s)).repository=s.repository||{},s.repository.$self={$vscodeTextmateLocation:s.$vscodeTextmateLocation,patterns:s.patterns,name:s.scopeName},s.repository.$base=t||s.repository.$self,s}function E(s,t,o,C,d,O,S){if(O.length!==0){for(var L=t.content,j=Math.min(O.length,S.length),x=[],Z=S[0].end,te=0;te<j;te++){var ce=O[te];if(ce!==null){var pe=S[te];if(pe.length!==0){if(pe.start>Z)break;for(;x.length>0&&x[x.length-1].endPos<=pe.start;)d.produceFromScopes(x[x.length-1].scopes,x[x.length-1].endPos),x.pop();if(x.length>0?d.produceFromScopes(x[x.length-1].scopes,pe.start):d.produce(C,pe.start),ce.retokenizeCapturedWithRuleId){var Ce=ce.getName(L,S),K=C.contentNameScopesList.push(s,Ce),ve=ce.getContentName(L,S),ye=K.push(s,ve),Pe=C.push(ce.retokenizeCapturedWithRuleId,pe.start,-1,!1,null,K,ye),Te=s.createOnigString(L.substring(0,pe.end));ue(s,Te,o&&pe.start===0,pe.start,Pe,d,!1,0),m(Te)}else{var be=ce.getName(L,S);if(be!==null){var Re=(x.length>0?x[x.length-1].scopes:C.contentNameScopesList).push(s,be);x.push(new de(Re,pe.end))}}}}}for(;x.length>0;)d.produceFromScopes(x[x.length-1].scopes,x[x.length-1].endPos),x.pop()}}function G(s){for(var t=[],o=0,C=s.rules.length;o<C;o++)t.push("   - "+s.rules[o]+": "+s.debugRegExps[o]);return t.join(`
`)}function q(s,t){var o=0;return s||(o|=1),t||(o|=4),o}function ee(s,t,o,C,d){return A.UseOnigurumaFindOptions?{ruleScanner:s.compile(t,o),findOptions:q(C,d)}:{ruleScanner:s.compileAG(t,o,C,d),findOptions:0}}function he(s,t,o,C,d){return A.UseOnigurumaFindOptions?{ruleScanner:s.compileWhile(t,o),findOptions:q(C,d)}:{ruleScanner:s.compileWhileAG(t,o,C,d),findOptions:0}}_.Grammar=f;var re=function(s,t){this.stack=s,this.stoppedEarly=t};function ue(s,t,o,C,d,O,S,L){var j=t.content.length,x=!1,Z=-1;if(S){var te=function(Ce,K,ve,ye,Pe,Te){for(var be=Pe.beginRuleCapturedEOL?0:-1,Re=[],xe=Pe;xe;xe=xe.pop()){var Ge=xe.getRule(Ce);Ge instanceof y.BeginWhileRule&&Re.push({rule:Ge,stack:xe})}for(var ie=Re.pop();ie;ie=Re.pop()){var De=he(ie.rule,Ce,ie.stack.endRule,ve,ye===be),Le=De.ruleScanner,Ne=De.findOptions,ge=Le.scanner.findNextMatchSync(K,ye,Ne);if(A.DebugFlags.InDebugMode&&(console.log("  scanning for while rule"),console.log(G(Le))),!ge){A.DebugFlags.InDebugMode&&console.log("  popping "+ie.rule.debugName+" - "+ie.rule.debugWhileRegExp),Pe=ie.stack.pop();break}if(Le.rules[ge.index]!==-2){Pe=ie.stack.pop();break}ge.captureIndices&&ge.captureIndices.length&&(Te.produce(ie.stack,ge.captureIndices[0].start),E(Ce,K,ve,ie.stack,Te,ie.rule.whileCaptures,ge.captureIndices),Te.produce(ie.stack,ge.captureIndices[0].end),be=ge.captureIndices[0].end,ge.captureIndices[0].end>ye&&(ye=ge.captureIndices[0].end,ve=!1))}return{stack:Pe,linePos:ye,anchorPosition:be,isFirstLine:ve}}(s,t,o,C,d,O);d=te.stack,C=te.linePos,o=te.isFirstLine,Z=te.anchorPosition}for(var ce=Date.now();!x;){if(L!==0&&Date.now()-ce>L)return new re(d,!0);pe()}return new re(d,!1);function pe(){A.DebugFlags.InDebugMode&&(console.log(""),console.log("@@scanNext "+C+": |"+t.content.substr(C).replace(/\n$/,"\\n")+"|"));var Ce=function(ge,me,Fe,Oe,We,h){var v=function(F,H,X,z,oe,ne){var se=oe.getRule(F),J=ee(se,F,oe.endRule,X,z===ne),fe=J.ruleScanner,Me=J.findOptions,ke=0;A.DebugFlags.InDebugMode&&(ke=b());var Ie=fe.scanner.findNextMatchSync(H,z,Me);if(A.DebugFlags.InDebugMode){var ae=b()-ke;ae>5&&console.warn("Rule "+se.debugName+" ("+se.id+") matching took "+ae+" against '"+H+"'"),console.log("  scanning for (linePos: "+z+", anchorPosition: "+ne+")"),console.log(G(fe)),Ie&&console.log("matched rule id: "+fe.rules[Ie.index]+" from "+Ie.captureIndices[0].start+" to "+Ie.captureIndices[0].end)}return Ie?{captureIndices:Ie.captureIndices,matchedRuleId:fe.rules[Ie.index]}:null}(ge,me,Fe,Oe,We,h),R=ge.getInjections();if(R.length===0)return v;var T=function(F,H,X,z,oe,ne,se){for(var J,fe=Number.MAX_VALUE,Me=null,ke=0,Ie=ne.contentNameScopesList.generateScopes(),ae=0,Je=F.length;ae<Je;ae++){var je=F[ae];if(je.matcher(Ie)){var Ye=ee(H.getRule(je.ruleId),H,null,z,oe===se),Xe=Ye.ruleScanner,Ze=Ye.findOptions,Ue=Xe.scanner.findNextMatchSync(X,oe,Ze);if(Ue){A.DebugFlags.InDebugMode&&(console.log("  matched injection: "+je.debugSelector),console.log(G(Xe)));var Ve=Ue.captureIndices[0].start;if(!(Ve>=fe)&&(fe=Ve,Me=Ue.captureIndices,J=Xe.rules[Ue.index],ke=je.priority,fe===oe))break}}}return Me?{priorityMatch:ke===-1,captureIndices:Me,matchedRuleId:J}:null}(R,ge,me,Fe,Oe,We,h);if(!T)return v;if(!v)return T;var N=v.captureIndices[0].start,M=T.captureIndices[0].start;return M<N||T.priorityMatch&&M===N?T:v}(s,t,o,C,d,Z);if(!Ce)return A.DebugFlags.InDebugMode&&console.log("  no more matches."),O.produce(d,j),void(x=!0);var K=Ce.captureIndices,ve=Ce.matchedRuleId,ye=!!(K&&K.length>0)&&K[0].end>C;if(ve===-1){var Pe=d.getRule(s);A.DebugFlags.InDebugMode&&console.log("  popping "+Pe.debugName+" - "+Pe.debugEndRegExp),O.produce(d,K[0].start),d=d.setContentNameScopesList(d.nameScopesList),E(s,t,o,d,O,Pe.endCaptures,K),O.produce(d,K[0].end);var Te=d;if(d=d.pop(),Z=Te.getAnchorPos(),!ye&&Te.getEnterPos()===C)return A.DebugFlags.InDebugMode&&console.error("[1] - Grammar is in an endless loop - Grammar pushed & popped a rule without advancing"),d=Te,O.produce(d,j),void(x=!0)}else{var be=s.getRule(ve);O.produce(d,K[0].start);var Re=d,xe=be.getName(t.content,K),Ge=d.contentNameScopesList.push(s,xe);if(d=d.push(ve,C,Z,K[0].end===j,null,Ge,Ge),be instanceof y.BeginEndRule){var ie=be;A.DebugFlags.InDebugMode&&console.log("  pushing "+ie.debugName+" - "+ie.debugBeginRegExp),E(s,t,o,d,O,ie.beginCaptures,K),O.produce(d,K[0].end),Z=K[0].end;var De=ie.getContentName(t.content,K),Le=Ge.push(s,De);if(d=d.setContentNameScopesList(Le),ie.endHasBackReferences&&(d=d.setEndRule(ie.getEndWithResolvedBackReferences(t.content,K))),!ye&&Re.hasSameRuleAs(d))return A.DebugFlags.InDebugMode&&console.error("[2] - Grammar is in an endless loop - Grammar pushed the same rule without advancing"),d=d.pop(),O.produce(d,j),void(x=!0)}else if(be instanceof y.BeginWhileRule){if(ie=be,A.DebugFlags.InDebugMode&&console.log("  pushing "+ie.debugName),E(s,t,o,d,O,ie.beginCaptures,K),O.produce(d,K[0].end),Z=K[0].end,De=ie.getContentName(t.content,K),Le=Ge.push(s,De),d=d.setContentNameScopesList(Le),ie.whileHasBackReferences&&(d=d.setEndRule(ie.getWhileWithResolvedBackReferences(t.content,K))),!ye&&Re.hasSameRuleAs(d))return A.DebugFlags.InDebugMode&&console.error("[3] - Grammar is in an endless loop - Grammar pushed the same rule without advancing"),d=d.pop(),O.produce(d,j),void(x=!0)}else{var Ne=be;if(A.DebugFlags.InDebugMode&&console.log("  matched "+Ne.debugName+" - "+Ne.debugMatchRegExp),E(s,t,o,d,O,Ne.captures,K),O.produce(d,K[0].end),d=d.pop(),!ye)return A.DebugFlags.InDebugMode&&console.error("[4] - Grammar is in an endless loop - Grammar is not advancing, nor is it pushing/popping"),d=d.safePop(),O.produce(d,j),void(x=!0)}}K[0].end>C&&(C=K[0].end,o=!1)}}var _e=function(){function s(){}return s.toBinaryStr=function(t){for(var o=t.toString(2);o.length<32;)o="0"+o;return o},s.printMetadata=function(t){var o=s.getLanguageId(t),C=s.getTokenType(t),d=s.getFontStyle(t),O=s.getForeground(t),S=s.getBackground(t);console.log({languageId:o,tokenType:C,fontStyle:d,foreground:O,background:S})},s.getLanguageId=function(t){return(255&t)>>>0},s.getTokenType=function(t){return(768&t)>>>8},s.getFontStyle=function(t){return(15360&t)>>>10},s.getForeground=function(t){return(8372224&t)>>>14},s.getBackground=function(t){return(4286578688&t)>>>23},s.set=function(t,o,C,d,O,S){var L=s.getLanguageId(t),j=s.getTokenType(t),x=s.getFontStyle(t),Z=s.getForeground(t),te=s.getBackground(t);return o!==0&&(L=o),C!==0&&(j=C===8?0:C),d!==-1&&(x=d),O!==0&&(Z=O),S!==0&&(te=S),(L<<0|j<<8|x<<10|Z<<14|te<<23)>>>0},s}();_.StackElementMetadata=_e;var we=function(){function s(t,o,C){this.parent=t,this.scope=o,this.metadata=C}return s._equals=function(t,o){for(;;){if(t===o||!t&&!o)return!0;if(!t||!o||t.scope!==o.scope||t.metadata!==o.metadata)return!1;t=t.parent,o=o.parent}},s.prototype.equals=function(t){return s._equals(this,t)},s._matchesScope=function(t,o,C){return o===t||t.substring(0,C.length)===C},s._matches=function(t,o){if(o===null)return!0;for(var C=o.length,d=0,O=o[d],S=O+".";t;){if(this._matchesScope(t.scope,O,S)){if(++d===C)return!0;S=(O=o[d])+"."}t=t.parent}return!1},s.mergeMetadata=function(t,o,C){if(C===null)return t;var d=-1,O=0,S=0;if(C.themeData!==null)for(var L=0,j=C.themeData.length;L<j;L++){var x=C.themeData[L];if(this._matches(o,x.parentScopes)){d=x.fontStyle,O=x.foreground,S=x.background;break}}return _e.set(t,C.languageId,C.tokenType,d,O,S)},s._push=function(t,o,C){for(var d=0,O=C.length;d<O;d++){var S=C[d],L=o.getMetadataForScope(S),j=s.mergeMetadata(t.metadata,t,L);t=new s(t,S,j)}return t},s.prototype.push=function(t,o){return o===null?this:o.indexOf(" ")>=0?s._push(this,t,o.split(/ /g)):s._push(this,t,[o])},s._generateScopes=function(t){for(var o=[],C=0;t;)o[C++]=t.scope,t=t.parent;return o.reverse(),o},s.prototype.generateScopes=function(){return s._generateScopes(this)},s}();_.ScopeListElement=we;var Se=function(){function s(t,o,C,d,O,S,L,j){this._stackElementBrand=void 0,this.parent=t,this.depth=this.parent?this.parent.depth+1:1,this.ruleId=o,this._enterPos=C,this._anchorPos=d,this.beginRuleCapturedEOL=O,this.endRule=S,this.nameScopesList=L,this.contentNameScopesList=j}return s._structuralEquals=function(t,o){for(;;){if(t===o||!t&&!o)return!0;if(!t||!o||t.depth!==o.depth||t.ruleId!==o.ruleId||t.endRule!==o.endRule)return!1;t=t.parent,o=o.parent}},s._equals=function(t,o){return t===o||!!this._structuralEquals(t,o)&&t.contentNameScopesList.equals(o.contentNameScopesList)},s.prototype.clone=function(){return this},s.prototype.equals=function(t){return t!==null&&s._equals(this,t)},s._reset=function(t){for(;t;)t._enterPos=-1,t._anchorPos=-1,t=t.parent},s.prototype.reset=function(){s._reset(this)},s.prototype.pop=function(){return this.parent},s.prototype.safePop=function(){return this.parent?this.parent:this},s.prototype.push=function(t,o,C,d,O,S,L){return new s(this,t,o,C,d,O,S,L)},s.prototype.getEnterPos=function(){return this._enterPos},s.prototype.getAnchorPos=function(){return this._anchorPos},s.prototype.getRule=function(t){return t.getRule(this.ruleId)},s.prototype._writeString=function(t,o){return this.parent&&(o=this.parent._writeString(t,o)),t[o++]="("+this.ruleId+", TODO-"+this.nameScopesList+", TODO-"+this.contentNameScopesList+")",o},s.prototype.toString=function(){var t=[];return this._writeString(t,0),"["+t.join(",")+"]"},s.prototype.setContentNameScopesList=function(t){return this.contentNameScopesList===t?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,t)},s.prototype.setEndRule=function(t){return this.endRule===t?this:new s(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,t,this.nameScopesList,this.contentNameScopesList)},s.prototype.hasSameRuleAs=function(t){for(var o=this;o&&o._enterPos===t._enterPos;){if(o.ruleId===t.ruleId)return!0;o=o.parent}return!1},s.NULL=new s(null,0,0,0,!1,null,null,null),s}();_.StackElement=Se;var de=function(s,t){this.scopes=s,this.endPos=t};_.LocalStackElement=de;var Ae=function(){function s(t,o,C){this._emitBinaryTokens=t,this._tokenTypeOverrides=C,A.DebugFlags.InDebugMode?this._lineText=o:this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}return s.prototype.produce=function(t,o){this.produceFromScopes(t.contentNameScopesList,o)},s.prototype.produceFromScopes=function(t,o){if(!(this._lastTokenEndIndex>=o)){if(this._emitBinaryTokens){var C=t.metadata;if(this._tokenTypeOverrides.length>0)for(var d=t.generateScopes(),O=0,S=this._tokenTypeOverrides;O<S.length;O++){var L=S[O];L.matcher(d)&&(C=_e.set(C,0,Ee(L.type),-1,0,0))}if(this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===C)return void(this._lastTokenEndIndex=o);if(A.DebugFlags.InDebugMode){var j=t.generateScopes();console.log("  token: |"+this._lineText.substring(this._lastTokenEndIndex,o).replace(/\n$/,"\\n")+"|");for(var x=0;x<j.length;x++)console.log("      * "+j[x])}return this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(C),void(this._lastTokenEndIndex=o)}var Z=t.generateScopes();if(A.DebugFlags.InDebugMode)for(console.log("  token: |"+this._lineText.substring(this._lastTokenEndIndex,o).replace(/\n$/,"\\n")+"|"),x=0;x<Z.length;x++)console.log("      * "+Z[x]);this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:o,scopes:Z}),this._lastTokenEndIndex=o}},s.prototype.getResult=function(t,o){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===o-1&&this._tokens.pop(),this._tokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,o),this._tokens[this._tokens.length-1].startIndex=0),this._tokens},s.prototype.getBinaryResult=function(t,o){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===o-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),this._binaryTokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,o),this._binaryTokens[this._binaryTokens.length-2]=0);for(var C=new Uint32Array(this._binaryTokens.length),d=0,O=this._binaryTokens.length;d<O;d++)C[d]=this._binaryTokens[d];return C},s}();function Ee(s){switch(s){case 3:return 3;case 2:return 2;case 1:return 1;case 0:default:return 8}}},25:($,_,U)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseRawGrammar=void 0;var B=U(69),y=U(350),D=U(974);_.parseRawGrammar=function(A,b){return b===void 0&&(b=null),b!==null&&/\.json$/.test(b)?(I=A,k=b,y.DebugFlags.InDebugMode?D.parse(I,k,!0):JSON.parse(I)):function(p,w){return y.DebugFlags.InDebugMode?B.parseWithLocation(p,w,"$vscodeTextmateLocation"):B.parse(p)}(A,b);var I,k}},974:($,_)=>{function U(A,b){throw new Error("Near offset "+A.pos+": "+b+" ~~~"+A.source.substr(A.pos,50)+"~~~")}Object.defineProperty(_,"__esModule",{value:!0}),_.parse=void 0,_.parse=function(A,b,I){var k=new B(A),p=new y,w=0,i=null,r=[],c=[];function g(){r.push(w),c.push(i)}function a(){w=r.pop(),i=c.pop()}function l(f){U(k,f)}for(;D(k,p);){if(w===0){if(i!==null&&l("too many constructs in root"),p.type===3){i={},I&&(i.$vscodeTextmateLocation=p.toLocation(b)),g(),w=1;continue}if(p.type===2){i=[],g(),w=4;continue}l("unexpected token in root")}if(w===2){if(p.type===5){a();continue}if(p.type===7){w=3;continue}l("expected , or }")}if(w===1||w===3){if(w===1&&p.type===5){a();continue}if(p.type===1){var u=p.value;if(D(k,p)&&p.type===6||l("expected colon"),D(k,p)||l("expected value"),w=2,p.type===1){i[u]=p.value;continue}if(p.type===8){i[u]=null;continue}if(p.type===9){i[u]=!0;continue}if(p.type===10){i[u]=!1;continue}if(p.type===11){i[u]=parseFloat(p.value);continue}if(p.type===2){var e=[];i[u]=e,g(),w=4,i=e;continue}if(p.type===3){var n={};I&&(n.$vscodeTextmateLocation=p.toLocation(b)),i[u]=n,g(),w=1,i=n;continue}}l("unexpected token in dict")}if(w===5){if(p.type===4){a();continue}if(p.type===7){w=6;continue}l("expected , or ]")}if(w===4||w===6){if(w===4&&p.type===4){a();continue}if(w=5,p.type===1){i.push(p.value);continue}if(p.type===8){i.push(null);continue}if(p.type===9){i.push(!0);continue}if(p.type===10){i.push(!1);continue}if(p.type===11){i.push(parseFloat(p.value));continue}if(p.type===2){e=[],i.push(e),g(),w=4,i=e;continue}if(p.type===3){n={},I&&(n.$vscodeTextmateLocation=p.toLocation(b)),i.push(n),g(),w=1,i=n;continue}l("unexpected token in array")}l("unknown state")}return c.length!==0&&l("unclosed constructs"),i};var B=function(A){this.source=A,this.pos=0,this.len=A.length,this.line=1,this.char=0},y=function(){function A(){this.value=null,this.type=0,this.offset=-1,this.len=-1,this.line=-1,this.char=-1}return A.prototype.toLocation=function(b){return{filename:b,line:this.line,char:this.char}},A}();function D(A,b){b.value=null,b.type=0,b.offset=-1,b.len=-1,b.line=-1,b.char=-1;for(var I,k=A.source,p=A.pos,w=A.len,i=A.line,r=A.char;;){if(p>=w)return!1;if((I=k.charCodeAt(p))!==32&&I!==9&&I!==13){if(I!==10)break;p++,i++,r=0}else p++,r++}if(b.offset=p,b.line=i,b.char=r,I===34){for(b.type=1,p++,r++;;){if(p>=w)return!1;if(I=k.charCodeAt(p),p++,r++,I!==92){if(I===34)break}else p++,r++}b.value=k.substring(b.offset+1,p-1).replace(/\\u([0-9A-Fa-f]{4})/g,function(c,g){return String.fromCodePoint(parseInt(g,16))}).replace(/\\(.)/g,function(c,g){switch(g){case'"':return'"';case"\\":return"\\";case"/":return"/";case"b":return"\b";case"f":return"\f";case"n":return`
`;case"r":return"\r";case"t":return"	";default:U(A,"invalid escape sequence")}throw new Error("unreachable")})}else if(I===91)b.type=2,p++,r++;else if(I===123)b.type=3,p++,r++;else if(I===93)b.type=4,p++,r++;else if(I===125)b.type=5,p++,r++;else if(I===58)b.type=6,p++,r++;else if(I===44)b.type=7,p++,r++;else if(I===110){if(b.type=8,p++,r++,(I=k.charCodeAt(p))!==117||(p++,r++,(I=k.charCodeAt(p))!==108)||(p++,r++,(I=k.charCodeAt(p))!==108))return!1;p++,r++}else if(I===116){if(b.type=9,p++,r++,(I=k.charCodeAt(p))!==114||(p++,r++,(I=k.charCodeAt(p))!==117)||(p++,r++,(I=k.charCodeAt(p))!==101))return!1;p++,r++}else if(I===102){if(b.type=10,p++,r++,(I=k.charCodeAt(p))!==97||(p++,r++,(I=k.charCodeAt(p))!==108)||(p++,r++,(I=k.charCodeAt(p))!==115)||(p++,r++,(I=k.charCodeAt(p))!==101))return!1;p++,r++}else for(b.type=11;;){if(p>=w)return!1;if(!((I=k.charCodeAt(p))===46||I>=48&&I<=57||I===101||I===69||I===45||I===43))break;p++,r++}return b.len=p-b.offset,b.value===null&&(b.value=k.substr(b.offset,b.len)),A.pos=p,A.line=i,A.char=r,!0}},787:function($,_,U){var B=this&&this.__createBinding||(Object.create?function(i,r,c,g){g===void 0&&(g=c),Object.defineProperty(i,g,{enumerable:!0,get:function(){return r[c]}})}:function(i,r,c,g){g===void 0&&(g=c),i[g]=r[c]}),y=this&&this.__exportStar||function(i,r){for(var c in i)c==="default"||Object.prototype.hasOwnProperty.call(r,c)||B(r,i,c)},D=this&&this.__awaiter||function(i,r,c,g){return new(c||(c=Promise))(function(a,l){function u(f){try{n(g.next(f))}catch(m){l(m)}}function e(f){try{n(g.throw(f))}catch(m){l(m)}}function n(f){var m;f.done?a(f.value):(m=f.value,m instanceof c?m:new c(function(P){P(m)})).then(u,e)}n((g=g.apply(i,r||[])).next())})},A=this&&this.__generator||function(i,r){var c,g,a,l,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return l={next:e(0),throw:e(1),return:e(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function e(n){return function(f){return function(m){if(c)throw new TypeError("Generator is already executing.");for(;u;)try{if(c=1,g&&(a=2&m[0]?g.return:m[0]?g.throw||((a=g.return)&&a.call(g),0):g.next)&&!(a=a.call(g,m[1])).done)return a;switch(g=0,a&&(m=[2&m[0],a.value]),m[0]){case 0:case 1:a=m;break;case 4:return u.label++,{value:m[1],done:!1};case 5:u.label++,g=m[1],m=[0];continue;case 7:m=u.ops.pop(),u.trys.pop();continue;default:if(!((a=(a=u.trys).length>0&&a[a.length-1])||m[0]!==6&&m[0]!==2)){u=0;continue}if(m[0]===3&&(!a||m[1]>a[0]&&m[1]<a[3])){u.label=m[1];break}if(m[0]===6&&u.label<a[1]){u.label=a[1],a=m;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(m);break}a[2]&&u.ops.pop(),u.trys.pop();continue}m=r.call(i,u)}catch(P){m=[6,P],g=0}finally{c=a=0}if(5&m[0])throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}([n,f])}}};Object.defineProperty(_,"__esModule",{value:!0}),_.parseRawGrammar=_.INITIAL=_.Registry=void 0;var b=U(652),I=U(25),k=U(583),p=U(527);y(U(42),_);var w=function(){function i(r){this._options=r,this._syncRegistry=new b.SyncRegistry(k.Theme.createFromRawTheme(r.theme,r.colorMap),r.onigLib),this._ensureGrammarCache=new Map}return i.prototype.dispose=function(){this._syncRegistry.dispose()},i.prototype.setTheme=function(r,c){this._syncRegistry.setTheme(k.Theme.createFromRawTheme(r,c))},i.prototype.getColorMap=function(){return this._syncRegistry.getColorMap()},i.prototype.loadGrammarWithEmbeddedLanguages=function(r,c,g){return this.loadGrammarWithConfiguration(r,c,{embeddedLanguages:g})},i.prototype.loadGrammarWithConfiguration=function(r,c,g){return this._loadGrammar(r,c,g.embeddedLanguages,g.tokenTypes)},i.prototype.loadGrammar=function(r){return this._loadGrammar(r,0,null,null)},i.prototype._doLoadSingleGrammar=function(r){return D(this,void 0,void 0,function(){var c,g;return A(this,function(a){switch(a.label){case 0:return[4,this._options.loadGrammar(r)];case 1:return(c=a.sent())&&(g=typeof this._options.getInjections=="function"?this._options.getInjections(r):void 0,this._syncRegistry.addGrammar(c,g)),[2]}})})},i.prototype._loadSingleGrammar=function(r){return D(this,void 0,void 0,function(){return A(this,function(c){return this._ensureGrammarCache.has(r)||this._ensureGrammarCache.set(r,this._doLoadSingleGrammar(r)),[2,this._ensureGrammarCache.get(r)]})})},i.prototype._loadGrammar=function(r,c,g,a){return D(this,void 0,void 0,function(){var l,u=this;return A(this,function(e){switch(e.label){case 0:l=new p.ScopeDependencyProcessor(this._syncRegistry,r),e.label=1;case 1:return l.Q.length>0?[4,Promise.all(l.Q.map(function(n){return u._loadSingleGrammar(n.scopeName)}))]:[3,3];case 2:return e.sent(),l.processQueue(),[3,1];case 3:return[2,this.grammarForScopeName(r,c,g,a)]}})})},i.prototype.addGrammar=function(r,c,g,a){return c===void 0&&(c=[]),g===void 0&&(g=0),a===void 0&&(a=null),D(this,void 0,void 0,function(){return A(this,function(l){switch(l.label){case 0:return this._syncRegistry.addGrammar(r,c),[4,this.grammarForScopeName(r.scopeName,g,a)];case 1:return[2,l.sent()]}})})},i.prototype.grammarForScopeName=function(r,c,g,a){return c===void 0&&(c=0),g===void 0&&(g=null),a===void 0&&(a=null),this._syncRegistry.grammarForScopeName(r,c,g,a)},i}();_.Registry=w,_.INITIAL=p.StackElement.NULL,_.parseRawGrammar=I.parseRawGrammar},736:($,_)=>{function U(B){return!!B&&!!B.match(/[\w\.:]+/)}Object.defineProperty(_,"__esModule",{value:!0}),_.createMatchers=void 0,_.createMatchers=function(B,y){for(var D,A,b,I=[],k=(b=(A=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g).exec(D=B),{next:function(){if(!b)return null;var g=b[0];return b=A.exec(D),g}}),p=k.next();p!==null;){var w=0;if(p.length===2&&p.charAt(1)===":"){switch(p.charAt(0)){case"R":w=1;break;case"L":w=-1;break;default:console.log("Unknown priority "+p+" in scope selector")}p=k.next()}var i=c();if(I.push({matcher:i,priority:w}),p!==",")break;p=k.next()}return I;function r(){if(p==="-"){p=k.next();var g=r();return function(u){return!!g&&!g(u)}}if(p==="("){p=k.next();var a=function(){for(var u=[],e=c();e&&(u.push(e),p==="|"||p===",");){do p=k.next();while(p==="|"||p===",");e=c()}return function(n){return u.some(function(f){return f(n)})}}();return p===")"&&(p=k.next()),a}if(U(p)){var l=[];do l.push(p),p=k.next();while(U(p));return function(u){return y(l,u)}}return null}function c(){for(var g=[],a=r();a;)g.push(a),a=r();return function(l){return g.every(function(u){return u(l)})}}}},69:($,_)=>{function U(B,y,D){var A=B.length,b=0,I=1,k=0;function p(S){if(D===null)b+=S;else for(;S>0;)B.charCodeAt(b)===10?(b++,I++,k=0):(b++,k++),S--}function w(S){D===null?b=S:p(S-b)}function i(){for(;b<A;){var S=B.charCodeAt(b);if(S!==32&&S!==9&&S!==13&&S!==10)break;p(1)}}function r(S){return B.substr(b,S.length)===S&&(p(S.length),!0)}function c(S){var L=B.indexOf(S,b);w(L!==-1?L+S.length:A)}function g(S){var L=B.indexOf(S,b);if(L!==-1){var j=B.substring(b,L);return w(L+S.length),j}return j=B.substr(b),w(A),j}A>0&&B.charCodeAt(0)===65279&&(b=1);var a=0,l=null,u=[],e=[],n=null;function f(S,L){u.push(a),e.push(l),a=S,l=L}function m(){if(u.length===0)return P("illegal state stack");a=u.pop(),l=e.pop()}function P(S){throw new Error("Near offset "+b+": "+S+" ~~~"+B.substr(b,50)+"~~~")}var E,G,q,ee,he,re=function(){if(n===null)return P("missing <key>");var S={};D!==null&&(S[D]={filename:y,line:I,char:k}),l[n]=S,n=null,f(1,S)},ue=function(){if(n===null)return P("missing <key>");var S=[];l[n]=S,n=null,f(2,S)};function _e(){if(a!==1)return P("unexpected </dict>");m()}function we(){return a===1||a!==2?P("unexpected </array>"):void m()}function Se(S){if(a===1){if(n===null)return P("missing <key>");l[n]=S,n=null}else a===2?l.push(S):l=S}function de(S){if(isNaN(S))return P("cannot parse float");if(a===1){if(n===null)return P("missing <key>");l[n]=S,n=null}else a===2?l.push(S):l=S}function Ae(S){if(isNaN(S))return P("cannot parse integer");if(a===1){if(n===null)return P("missing <key>");l[n]=S,n=null}else a===2?l.push(S):l=S}function Ee(S){if(a===1){if(n===null)return P("missing <key>");l[n]=S,n=null}else a===2?l.push(S):l=S}function s(S){if(a===1){if(n===null)return P("missing <key>");l[n]=S,n=null}else a===2?l.push(S):l=S}function t(S){if(a===1){if(n===null)return P("missing <key>");l[n]=S,n=null}else a===2?l.push(S):l=S}function o(S){if(S.isClosed)return"";var L=g("</");return c(">"),L.replace(/&#([0-9]+);/g,function(j,x){return String.fromCodePoint(parseInt(x,10))}).replace(/&#x([0-9a-f]+);/g,function(j,x){return String.fromCodePoint(parseInt(x,16))}).replace(/&amp;|&lt;|&gt;|&quot;|&apos;/g,function(j){switch(j){case"&amp;":return"&";case"&lt;":return"<";case"&gt;":return">";case"&quot;":return'"';case"&apos;":return"'"}return j})}for(;b<A&&(i(),!(b>=A));){var C=B.charCodeAt(b);if(p(1),C!==60)return P("expected <");if(b>=A)return P("unexpected end of input");var d=B.charCodeAt(b);if(d!==63)if(d!==33){if(d===47){if(p(1),i(),r("plist")){c(">");continue}if(r("dict")){c(">"),_e();continue}if(r("array")){c(">"),we();continue}return P("unexpected closed tag")}var O=(G=void 0,q=void 0,q=!1,(G=g(">")).charCodeAt(G.length-1)===47&&(q=!0,G=G.substring(0,G.length-1)),{name:G.trim(),isClosed:q});switch(O.name){case"dict":a===1?re():a===2?(he=void 0,he={},D!==null&&(he[D]={filename:y,line:I,char:k}),l.push(he),f(1,he)):(l={},D!==null&&(l[D]={filename:y,line:I,char:k}),f(1,l)),O.isClosed&&_e();continue;case"array":a===1?ue():a===2?(ee=void 0,ee=[],l.push(ee),f(2,ee)):f(2,l=[]),O.isClosed&&we();continue;case"key":E=o(O),a!==1?P("unexpected <key>"):n!==null?P("too many <key>"):n=E;continue;case"string":Se(o(O));continue;case"real":de(parseFloat(o(O)));continue;case"integer":Ae(parseInt(o(O),10));continue;case"date":Ee(new Date(o(O)));continue;case"data":s(o(O));continue;case"true":o(O),t(!0);continue;case"false":o(O),t(!1);continue}if(!/^plist/.test(O.name))return P("unexpected opened tag "+O.name)}else{if(p(1),r("--")){c("-->");continue}c(">")}else p(1),c("?>")}return l}Object.defineProperty(_,"__esModule",{value:!0}),_.parse=_.parseWithLocation=void 0,_.parseWithLocation=function(B,y,D){return U(B,y,D)},_.parse=function(B){return U(B,null,null)}},652:function($,_,U){var B=this&&this.__awaiter||function(b,I,k,p){return new(k||(k=Promise))(function(w,i){function r(a){try{g(p.next(a))}catch(l){i(l)}}function c(a){try{g(p.throw(a))}catch(l){i(l)}}function g(a){var l;a.done?w(a.value):(l=a.value,l instanceof k?l:new k(function(u){u(l)})).then(r,c)}g((p=p.apply(b,I||[])).next())})},y=this&&this.__generator||function(b,I){var k,p,w,i,r={label:0,sent:function(){if(1&w[0])throw w[1];return w[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function c(g){return function(a){return function(l){if(k)throw new TypeError("Generator is already executing.");for(;r;)try{if(k=1,p&&(w=2&l[0]?p.return:l[0]?p.throw||((w=p.return)&&w.call(p),0):p.next)&&!(w=w.call(p,l[1])).done)return w;switch(p=0,w&&(l=[2&l[0],w.value]),l[0]){case 0:case 1:w=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,p=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(!((w=(w=r.trys).length>0&&w[w.length-1])||l[0]!==6&&l[0]!==2)){r=0;continue}if(l[0]===3&&(!w||l[1]>w[0]&&l[1]<w[3])){r.label=l[1];break}if(l[0]===6&&r.label<w[1]){r.label=w[1],w=l;break}if(w&&r.label<w[2]){r.label=w[2],r.ops.push(l);break}w[2]&&r.ops.pop(),r.trys.pop();continue}l=I.call(b,r)}catch(u){l=[6,u],p=0}finally{k=w=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([g,a])}}};Object.defineProperty(_,"__esModule",{value:!0}),_.SyncRegistry=void 0;var D=U(527),A=function(){function b(I,k){this._theme=I,this._grammars={},this._rawGrammars={},this._injectionGrammars={},this._onigLibPromise=k}return b.prototype.dispose=function(){for(var I in this._grammars)this._grammars.hasOwnProperty(I)&&this._grammars[I].dispose()},b.prototype.setTheme=function(I){var k=this;this._theme=I,Object.keys(this._grammars).forEach(function(p){k._grammars[p].onDidChangeTheme()})},b.prototype.getColorMap=function(){return this._theme.getColorMap()},b.prototype.addGrammar=function(I,k){this._rawGrammars[I.scopeName]=I,k&&(this._injectionGrammars[I.scopeName]=k)},b.prototype.lookup=function(I){return this._rawGrammars[I]},b.prototype.injections=function(I){return this._injectionGrammars[I]},b.prototype.getDefaults=function(){return this._theme.getDefaults()},b.prototype.themeMatch=function(I){return this._theme.match(I)},b.prototype.grammarForScopeName=function(I,k,p,w){return B(this,void 0,void 0,function(){var i,r,c,g,a;return y(this,function(l){switch(l.label){case 0:return this._grammars[I]?[3,2]:(i=this._rawGrammars[I])?(r=this._grammars,c=I,g=D.createGrammar,a=[I,i,k,p,w,this],[4,this._onigLibPromise]):[2,null];case 1:r[c]=g.apply(void 0,a.concat([l.sent()])),l.label=2;case 2:return[2,this._grammars[I]]}})})},b}();_.SyncRegistry=A},792:function($,_,U){var B,y=this&&this.__extends||(B=function(u,e){return(B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,f){n.__proto__=f}||function(n,f){for(var m in f)Object.prototype.hasOwnProperty.call(f,m)&&(n[m]=f[m])})(u,e)},function(u,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=u}B(u,e),u.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(_,"__esModule",{value:!0}),_.RuleFactory=_.BeginWhileRule=_.BeginEndRule=_.IncludeOnlyRule=_.MatchRule=_.RegExpSourceList=_.RegExpSource=_.CaptureRule=_.Rule=_.CompiledRule=void 0;var D=U(878),A=/\\(\d+)/,b=/\\(\d+)/g,I=function(){function u(e,n,f){this.debugRegExps=n,this.rules=f,this.scanner=e.createOnigScanner(n)}return u.prototype.dispose=function(){typeof this.scanner.dispose=="function"&&this.scanner.dispose()},u}();_.CompiledRule=I;var k=function(){function u(e,n,f,m){this.$location=e,this.id=n,this._name=f||null,this._nameIsCapturing=D.RegexSource.hasCaptures(this._name),this._contentName=m||null,this._contentNameIsCapturing=D.RegexSource.hasCaptures(this._contentName)}return Object.defineProperty(u.prototype,"debugName",{get:function(){var e=this.$location?D.basename(this.$location.filename)+":"+this.$location.line:"unknown";return this.constructor.name+"#"+this.id+" @ "+e},enumerable:!1,configurable:!0}),u.prototype.getName=function(e,n){return this._nameIsCapturing&&this._name!==null&&e!==null&&n!==null?D.RegexSource.replaceCaptures(this._name,e,n):this._name},u.prototype.getContentName=function(e,n){return this._contentNameIsCapturing&&this._contentName!==null?D.RegexSource.replaceCaptures(this._contentName,e,n):this._contentName},u}();_.Rule=k;var p=function(u){function e(n,f,m,P,E){var G=u.call(this,n,f,m,P)||this;return G.retokenizeCapturedWithRuleId=E,G}return y(e,u),e.prototype.dispose=function(){},e.prototype.collectPatternsRecursive=function(n,f,m){throw new Error("Not supported!")},e.prototype.compile=function(n,f){throw new Error("Not supported!")},e.prototype.compileAG=function(n,f,m,P){throw new Error("Not supported!")},e}(k);_.CaptureRule=p;var w=function(){function u(e,n,f){if(f===void 0&&(f=!0),f)if(e){for(var m=e.length,P=0,E=[],G=!1,q=0;q<m;q++)if(e.charAt(q)==="\\"&&q+1<m){var ee=e.charAt(q+1);ee==="z"?(E.push(e.substring(P,q)),E.push("$(?!\\n)(?<!\\n)"),P=q+2):ee!=="A"&&ee!=="G"||(G=!0),q++}this.hasAnchor=G,P===0?this.source=e:(E.push(e.substring(P,m)),this.source=E.join(""))}else this.hasAnchor=!1,this.source=e;else this.hasAnchor=!1,this.source=e;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=n,this.hasBackReferences=A.test(this.source)}return u.prototype.clone=function(){return new u(this.source,this.ruleId,!0)},u.prototype.setSource=function(e){this.source!==e&&(this.source=e,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))},u.prototype.resolveBackReferences=function(e,n){var f=n.map(function(m){return e.substring(m.start,m.end)});return b.lastIndex=0,this.source.replace(b,function(m,P){return(f[parseInt(P,10)]||"").replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")})},u.prototype._buildAnchorCache=function(){var e,n,f,m,P=[],E=[],G=[],q=[];for(e=0,n=this.source.length;e<n;e++)f=this.source.charAt(e),P[e]=f,E[e]=f,G[e]=f,q[e]=f,f==="\\"&&e+1<n&&((m=this.source.charAt(e+1))==="A"?(P[e+1]="￿",E[e+1]="￿",G[e+1]="A",q[e+1]="A"):m==="G"?(P[e+1]="￿",E[e+1]="G",G[e+1]="￿",q[e+1]="G"):(P[e+1]=m,E[e+1]=m,G[e+1]=m,q[e+1]=m),e++);return{A0_G0:P.join(""),A0_G1:E.join(""),A1_G0:G.join(""),A1_G1:q.join("")}},u.prototype.resolveAnchors=function(e,n){return this.hasAnchor&&this._anchorCache?e?n?this._anchorCache.A1_G1:this._anchorCache.A1_G0:n?this._anchorCache.A0_G1:this._anchorCache.A0_G0:this.source},u}();_.RegExpSource=w;var i=function(){function u(){this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}return u.prototype.dispose=function(){this._disposeCaches()},u.prototype._disposeCaches=function(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)},u.prototype.push=function(e){this._items.push(e),this._hasAnchors=this._hasAnchors||e.hasAnchor},u.prototype.unshift=function(e){this._items.unshift(e),this._hasAnchors=this._hasAnchors||e.hasAnchor},u.prototype.length=function(){return this._items.length},u.prototype.setSource=function(e,n){this._items[e].source!==n&&(this._disposeCaches(),this._items[e].setSource(n))},u.prototype.compile=function(e){if(!this._cached){var n=this._items.map(function(f){return f.source});this._cached=new I(e,n,this._items.map(function(f){return f.ruleId}))}return this._cached},u.prototype.compileAG=function(e,n,f){return this._hasAnchors?n?f?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(e,n,f)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(e,n,f)),this._anchorCache.A1_G0):f?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(e,n,f)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(e,n,f)),this._anchorCache.A0_G0):this.compile(e)},u.prototype._resolveAnchors=function(e,n,f){var m=this._items.map(function(P){return P.resolveAnchors(n,f)});return new I(e,m,this._items.map(function(P){return P.ruleId}))},u}();_.RegExpSourceList=i;var r=function(u){function e(n,f,m,P,E){var G=u.call(this,n,f,m,null)||this;return G._match=new w(P,G.id),G.captures=E,G._cachedCompiledPatterns=null,G}return y(e,u),e.prototype.dispose=function(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)},Object.defineProperty(e.prototype,"debugMatchRegExp",{get:function(){return""+this._match.source},enumerable:!1,configurable:!0}),e.prototype.collectPatternsRecursive=function(n,f,m){f.push(this._match)},e.prototype.compile=function(n,f){return this._getCachedCompiledPatterns(n).compile(n)},e.prototype.compileAG=function(n,f,m,P){return this._getCachedCompiledPatterns(n).compileAG(n,m,P)},e.prototype._getCachedCompiledPatterns=function(n){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new i,this.collectPatternsRecursive(n,this._cachedCompiledPatterns,!0)),this._cachedCompiledPatterns},e}(k);_.MatchRule=r;var c=function(u){function e(n,f,m,P,E){var G=u.call(this,n,f,m,P)||this;return G.patterns=E.patterns,G.hasMissingPatterns=E.hasMissingPatterns,G._cachedCompiledPatterns=null,G}return y(e,u),e.prototype.dispose=function(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)},e.prototype.collectPatternsRecursive=function(n,f,m){var P,E;for(P=0,E=this.patterns.length;P<E;P++)n.getRule(this.patterns[P]).collectPatternsRecursive(n,f,!1)},e.prototype.compile=function(n,f){return this._getCachedCompiledPatterns(n).compile(n)},e.prototype.compileAG=function(n,f,m,P){return this._getCachedCompiledPatterns(n).compileAG(n,m,P)},e.prototype._getCachedCompiledPatterns=function(n){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new i,this.collectPatternsRecursive(n,this._cachedCompiledPatterns,!0)),this._cachedCompiledPatterns},e}(k);_.IncludeOnlyRule=c;var g=function(u){function e(n,f,m,P,E,G,q,ee,he,re){var ue=u.call(this,n,f,m,P)||this;return ue._begin=new w(E,ue.id),ue.beginCaptures=G,ue._end=new w(q||"￿",-1),ue.endHasBackReferences=ue._end.hasBackReferences,ue.endCaptures=ee,ue.applyEndPatternLast=he||!1,ue.patterns=re.patterns,ue.hasMissingPatterns=re.hasMissingPatterns,ue._cachedCompiledPatterns=null,ue}return y(e,u),e.prototype.dispose=function(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)},Object.defineProperty(e.prototype,"debugBeginRegExp",{get:function(){return""+this._begin.source},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"debugEndRegExp",{get:function(){return""+this._end.source},enumerable:!1,configurable:!0}),e.prototype.getEndWithResolvedBackReferences=function(n,f){return this._end.resolveBackReferences(n,f)},e.prototype.collectPatternsRecursive=function(n,f,m){if(m){var P,E=void 0;for(E=0,P=this.patterns.length;E<P;E++)n.getRule(this.patterns[E]).collectPatternsRecursive(n,f,!1)}else f.push(this._begin)},e.prototype.compile=function(n,f){return this._getCachedCompiledPatterns(n,f).compile(n)},e.prototype.compileAG=function(n,f,m,P){return this._getCachedCompiledPatterns(n,f).compileAG(n,m,P)},e.prototype._getCachedCompiledPatterns=function(n,f){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new i,this.collectPatternsRecursive(n,this._cachedCompiledPatterns,!0),this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)),this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,f):this._cachedCompiledPatterns.setSource(0,f)),this._cachedCompiledPatterns},e}(k);_.BeginEndRule=g;var a=function(u){function e(n,f,m,P,E,G,q,ee,he){var re=u.call(this,n,f,m,P)||this;return re._begin=new w(E,re.id),re.beginCaptures=G,re.whileCaptures=ee,re._while=new w(q,-2),re.whileHasBackReferences=re._while.hasBackReferences,re.patterns=he.patterns,re.hasMissingPatterns=he.hasMissingPatterns,re._cachedCompiledPatterns=null,re._cachedCompiledWhilePatterns=null,re}return y(e,u),e.prototype.dispose=function(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)},Object.defineProperty(e.prototype,"debugBeginRegExp",{get:function(){return""+this._begin.source},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"debugWhileRegExp",{get:function(){return""+this._while.source},enumerable:!1,configurable:!0}),e.prototype.getWhileWithResolvedBackReferences=function(n,f){return this._while.resolveBackReferences(n,f)},e.prototype.collectPatternsRecursive=function(n,f,m){if(m){var P,E=void 0;for(E=0,P=this.patterns.length;E<P;E++)n.getRule(this.patterns[E]).collectPatternsRecursive(n,f,!1)}else f.push(this._begin)},e.prototype.compile=function(n,f){return this._getCachedCompiledPatterns(n).compile(n)},e.prototype.compileAG=function(n,f,m,P){return this._getCachedCompiledPatterns(n).compileAG(n,m,P)},e.prototype._getCachedCompiledPatterns=function(n){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new i,this.collectPatternsRecursive(n,this._cachedCompiledPatterns,!0)),this._cachedCompiledPatterns},e.prototype.compileWhile=function(n,f){return this._getCachedCompiledWhilePatterns(n,f).compile(n)},e.prototype.compileWhileAG=function(n,f,m,P){return this._getCachedCompiledWhilePatterns(n,f).compileAG(n,m,P)},e.prototype._getCachedCompiledWhilePatterns=function(n,f){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new i,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,f||"￿"),this._cachedCompiledWhilePatterns},e}(k);_.BeginWhileRule=a;var l=function(){function u(){}return u.createCaptureRule=function(e,n,f,m,P){return e.registerRule(function(E){return new p(n,E,f,m,P)})},u.getCompiledRuleId=function(e,n,f){return e.id||n.registerRule(function(m){if(e.id=m,e.match)return new r(e.$vscodeTextmateLocation,e.id,e.name,e.match,u._compileCaptures(e.captures,n,f));if(e.begin===void 0){e.repository&&(f=D.mergeObjects({},f,e.repository));var P=e.patterns;return P===void 0&&e.include&&(P=[{include:e.include}]),new c(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,u._compilePatterns(P,n,f))}return e.while?new a(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,u._compileCaptures(e.beginCaptures||e.captures,n,f),e.while,u._compileCaptures(e.whileCaptures||e.captures,n,f),u._compilePatterns(e.patterns,n,f)):new g(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,u._compileCaptures(e.beginCaptures||e.captures,n,f),e.end,u._compileCaptures(e.endCaptures||e.captures,n,f),e.applyEndPatternLast,u._compilePatterns(e.patterns,n,f))}),e.id},u._compileCaptures=function(e,n,f){var m=[];if(e){var P=0;for(var E in e)E!=="$vscodeTextmateLocation"&&(q=parseInt(E,10))>P&&(P=q);for(var G=0;G<=P;G++)m[G]=null;for(var E in e)if(E!=="$vscodeTextmateLocation"){var q=parseInt(E,10),ee=0;e[E].patterns&&(ee=u.getCompiledRuleId(e[E],n,f)),m[q]=u.createCaptureRule(n,e[E].$vscodeTextmateLocation,e[E].name,e[E].contentName,ee)}}return m},u._compilePatterns=function(e,n,f){var m=[];if(e)for(var P=0,E=e.length;P<E;P++){var G=e[P],q=-1;if(G.include)if(G.include.charAt(0)==="#"){var ee=f[G.include.substr(1)];ee&&(q=u.getCompiledRuleId(ee,n,f))}else if(G.include==="$base"||G.include==="$self")q=u.getCompiledRuleId(f[G.include],n,f);else{var he=null,re=null,ue=G.include.indexOf("#");ue>=0?(he=G.include.substring(0,ue),re=G.include.substring(ue+1)):he=G.include;var _e=n.getExternalGrammar(he,f);if(_e)if(re){var we=_e.repository[re];we&&(q=u.getCompiledRuleId(we,n,_e.repository))}else q=u.getCompiledRuleId(_e.repository.$self,n,_e.repository)}else q=u.getCompiledRuleId(G,n,f);if(q!==-1){var Se=n.getRule(q),de=!1;if((Se instanceof c||Se instanceof g||Se instanceof a)&&Se.hasMissingPatterns&&Se.patterns.length===0&&(de=!0),de)continue;m.push(q)}}return{patterns:m,hasMissingPatterns:(e?e.length:0)!==m.length}},u}();_.RuleFactory=l},583:($,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ThemeTrieElement=_.ThemeTrieElementRule=_.strArrCmp=_.strcmp=_.Theme=_.ColorMap=_.parseTheme=_.ParsedThemeRule=void 0;var U=function(i,r,c,g,a,l){this.scope=i,this.parentScopes=r,this.index=c,this.fontStyle=g,this.foreground=a,this.background=l};function B(i){return!!(/^#[0-9a-f]{6}$/i.test(i)||/^#[0-9a-f]{8}$/i.test(i)||/^#[0-9a-f]{3}$/i.test(i)||/^#[0-9a-f]{4}$/i.test(i))}function y(i){if(!i)return[];if(!i.settings||!Array.isArray(i.settings))return[];for(var r=i.settings,c=[],g=0,a=0,l=r.length;a<l;a++){var u=r[a];if(u.settings){var e=void 0;e=typeof u.scope=="string"?u.scope.replace(/^[,]+/,"").replace(/[,]+$/,"").split(","):Array.isArray(u.scope)?u.scope:[""];var n=-1;if(typeof u.settings.fontStyle=="string"){n=0;for(var f=0,m=(G=u.settings.fontStyle.split(" ")).length;f<m;f++)switch(G[f]){case"italic":n|=1;break;case"bold":n|=2;break;case"underline":n|=4;break;case"strikethrough":n|=8}}var P=null;typeof u.settings.foreground=="string"&&B(u.settings.foreground)&&(P=u.settings.foreground);var E=null;for(typeof u.settings.background=="string"&&B(u.settings.background)&&(E=u.settings.background),f=0,m=e.length;f<m;f++){var G,q=(G=e[f].trim().split(" "))[G.length-1],ee=null;G.length>1&&(ee=G.slice(0,G.length-1)).reverse(),c[g++]=new U(q,ee,a,n,P,E)}}}return c}function D(i,r){i.sort(function(E,G){var q=I(E.scope,G.scope);return q!==0||(q=k(E.parentScopes,G.parentScopes))!==0?q:E.index-G.index});for(var c=0,g="#000000",a="#ffffff";i.length>=1&&i[0].scope==="";){var l=i.shift();l.fontStyle!==-1&&(c=l.fontStyle),l.foreground!==null&&(g=l.foreground),l.background!==null&&(a=l.background)}for(var u=new A(r),e=new p(0,null,c,u.getId(g),u.getId(a)),n=new w(new p(0,null,-1,0,0),[]),f=0,m=i.length;f<m;f++){var P=i[f];n.insert(0,P.scope,P.parentScopes,P.fontStyle,u.getId(P.foreground),u.getId(P.background))}return new b(u,e,n)}_.ParsedThemeRule=U,_.parseTheme=y;var A=function(){function i(r){if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(r)){this._isFrozen=!0;for(var c=0,g=r.length;c<g;c++)this._color2id[r[c]]=c,this._id2color[c]=r[c]}else this._isFrozen=!1}return i.prototype.getId=function(r){if(r===null)return 0;r=r.toUpperCase();var c=this._color2id[r];if(c)return c;if(this._isFrozen)throw new Error("Missing color in color map - "+r);return c=++this._lastColorId,this._color2id[r]=c,this._id2color[c]=r,c},i.prototype.getColorMap=function(){return this._id2color.slice(0)},i}();_.ColorMap=A;var b=function(){function i(r,c,g){this._colorMap=r,this._root=g,this._defaults=c,this._cache={}}return i.createFromRawTheme=function(r,c){return this.createFromParsedTheme(y(r),c)},i.createFromParsedTheme=function(r,c){return D(r,c)},i.prototype.getColorMap=function(){return this._colorMap.getColorMap()},i.prototype.getDefaults=function(){return this._defaults},i.prototype.match=function(r){return this._cache.hasOwnProperty(r)||(this._cache[r]=this._root.match(r)),this._cache[r]},i}();function I(i,r){return i<r?-1:i>r?1:0}function k(i,r){if(i===null&&r===null)return 0;if(!i)return-1;if(!r)return 1;var c=i.length,g=r.length;if(c===g){for(var a=0;a<c;a++){var l=I(i[a],r[a]);if(l!==0)return l}return 0}return c-g}_.Theme=b,_.strcmp=I,_.strArrCmp=k;var p=function(){function i(r,c,g,a,l){this.scopeDepth=r,this.parentScopes=c,this.fontStyle=g,this.foreground=a,this.background=l}return i.prototype.clone=function(){return new i(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)},i.cloneArr=function(r){for(var c=[],g=0,a=r.length;g<a;g++)c[g]=r[g].clone();return c},i.prototype.acceptOverwrite=function(r,c,g,a){this.scopeDepth>r?console.log("how did this happen?"):this.scopeDepth=r,c!==-1&&(this.fontStyle=c),g!==0&&(this.foreground=g),a!==0&&(this.background=a)},i}();_.ThemeTrieElementRule=p;var w=function(){function i(r,c,g){c===void 0&&(c=[]),g===void 0&&(g={}),this._mainRule=r,this._rulesWithParentScopes=c,this._children=g}return i._sortBySpecificity=function(r){return r.length===1||r.sort(this._cmpBySpecificity),r},i._cmpBySpecificity=function(r,c){if(r.scopeDepth===c.scopeDepth){var g=r.parentScopes,a=c.parentScopes,l=g===null?0:g.length,u=a===null?0:a.length;if(l===u)for(var e=0;e<l;e++){var n=g[e].length,f=a[e].length;if(n!==f)return f-n}return u-l}return c.scopeDepth-r.scopeDepth},i.prototype.match=function(r){if(r==="")return i._sortBySpecificity([].concat(this._mainRule).concat(this._rulesWithParentScopes));var c,g,a=r.indexOf(".");return a===-1?(c=r,g=""):(c=r.substring(0,a),g=r.substring(a+1)),this._children.hasOwnProperty(c)?this._children[c].match(g):i._sortBySpecificity([].concat(this._mainRule).concat(this._rulesWithParentScopes))},i.prototype.insert=function(r,c,g,a,l,u){if(c!==""){var e,n,f,m=c.indexOf(".");m===-1?(e=c,n=""):(e=c.substring(0,m),n=c.substring(m+1)),this._children.hasOwnProperty(e)?f=this._children[e]:(f=new i(this._mainRule.clone(),p.cloneArr(this._rulesWithParentScopes)),this._children[e]=f),f.insert(r+1,n,g,a,l,u)}else this._doInsertHere(r,g,a,l,u)},i.prototype._doInsertHere=function(r,c,g,a,l){if(c!==null){for(var u=0,e=this._rulesWithParentScopes.length;u<e;u++){var n=this._rulesWithParentScopes[u];if(k(n.parentScopes,c)===0)return void n.acceptOverwrite(r,g,a,l)}g===-1&&(g=this._mainRule.fontStyle),a===0&&(a=this._mainRule.foreground),l===0&&(l=this._mainRule.background),this._rulesWithParentScopes.push(new p(r,c,g,a,l))}else this._mainRule.acceptOverwrite(r,g,a,l)},i}();_.ThemeTrieElement=w},42:($,_)=>{Object.defineProperty(_,"__esModule",{value:!0})},878:($,_)=>{function U(D){return Array.isArray(D)?function(A){for(var b=[],I=0,k=A.length;I<k;I++)b[I]=U(A[I]);return b}(D):typeof D=="object"?function(A){var b={};for(var I in A)b[I]=U(A[I]);return b}(D):D}Object.defineProperty(_,"__esModule",{value:!0}),_.RegexSource=_.basename=_.mergeObjects=_.clone=void 0,_.clone=function(D){return U(D)},_.mergeObjects=function(D){for(var A=[],b=1;b<arguments.length;b++)A[b-1]=arguments[b];return A.forEach(function(I){for(var k in I)D[k]=I[k]}),D},_.basename=function D(A){var b=~A.lastIndexOf("/")||~A.lastIndexOf("\\");return b===0?A:~b==A.length-1?D(A.substring(0,A.length-1)):A.substr(1+~b)};var B=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g,y=function(){function D(){}return D.hasCaptures=function(A){return A!==null&&(B.lastIndex=0,B.test(A))},D.replaceCaptures=function(A,b,I){return A.replace(B,function(k,p,w,i){var r=I[parseInt(p||w,10)];if(!r)return k;for(var c=b.substring(r.start,r.end);c[0]===".";)c=c.substring(1);switch(i){case"downcase":return c.toLowerCase();case"upcase":return c.toUpperCase();default:return c}})},D}();_.RegexSource=y}},Q={};return function $(_){var U=Q[_];if(U!==void 0)return U.exports;var B=Q[_]={exports:{}};return V[_].call(B.exports,B,B.exports,$),B.exports}(787)})()})}(qe)),qe.exports}var ze=lt();class ht{constructor(W){this.config=W;const{grammars:Y,fetchGrammar:V,theme:Q,onigLib:$,monaco:_}=W;this.monaco=_,this.registry=new ze.Registry({onigLib:$,async loadGrammar(U){if(Y[U]==null)return null;const{type:y,grammar:D}=await V(U);return ze.parseRawGrammar(D,`grammar.${y}`)},getInjections(U){const B=Y[U];return B?B.injections:void 0},theme:Q}),this.tokensProviderCache=new pt(this.registry)}monaco;registry;tokensProviderCache;injectCSS(){const Y=this.registry.getColorMap().map(et.Format.CSS.parseHex);tt.setColorMap(Y);const V=nt(Y),Q=ft();Q.innerHTML=V}setTheme(W){this.registry.setTheme(W)}async fetchLanguageInfo(W){const[Y,V]=await Promise.all([this.getTokensProviderForLanguage(W),this.config.fetchConfiguration(W)]);return{tokensProvider:Y,configuration:V}}getTokensProviderForLanguage(W){const Y=this.getScopeNameForLanguage(W);if(Y==null)return Promise.resolve(null);const V=this.monaco.languages.getEncodedLanguageId(W);return this.tokensProviderCache.createEncodedTokensProvider(Y,V)}getScopeNameForLanguage(W){for(const[Y,V]of Object.entries(this.config.grammars))if(V.language===W)return Y;return null}}class Be{constructor(W){this.stateStack=W}clone(){return new Be(this.stateStack)}equals(W){return W instanceof Be&&(W===this||W.stateStack===this.stateStack)}}class pt{constructor(W){this.registry=W}scopeNameToGrammar=new Map;async createEncodedTokensProvider(W,Y){const V=await this.getGrammar(W,Y);return{getInitialState(){return new Be(ze.INITIAL)},tokenizeEncoded(Q,$){const _=V.tokenizeLine2(Q,$.stateStack);return{endState:new Be(_.ruleStack),tokens:_.tokens}},tokenize(Q,$){const _=V.tokenizeLine(Q,$.stateStack);return{endState:new Be(_.ruleStack),tokens:_.tokens.map(U=>({startIndex:U.startIndex,scopes:U.scopes.reverse().join(" ")}))}}}}getGrammar(W,Y){const V=this.scopeNameToGrammar.get(W);if(V!=null)return V;const Q={},$=this.registry.loadGrammarWithConfiguration(W,Y,Q).then(_=>{if(_)return _;throw Error(`failed to load grammar for ${W}`)});return this.scopeNameToGrammar.set(W,$),$}}function ft(){const le=document.querySelector("style.textmate-colors")||document.createElement("style");le.classList.contains("textmate-colors")||le.classList.add("textmate-colors");const W=document.getElementsByClassName("monaco-colors")[0];if(W)W.parentElement?.insertBefore(le,W.nextSibling);else{let{head:Y}=document;Y==null&&(Y=document.getElementsByTagName("head")[0]),Y?.appendChild(le)}return le}function dt(le,W,Y){for(const V of le){const{id:Q}=V;Y.languages.register(V),Y.languages.onLanguage(Q,async()=>{const{tokensProvider:$,configuration:_}=await W(Q);$!=null&&Y.languages.setTokensProvider(Q,$),_!=null&&Y.languages.setLanguageConfiguration(Q,_)})}}class mt{constructor(W,Y,V){this.languages=W,this.grammars=Y,this.onigurumPath=V}provider;async loadVSCodeOnigurumWASM(){const W=await fetch(this.onigurumPath);return W.headers.get("content-type")==="application/wasm"?W:await W.arrayBuffer()}fetchGrammar=async W=>{const{path:Y}=this.grammars[W],V=`/grammars/${Y}`,$=await(await fetch(V)).text();return{type:Y.endsWith(".json")?"json":"plist",grammar:$}};fetchConfiguration=async W=>{const Y=`/configurations/${W}.json`,Q=await(await fetch(Y)).text();return st(Q)};async register(W,Y){const V=await this.loadVSCodeOnigurumWASM();await He.loadWASM(V);const Q=Promise.resolve({createOnigScanner:He.createOnigScanner,createOnigString:He.createOnigString});this.provider=new ht({grammars:this.grammars,fetchGrammar:this.fetchGrammar,configurations:this.languages.map($=>$.id),fetchConfiguration:this.fetchConfiguration,theme:Y,onigLib:Q,monaco:W}),dt(this.languages,$=>this.provider.fetchLanguageInfo($),W)}setTheme(W){this.provider?.setTheme(W)}injectCSS(){this.provider?.injectCSS()}}export{mt as default};
//# sourceMappingURL=textmate-BMMU-S91.js.map
