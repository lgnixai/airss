{"version":3,"file":"index-CM5ziN1m.js","sources":["../../../esm/client/hooks/useEditorPos.js","../../../esm/client/hooks/useSettings.js","../../../esm/client/components/welcome/style__variables.js","../../../esm/client/components/welcome/index.js","../../../esm/client/slots/editor/style__variables.js","../../../esm/client/slots/editor/index.js"],"sourcesContent":["import { useEffect, useMemo, useRef } from \"react\";\nimport useMeasure from \"react-use/esm/useMeasure\";\nfunction useEditorPos(pos, len, split = \"vertical\") {\n  const [ref, rect] = useMeasure();\n  const literal = split === \"vertical\" ? \"width\" : \"height\";\n  const fn = useRef(() => {\n  });\n  useEffect(() => {\n    if (sizes.length && sizes.length === len) {\n      const total = sizes.reduce((acc, cur) => acc + cur);\n      if (total !== rect[literal]) {\n        const diff = rect[literal] - total;\n        const per = diff / len;\n        fn.current(sizes.map((size) => size + per));\n      }\n    }\n  }, [rect[literal]]);\n  const sizes = useMemo(() => {\n    if (pos.length && pos.length === len)\n      return pos;\n    return new Array(len).fill(rect[literal] / len);\n  }, [pos, len]);\n  const useResize = (cb) => {\n    fn.current = cb;\n  };\n  return [ref, sizes, useResize];\n}\nexport {\n  useEditorPos as default\n};\n","import { normalizeFlattedObject } from \"../../utils\";\nimport useConnector from \"./useConnector\";\nfunction useSettings() {\n  const settings = useConnector(\"settings\");\n  return normalizeFlattedObject(settings.data);\n}\nexport {\n  useSettings as default\n};\n","export default {\n  container: \"mo-welcome\",\n  logo: \"mo-welcome__logo\",\n  title: \"mo-welcome__title\",\n}","import { jsx, jsxs } from \"react/jsx-runtime\";\nimport \"./index.css\";\nimport variables from \"./style__variables.js\";\nfunction Logo({ className }) {\n  return /* @__PURE__ */ jsx(\"span\", { style: { fontSize: 0 }, children: /* @__PURE__ */ jsx(\"svg\", { width: \"1em\", height: \"1em\", viewBox: \"0 0 120 120\", className, children: /* @__PURE__ */ jsx(\"g\", { fill: \"none\", fillRule: \"evenodd\", stroke: \"none\", strokeWidth: \"1\", opacity: \"0.48\", children: /* @__PURE__ */ jsx(\"g\", { fill: \"#A2A2A2\", transform: \"translate(-660 -152)\", children: /* @__PURE__ */ jsx(\"g\", { transform: \"translate(660 152)\", children: /* @__PURE__ */ jsx(\"path\", { d: \"M59.3 96.335c4.87 0 8.817 3.954 8.817 8.832S64.169 114 59.3 114c-4.87 0-8.818-3.955-8.818-8.833s3.948-8.832 8.818-8.832zm-22.444-6.826a3.21 3.21 0 013.206 3.212 3.21 3.21 0 01-3.206 3.212 3.21 3.21 0 01-3.206-3.212 3.21 3.21 0 013.206-3.212zm44.887 0a3.21 3.21 0 013.206 3.212 3.21 3.21 0 01-3.206 3.212 3.21 3.21 0 01-3.206-3.212 3.21 3.21 0 013.206-3.212zM59.3 72.245c4.87 0 8.817 3.955 8.817 8.833s-3.948 8.833-8.817 8.833c-4.87 0-8.818-3.955-8.818-8.833s3.948-8.833 8.818-8.833zm-42.483 0c4.87 0 8.817 3.955 8.817 8.833s-3.947 8.833-8.817 8.833S8 85.956 8 81.078s3.948-8.833 8.817-8.833zm85.366 0c4.87 0 8.817 3.955 8.817 8.833s-3.948 8.833-8.817 8.833c-4.87 0-8.817-3.955-8.817-8.833s3.947-8.833 8.817-8.833zm-65.327-6.022a3.21 3.21 0 013.206 3.212 3.21 3.21 0 01-3.206 3.212 3.21 3.21 0 01-3.206-3.212 3.21 3.21 0 013.206-3.212zm44.887 0a3.21 3.21 0 013.206 3.212 3.21 3.21 0 01-3.206 3.212 3.21 3.21 0 01-3.206-3.212 3.21 3.21 0 013.206-3.212zM59.3 48.156c4.87 0 8.817 3.955 8.817 8.833s-3.948 8.833-8.817 8.833c-4.87 0-8.818-3.955-8.818-8.833s3.948-8.833 8.818-8.833zm-42.483 0c4.87 0 8.817 3.955 8.817 8.833s-3.947 8.833-8.817 8.833S8 61.867 8 56.989s3.948-8.833 8.817-8.833zm85.366 0c4.87 0 8.817 3.955 8.817 8.833s-3.948 8.833-8.817 8.833c-4.87 0-8.817-3.955-8.817-8.833s3.947-8.833 8.817-8.833zM80.942 35.31c4.87 0 8.817 3.954 8.817 8.832s-3.948 8.833-8.817 8.833c-4.87 0-8.817-3.955-8.817-8.833s3.947-8.832 8.817-8.832zm-43.284 0c4.87 0 8.817 3.954 8.817 8.832s-3.948 8.833-8.817 8.833c-4.87 0-8.818-3.955-8.818-8.833s3.948-8.832 8.818-8.832zm64.525-11.242c4.87 0 8.817 3.954 8.817 8.833 0 4.878-3.948 8.832-8.817 8.832-4.87 0-8.817-3.954-8.817-8.832 0-4.879 3.947-8.833 8.817-8.833zm-85.366 0c4.87 0 8.817 3.954 8.817 8.833 0 4.878-3.947 8.832-8.817 8.832S8 37.778 8 32.9c0-4.879 3.948-8.833 8.817-8.833zm42.483 5.62a3.21 3.21 0 013.206 3.213 3.21 3.21 0 01-3.206 3.212 3.21 3.21 0 01-3.207-3.212 3.21 3.21 0 013.207-3.212zm-19.238-13.65a3.21 3.21 0 013.206 3.212 3.21 3.21 0 01-3.206 3.212 3.21 3.21 0 01-3.206-3.212 3.21 3.21 0 013.206-3.212zm38.475 0a3.21 3.21 0 013.206 3.212 3.21 3.21 0 01-3.206 3.212 3.21 3.21 0 01-3.206-3.212 3.21 3.21 0 013.206-3.212zM59.3 6a3.21 3.21 0 013.206 3.212 3.21 3.21 0 01-3.206 3.212 3.21 3.21 0 01-3.207-3.212A3.21 3.21 0 0159.3 6z\" }) }) }) }) }) });\n}\nfunction Welcome() {\n  return /* @__PURE__ */ jsxs(\"div\", { className: variables.container, children: [\n    /* @__PURE__ */ jsx(Logo, { className: variables.logo }),\n    /* @__PURE__ */ jsx(\"h1\", { className: variables.title, children: \"Molecule\" })\n  ] });\n}\nexport {\n  Welcome as default\n};\n","export default {\n  container: \"mo-editor\",\n}","import { jsx, jsxs } from \"react/jsx-runtime\";\nimport { useMemo } from \"react\";\nimport { DndProvider } from \"react-dnd\";\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\nimport { Progress, Split, Welcome } from \"../../components\";\nimport { useConnector, useEditorPos, useSettings } from \"../../hooks\";\nimport Group from \"../group\";\nimport \"./index.css\";\nimport variables from \"./style__variables.js\";\nfunction Editor({\n  onMount,\n  onModelMount,\n  onDiffEditorMount,\n  onDiffEditorModelMount,\n  onSelectTab,\n  onPaneSizeChange,\n  onContextMenu,\n  onToolbarClick,\n  onCloseTab,\n  onDragStart,\n  onDragEnd,\n  onDragEnter,\n  onDragLeave,\n  onDragOver,\n  onDrop\n}) {\n  const editor = useConnector(\"editor\");\n  const layout = useConnector(\"layout\");\n  const settings = useSettings();\n  const { groups = [], current, entry = /* @__PURE__ */ jsx(Welcome, {}), options: editorOptions, toolbar, loading } = editor;\n  const options = useMemo(\n    () => ({\n      ...settings.editor,\n      ...editorOptions\n    }),\n    [editorOptions, settings.editor]\n  );\n  const [ref, sizes, useRectResize] = useEditorPos(layout.groupSplitPos, groups.length, layout.editorDirection);\n  useRectResize((data) => onPaneSizeChange?.(data));\n  const renderGroups = () => {\n    return /* @__PURE__ */ jsx(DndProvider, { backend: HTML5Backend, context: window, children: /* @__PURE__ */ jsx(Split, { ref, sizes, split: layout.editorDirection, onChange: onPaneSizeChange, children: groups.map((g) => /* @__PURE__ */ jsx(Split.Pane, { minSize: 220, children: /* @__PURE__ */ jsx(\n      Group,\n      {\n        group: g,\n        toolbar,\n        options,\n        onMount,\n        onModelMount,\n        onDiffEditorMount,\n        onDiffEditorModelMount,\n        onSelectTab,\n        onContextMenu,\n        onToolbarClick,\n        onCloseTab,\n        onDragStart,\n        onDragEnd,\n        onDragEnter,\n        onDragLeave,\n        onDragOver,\n        onDrop\n      }\n    ) }, g.id)) }) });\n  };\n  return /* @__PURE__ */ jsxs(\"div\", { className: variables.container, children: [\n    /* @__PURE__ */ jsx(Progress, { active: loading }),\n    current ? renderGroups() : entry\n  ] });\n}\nexport {\n  Editor as default\n};\n"],"names":["useEditorPos","pos","len","split","ref","rect","useMeasure","literal","fn","useRef","useEffect","sizes","total","acc","cur","per","size","useMemo","cb","useSettings","settings","useConnector","normalizeFlattedObject","variables$1","Logo","className","jsx","Welcome","jsxs","variables","Editor","onMount","onModelMount","onDiffEditorMount","onDiffEditorModelMount","onSelectTab","onPaneSizeChange","onContextMenu","onToolbarClick","onCloseTab","onDragStart","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop","editor","layout","groups","current","entry","editorOptions","toolbar","loading","options","useRectResize","data","renderGroups","DndProvider","HTML5Backend","Split","g","Group","Progress"],"mappings":"wLAEA,SAASA,EAAaC,EAAKC,EAAKC,EAAQ,WAAY,CAClD,KAAM,CAACC,EAAKC,CAAI,EAAIC,EAAU,EACxBC,EAAUJ,IAAU,WAAa,QAAU,SAC3CK,EAAKC,EAAAA,OAAO,IAAM,CACxB,CAAC,EACDC,EAAAA,UAAU,IAAM,CACd,GAAIC,EAAM,QAAUA,EAAM,SAAWT,EAAK,CACxC,MAAMU,EAAQD,EAAM,OAAO,CAACE,EAAKC,IAAQD,EAAMC,CAAG,EAClD,GAAIF,IAAUP,EAAKE,CAAO,EAAG,CAE3B,MAAMQ,GADOV,EAAKE,CAAO,EAAIK,GACVV,EACnBM,EAAG,QAAQG,EAAM,IAAKK,GAASA,EAAOD,CAAG,CAAC,CAC5C,CACF,CACF,EAAG,CAACV,EAAKE,CAAO,CAAC,CAAC,EAClB,MAAMI,EAAQM,EAAAA,QAAQ,IAChBhB,EAAI,QAAUA,EAAI,SAAWC,EACxBD,EACF,IAAI,MAAMC,CAAG,EAAE,KAAKG,EAAKE,CAAO,EAAIL,CAAG,EAC7C,CAACD,EAAKC,CAAG,CAAC,EAIb,MAAO,CAACE,EAAKO,EAHMO,GAAO,CACxBV,EAAG,QAAUU,CACf,CAC6B,CAC/B,CCxBA,SAASC,GAAc,CACrB,MAAMC,EAAWC,EAAa,UAAU,EACxC,OAAOC,EAAuBF,EAAS,IAAI,CAC7C,CCLA,MAAAG,EAAe,CACb,UAAW,aACX,KAAM,mBACN,MAAO,mBACT,ECDA,SAASC,EAAK,CAAE,UAAAC,GAAa,CAC3B,OAAuBC,EAAAA,IAAI,OAAQ,CAAE,MAAO,CAAE,SAAU,GAAK,SAA0BA,EAAAA,IAAI,MAAO,CAAE,MAAO,MAAO,OAAQ,MAAO,QAAS,cAAe,UAAAD,EAAW,SAA0BC,EAAAA,IAAI,IAAK,CAAE,KAAM,OAAQ,SAAU,UAAW,OAAQ,OAAQ,YAAa,IAAK,QAAS,OAAQ,SAA0BA,EAAAA,IAAI,IAAK,CAAE,KAAM,UAAW,UAAW,uBAAwB,SAA0BA,EAAAA,IAAI,IAAK,CAAE,UAAW,qBAAsB,SAA0BA,EAAAA,IAAI,OAAQ,CAAE,EAAG,6uEAA6uE,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CACzuF,CACA,SAASC,GAAU,CACjB,OAAuBC,EAAAA,KAAK,MAAO,CAAE,UAAWC,EAAU,UAAW,SAAU,CAC7DH,EAAAA,IAAIF,EAAM,CAAE,UAAWK,EAAU,IAAI,CAAE,EACvCH,EAAAA,IAAI,KAAM,CAAE,UAAWG,EAAU,MAAO,SAAU,UAAU,CAAE,CAClF,EAAK,CACL,CCXA,MAAAA,EAAe,CACb,UAAW,WACb,ECOA,SAASC,EAAO,CACd,QAAAC,EACA,aAAAC,EACA,kBAAAC,EACA,uBAAAC,EACA,YAAAC,EACA,iBAAAC,EACA,cAAAC,EACA,eAAAC,EACA,WAAAC,EACA,YAAAC,EACA,UAAAC,EACA,YAAAC,EACA,YAAAC,EACA,WAAAC,EACA,OAAAC,CACF,EAAG,CACD,MAAMC,EAASzB,EAAa,QAAQ,EAC9B0B,EAAS1B,EAAa,QAAQ,EAC9BD,EAAWD,EAAW,EACtB,CAAE,OAAA6B,EAAS,CAAA,EAAI,QAAAC,EAAS,MAAAC,EAAwBxB,EAAAA,IAAIC,EAAS,CAAA,CAAE,EAAG,QAASwB,EAAe,QAAAC,EAAS,QAAAC,CAAO,EAAKP,EAC/GQ,EAAUrC,EAAAA,QACd,KAAO,CACL,GAAGG,EAAS,OACZ,GAAG+B,CACT,GACI,CAACA,EAAe/B,EAAS,MAAM,CACnC,EACQ,CAAChB,EAAKO,EAAO4C,CAAa,EAAIvD,EAAa+C,EAAO,cAAeC,EAAO,OAAQD,EAAO,eAAe,EAC5GQ,EAAeC,GAASpB,IAAmBoB,CAAI,CAAC,EAChD,MAAMC,EAAe,IACI/B,EAAAA,IAAIgC,EAAa,CAAE,QAASC,EAAc,QAAS,OAAQ,SAA0BjC,EAAAA,IAAIkC,EAAO,CAAE,IAAAxD,EAAK,MAAAO,EAAO,MAAOoC,EAAO,gBAAiB,SAAUX,EAAkB,SAAUY,EAAO,IAAKa,GAAsBnC,EAAAA,IAAIkC,EAAM,KAAM,CAAE,QAAS,IAAK,SAA0BlC,EAAAA,IACpSoC,EACA,CACE,MAAOD,EACP,QAAAT,EACA,QAAAE,EACA,QAAAvB,EACA,aAAAC,EACA,kBAAAC,EACA,uBAAAC,EACA,YAAAC,EACA,cAAAE,EACA,eAAAC,EACA,WAAAC,EACA,YAAAC,EACA,UAAAC,EACA,YAAAC,EACA,YAAAC,EACA,WAAAC,EACA,OAAAC,CACR,CACA,CAAK,EAAIgB,EAAE,EAAE,CAAC,CAAC,CAAE,CAAC,CAAE,EAElB,OAAuBjC,EAAAA,KAAK,MAAO,CAAE,UAAWC,EAAU,UAAW,SAAU,CAC7DH,EAAAA,IAAIqC,EAAU,CAAE,OAAQV,CAAO,CAAE,EACjDJ,EAAUQ,EAAY,EAAKP,CAC/B,EAAK,CACL"}