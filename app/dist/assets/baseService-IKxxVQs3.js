import{aa as w,ab as l,ac as I,ad as O,ae as T,af as x,ag as d,ah as _,ai as M,aj as D,ak as F,al as L,am as R,an as P,ao as v,ap as G,aq as N}from"./index-Cz3doEcl.js";function q(e,t){for(var a=-1,n=e==null?0:e.length;++a<n&&t(e[a],a,e)!==!1;);return e}var W=Object.prototype,K=W.hasOwnProperty;function V(e){var t=e.length,a=new e.constructor(t);return t&&typeof e[0]=="string"&&K.call(e,"index")&&(a.index=e.index,a.input=e.input),a}function Y(e,t){var a=w(e.buffer);return new e.constructor(a,e.byteOffset,e.byteLength)}var H=/\w*$/;function J(e){var t=new e.constructor(e.source,H.exec(e));return t.lastIndex=e.lastIndex,t}var A=l?l.prototype:void 0,$=A?A.valueOf:void 0;function Q(e){return $?Object($.call(e)):{}}var X="[object Boolean]",Z="[object Date]",k="[object Map]",z="[object Number]",ee="[object RegExp]",te="[object Set]",re="[object String]",ae="[object Symbol]",ne="[object ArrayBuffer]",oe="[object DataView]",se="[object Float32Array]",ie="[object Float64Array]",ce="[object Int8Array]",fe="[object Int16Array]",be="[object Int32Array]",ge="[object Uint8Array]",de="[object Uint8ClampedArray]",Te="[object Uint16Array]",ue="[object Uint32Array]";function pe(e,t,a){var n=e.constructor;switch(t){case ne:return w(e);case X:case Z:return new n(+e);case oe:return Y(e);case se:case ie:case ce:case fe:case be:case ge:case de:case Te:case ue:return I(e,a);case k:return new n;case z:case re:return new n(e);case ee:return J(e);case te:return new n;case ae:return Q(e)}}var je="[object Map]";function he(e){return O(e)&&T(e)==je}var S=d&&d.isMap,ye=S?x(S):he,le="[object Set]";function Ae(e){return O(e)&&T(e)==le}var m=d&&d.isSet,$e=m?x(m):Ae,Se=1,E="[object Arguments]",me="[object Array]",we="[object Boolean]",Oe="[object Date]",xe="[object Error]",B="[object Function]",Ee="[object GeneratorFunction]",Be="[object Map]",Ue="[object Number]",U="[object Object]",Ce="[object RegExp]",Ie="[object Set]",_e="[object String]",Me="[object Symbol]",De="[object WeakMap]",Fe="[object ArrayBuffer]",Le="[object DataView]",Re="[object Float32Array]",Pe="[object Float64Array]",ve="[object Int8Array]",Ge="[object Int16Array]",Ne="[object Int32Array]",qe="[object Uint8Array]",We="[object Uint8ClampedArray]",Ke="[object Uint16Array]",Ve="[object Uint32Array]",r={};r[E]=r[me]=r[Fe]=r[Le]=r[we]=r[Oe]=r[Re]=r[Pe]=r[ve]=r[Ge]=r[Ne]=r[Be]=r[Ue]=r[U]=r[Ce]=r[Ie]=r[_e]=r[Me]=r[qe]=r[We]=r[Ke]=r[Ve]=!0;r[xe]=r[B]=r[De]=!1;function g(e,t,a,n,i,o){var s,u=t&Se;if(a&&(s=i?a(e,n,i,o):a(e)),s!==void 0)return s;if(!_(e))return e;var p=P(e);if(p)s=V(e);else{var b=T(e),j=b==B||b==Ee;if(M(e))return D(e,u);if(b==U||b==E||j&&!i)s=j?{}:F(e);else{if(!r[b])return i?e:{};s=pe(e,b,u)}}o||(o=new L);var h=o.get(e);if(h)return h;o.set(e,s),$e(e)?e.forEach(function(c){s.add(g(c,t,a,c,e,o))}):ye(e)&&e.forEach(function(c,f){s.set(f,g(c,t,a,f,e,o))});var C=R,y=p?void 0:C(e);return q(y||e,function(c,f){y&&(f=c,c=e[f]),v(s,f,g(c,t,a,f,e,o))}),s}var Ye=1,He=4;function Je(e,t){return t=typeof t=="function"?t:void 0,g(e,Ye|He,t)}class Xe extends G{constructor(t){super(),this.name=t}dispatch(t,a){const n={...this.state},i=N(n,t);i!==n&&(this.render(i),this.state=i,a?.())}setState(t,a){let n=this.state;typeof t=="function"?n={...this.state,...t(this.state)}:n={...this.state,...t},n=Je(n,o=>{if(o&&typeof o=="object"&&"uri"in o)return o}),this.render(n);const i=this.state;this.state=n,a?.(i,this.state)}_renderRecord={};render(t){this._renderRecord.prev??=this.state,this._renderRecord.next=t,window.queueMicrotask(()=>{this.emit(this.name,this._renderRecord.prev,this._renderRecord.next),this._renderRecord={}})}onUpdateState(t){this.subscribe(this.name,t)}removeOnUpdateState(t){this.unsubscribe(this.name,t)}forceUpdate(){this.setState({...this.state})}getState(){return this.state}}export{Xe as B};
//# sourceMappingURL=baseService-IKxxVQs3.js.map
