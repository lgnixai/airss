{"version":3,"file":"editorTree-CySrS9ag.js","sources":["../../../esm/services/editorTree.js"],"sourcesContent":["import { BaseService } from \"../glue\";\nimport { EditorTreeEvent, EditorTreeModel } from \"../models/editorTree\";\nimport { arraylize, searchById } from \"../utils\";\nclass EditorTreeService extends BaseService {\n  state;\n  constructor() {\n    super(\"editorTree\");\n    this.state = new EditorTreeModel();\n  }\n  getToolbar(id) {\n    return this.state.toolbar.find(searchById(id));\n  }\n  addToolbar(toolbar) {\n    this.dispatch((draft) => {\n      draft.toolbar.push(...arraylize(toolbar));\n    });\n  }\n  updateToolbar(toolbar) {\n    this.dispatch((draft) => {\n      const target = draft.toolbar.find(searchById(toolbar.id));\n      if (target) {\n        Object.assign(target, toolbar);\n      }\n    });\n  }\n  removeToolbar(id) {\n    this.dispatch((draft) => {\n      const idx = draft.toolbar.findIndex(searchById(id));\n      if (idx !== -1)\n        draft.toolbar.splice(idx, 1);\n    });\n  }\n  // ===================== Subscriptions =====================\n  onClose(callback) {\n    this.subscribe(EditorTreeEvent.onClose, callback);\n  }\n  onGroupClick(callback) {\n    this.subscribe(EditorTreeEvent.onGroupClick, callback);\n  }\n  onSelect(callback) {\n    this.subscribe(EditorTreeEvent.onSelect, callback);\n  }\n  onContextMenu(callback) {\n    this.subscribe(EditorTreeEvent.onContextMenu, callback);\n  }\n  onToolbarClick(callback) {\n    this.subscribe(EditorTreeEvent.onToolbarClick, callback);\n  }\n}\nexport {\n  EditorTreeService\n};\n"],"names":["EditorTreeService","BaseService","EditorTreeModel","id","searchById","toolbar","draft","arraylize","target","idx","callback","EditorTreeEvent"],"mappings":"kLAGA,MAAMA,UAA0BC,CAAY,CAC1C,MACA,aAAc,CACZ,MAAM,YAAY,EAClB,KAAK,MAAQ,IAAIC,CACnB,CACA,WAAWC,EAAI,CACb,OAAO,KAAK,MAAM,QAAQ,KAAKC,EAAWD,CAAE,CAAC,CAC/C,CACA,WAAWE,EAAS,CAClB,KAAK,SAAUC,GAAU,CACvBA,EAAM,QAAQ,KAAK,GAAGC,EAAUF,CAAO,CAAC,CAC1C,CAAC,CACH,CACA,cAAcA,EAAS,CACrB,KAAK,SAAUC,GAAU,CACvB,MAAME,EAASF,EAAM,QAAQ,KAAKF,EAAWC,EAAQ,EAAE,CAAC,EACpDG,GACF,OAAO,OAAOA,EAAQH,CAAO,CAEjC,CAAC,CACH,CACA,cAAcF,EAAI,CAChB,KAAK,SAAUG,GAAU,CACvB,MAAMG,EAAMH,EAAM,QAAQ,UAAUF,EAAWD,CAAE,CAAC,EAC9CM,IAAQ,IACVH,EAAM,QAAQ,OAAOG,EAAK,CAAC,CAC/B,CAAC,CACH,CAEA,QAAQC,EAAU,CAChB,KAAK,UAAUC,EAAgB,QAASD,CAAQ,CAClD,CACA,aAAaA,EAAU,CACrB,KAAK,UAAUC,EAAgB,aAAcD,CAAQ,CACvD,CACA,SAASA,EAAU,CACjB,KAAK,UAAUC,EAAgB,SAAUD,CAAQ,CACnD,CACA,cAAcA,EAAU,CACtB,KAAK,UAAUC,EAAgB,cAAeD,CAAQ,CACxD,CACA,eAAeA,EAAU,CACvB,KAAK,UAAUC,EAAgB,eAAgBD,CAAQ,CACzD,CACF"}