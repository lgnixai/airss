{"version":3,"file":"editor-Dlhy8bW0.js","sources":["../../../esm/services/editor.js"],"sourcesContent":["var __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __decorateClass = (decorators, target, key, kind) => {\n  var result = kind > 1 ? void 0 : kind ? __getOwnPropDesc(target, key) : target;\n  for (var i = decorators.length - 1, decorator; i >= 0; i--)\n    if (decorator = decorators[i])\n      result = (kind ? decorator(target, key, result) : decorator(result)) || result;\n  if (kind && result)\n    __defProp(target, key, result);\n  return result;\n};\nimport { isUndefined } from \"lodash-es\";\nimport { BaseService } from \"../glue\";\nimport { EditorEvent, EditorGroupModel, EditorModel } from \"../models/editor\";\nimport { getPrevOrNext, randomId, searchById } from \"../utils\";\nimport { injectable } from \"tsyringe\";\nlet EditorService = class extends BaseService {\n  state;\n  constructor() {\n    super(\"editor\");\n    this.state = new EditorModel();\n  }\n  getToolbars() {\n    return this.getState().toolbar;\n  }\n  getCurrent() {\n    return this.getState().current;\n  }\n  getGroups() {\n    return this.getState().groups;\n  }\n  getToolbar(toolbarId) {\n    return this.getToolbars().find(searchById(toolbarId));\n  }\n  getGroup(groupId) {\n    if (isUndefined(groupId))\n      return;\n    return this.getGroups().find(searchById(groupId));\n  }\n  getCurrentGroup() {\n    return this.getGroup(this.getCurrent());\n  }\n  getTabs(groupId) {\n    return this.getGroup(groupId)?.data || [];\n  }\n  getCurrentTabs() {\n    return this.getTabs(this.getCurrent());\n  }\n  getTab(tabId, groupId) {\n    if (isUndefined(groupId) || isUndefined(tabId))\n      return;\n    return this.getTabs(groupId).find(searchById(tabId));\n  }\n  getCurrentTab() {\n    return this.getTab(this.getCurrentGroup()?.activeTab, this.getCurrent());\n  }\n  getOptions() {\n    return this.getState().options;\n  }\n  updateOptions(options) {\n    this.dispatch((draft) => {\n      Object.assign(draft.options, options);\n    });\n  }\n  setOptions(options) {\n    this.dispatch((draft) => {\n      draft.options = options;\n    });\n  }\n  setEntry(component) {\n    this.dispatch((draft) => {\n      draft.entry = component;\n    });\n  }\n  updateTab(tab, groupId) {\n    this.dispatch((draft) => {\n      const target = draft.groups.find(searchById(groupId))?.data.find(searchById(tab.id));\n      if (!target)\n        return;\n      Object.assign(target, tab);\n      if (Object.hasOwn(tab, \"value\")) {\n        if (Array.isArray(tab.value)) {\n          if (target.diffEditorModel) {\n            if (target.diffEditorModel.original.getValue() !== tab.value[0]) {\n              target.diffEditorModel.original.setValue(tab.value[0] ?? \"\");\n            }\n            if (target.diffEditorModel.modified.getValue() !== tab.value[1]) {\n              target.diffEditorModel.modified.setValue(tab.value[1] ?? \"\");\n            }\n          }\n        } else {\n          if (target.model && target.model.getValue() !== tab.value) {\n            target.model.setValue(tab.value ?? \"\");\n          }\n        }\n      }\n      this.emit(EditorEvent.onUpdateTab, tab.id, groupId);\n    });\n  }\n  saveTabs(tabsId, groupId) {\n    tabsId.forEach((id) => {\n      this.updateTab({ id, modified: false }, groupId);\n    });\n  }\n  addToolbars(toolbars) {\n    this.dispatch((draft) => {\n      draft.toolbar.push(...toolbars);\n    });\n  }\n  updateToolbar(toolbar) {\n    this.dispatch((draft) => {\n      const target = draft.toolbar.find(searchById(toolbar.id));\n      if (!target)\n        return;\n      Object.assign(target, toolbar);\n    });\n  }\n  _close(tabs) {\n    this.dispatch((draft) => {\n      const currentChanged = { tabId: this.getCurrentGroup()?.activeTab, groupId: draft.current };\n      const closed = [];\n      tabs.forEach(({ tabId, groupId }) => {\n        const groupIdx = draft.groups.findIndex(searchById(groupId));\n        const group = draft.groups[groupIdx];\n        const idx = group.data.findIndex(searchById(tabId));\n        if (idx === -1)\n          return;\n        if (group.activeTab === tabId) {\n          group.activeTab = getPrevOrNext(group.data, idx)?.id;\n        }\n        const [tab] = group.data.splice(idx, 1);\n        closed.push(tab);\n      });\n      tabs.forEach(({ groupId }) => {\n        const idx = draft.groups.findIndex(searchById(groupId));\n        if (idx === -1 || draft.groups[idx].data.length)\n          return;\n        if (draft.current === groupId) {\n          draft.current = getPrevOrNext(draft.groups, idx)?.id;\n        }\n        const [group] = draft.groups.splice(idx, 1);\n        group.editorInstance?.dispose();\n      });\n      closed.forEach((tab) => {\n        if (!tab.model || draft.groups.find((group) => group.data.find((i) => i.model === tab.model)))\n          return;\n        tab.model.dispose();\n      });\n      this.emit(EditorEvent.onClose, closed);\n      const currentActiveTab = draft.groups.find(searchById(draft.current))?.activeTab;\n      if (draft.current !== currentChanged.groupId || currentActiveTab !== currentChanged.tabId) {\n        this.emit(EditorEvent.onCurrentChange, currentChanged, {\n          tabId: currentActiveTab,\n          groupId: draft.current\n        });\n      }\n    });\n  }\n  closeTab(tabId, groupId) {\n    this._close([{ tabId, groupId }]);\n  }\n  closeOther(tabId, groupId) {\n    const tabs = this.getTabs(groupId);\n    const others = tabs.filter((i) => i.id !== tabId);\n    this._close(others.map((tab) => ({ tabId: tab.id, groupId })));\n  }\n  closeToRight(tabId, groupId) {\n    const tabs = this.getTabs(groupId);\n    const right = tabs.slice(tabs.findIndex(searchById(tabId)) + 1);\n    this._close(right.map((tab) => ({ tabId: tab.id, groupId })));\n  }\n  closeToLeft(tabId, groupId) {\n    const tabs = this.getTabs(groupId);\n    const left = tabs.slice(0, tabs.findIndex(searchById(tabId)));\n    this._close(left.map((tab) => ({ tabId: tab.id, groupId })));\n  }\n  closeSaved(groupId) {\n    const tabs = this.getTabs(groupId);\n    const saved = tabs.filter((i) => !i.modified);\n    this._close(saved.map((tab) => ({ tabId: tab.id, groupId })));\n  }\n  removeGroup(groupId) {\n    const group = this.getGroup(groupId);\n    if (!group)\n      return;\n    this._close(group.data.map((i) => ({ tabId: i.id, groupId })));\n  }\n  closeAll(groupId) {\n    if (isUndefined(groupId)) {\n      const groups = this.getGroups();\n      this._close(\n        groups.reduce((acc, cur) => {\n          acc.push(...cur.data.map((i) => ({ tabId: i.id, groupId: cur.id })));\n          return acc;\n        }, [])\n      );\n    } else {\n      this.removeGroup(groupId);\n    }\n  }\n  moveTab(from, to) {\n    this.dispatch((draft) => {\n      const source = draft.groups.find(searchById(from.groupId));\n      const target = draft.groups.find(searchById(to.groupId));\n      if (!source || !target)\n        return;\n      const sourceTabIndex = source.data.findIndex(searchById(from.tabId));\n      const targetTabIndex = target.data.findIndex(searchById(to.tabId));\n      if (sourceTabIndex === -1 || targetTabIndex === -1)\n        return;\n      if (from.groupId !== to.groupId && source.activeTab === from.tabId) {\n        source.activeTab = getPrevOrNext(source.data, sourceTabIndex)?.id;\n      }\n      const tab = source.data.splice(sourceTabIndex, 1);\n      const existInTarget = target.data.findIndex(searchById(from.tabId));\n      if (existInTarget === -1) {\n        target.data.splice(targetTabIndex, 0, tab[0]);\n      } else {\n        target.data.splice(targetTabIndex, 0, target.data.splice(existInTarget, 1)[0]);\n      }\n      target.activeTab = from.tabId;\n      if (!source.data.length) {\n        const idx = draft.groups.findIndex(searchById(from.groupId));\n        draft.groups.splice(idx, 1);\n      }\n    });\n  }\n  setCurrentGroup(groupId) {\n    const current = this.getCurrentGroup();\n    this.emit(\n      EditorEvent.onCurrentChange,\n      { tabId: current?.activeTab, groupId: current?.id },\n      { tabId: this.getGroup(groupId)?.activeTab, groupId }\n    );\n    this.dispatch((draft) => {\n      draft.current = groupId;\n    });\n  }\n  setCurrent(tabId, groupId) {\n    const current = this.getCurrentGroup();\n    this.emit(EditorEvent.onCurrentChange, { tabId: current?.activeTab, groupId: current?.id }, { tabId, groupId });\n    this.dispatch((draft) => {\n      draft.current = groupId;\n      const group = draft.groups.find(searchById(groupId));\n      if (!group)\n        return;\n      group.activeTab = tabId;\n    });\n  }\n  updateGroup(group) {\n    if (Object.hasOwn(group, \"activeTab\")) {\n      const current = this.getCurrentGroup();\n      this.emit(\n        EditorEvent.onCurrentChange,\n        { tabId: current?.activeTab, groupId: current?.id },\n        { tabId: group.activeTab, groupId: group.id }\n      );\n    }\n    this.dispatch((draft) => {\n      const target = draft.groups.find(searchById(group.id));\n      if (!target)\n        return;\n      Object.assign(target, group);\n    });\n  }\n  setLoading(loading) {\n    this.dispatch((draft) => {\n      draft.loading = typeof loading === \"function\" ? loading(draft.loading) : loading;\n    });\n  }\n  createGroup(tab) {\n    return { ...new EditorGroupModel(`EDITOR_GROUP_${randomId()}`, [tab], tab.id) };\n  }\n  addGroup(tab) {\n    this.dispatch((draft) => {\n      draft.groups.push(this.createGroup(tab));\n    });\n  }\n  addTab(tab, groupId) {\n    this.dispatch((draft) => {\n      const group = draft.groups.find(searchById(groupId));\n      if (!group)\n        return;\n      group.data.push(tab);\n    });\n  }\n  /**\n   * @param groupId If provided, will open tab in specific group\n   */\n  open(tab, groupId) {\n    if (!this.getGroup(groupId)) {\n      this.addGroup(tab);\n      const last = this.getGroups().at(-1);\n      if (last) {\n        this.setCurrentGroup(last.id);\n      }\n    } else {\n      this.addTab(tab, groupId);\n      this.setCurrent(tab.id, groupId);\n    }\n    this.emit(EditorEvent.onOpenTab, tab);\n  }\n  // ===================== Subscriptions =====================\n  onFocus(callback) {\n    this.subscribe(EditorEvent.onFocus, callback);\n  }\n  onCursorSelection(callback) {\n    this.subscribe(EditorEvent.onCursorSelection, callback);\n  }\n  onSelectTab(callback) {\n    this.subscribe(EditorEvent.onSelectTab, callback);\n  }\n  onContextMenu(callback) {\n    this.subscribe(EditorEvent.onContextMenu, callback);\n  }\n  onToolbarClick(callback) {\n    this.subscribe(EditorEvent.onToolbarClick, callback);\n  }\n  onUpdateTab(callback) {\n    this.subscribe(EditorEvent.onUpdateTab, callback);\n  }\n  onOpenTab(callback) {\n    this.subscribe(EditorEvent.onOpenTab, callback);\n  }\n  onChange(callback) {\n    this.subscribe(EditorEvent.onChange, callback);\n  }\n  onDragStart(callback) {\n    this.subscribe(EditorEvent.onDragStart, callback);\n  }\n  onDragEnd(callback) {\n    this.subscribe(EditorEvent.onDragEnd, callback);\n  }\n  onDragEnter(callback) {\n    this.subscribe(EditorEvent.onDragEnter, callback);\n  }\n  onDragLeave(callback) {\n    this.subscribe(EditorEvent.onDragLeave, callback);\n  }\n  onDragOver(callback) {\n    this.subscribe(EditorEvent.onDragOver, callback);\n  }\n  onDrop(callback) {\n    this.subscribe(EditorEvent.onDrop, callback);\n  }\n  onClose(callback) {\n    this.subscribe(EditorEvent.onClose, callback);\n  }\n  onCloseAll(callback) {\n    this.subscribe(EditorEvent.onCloseAll, callback);\n  }\n  onCloseTab(callback) {\n    this.subscribe(EditorEvent.onCloseTab, callback);\n  }\n  onCloseOther(callback) {\n    this.subscribe(EditorEvent.onCloseOther, callback);\n  }\n  onCloseToLeft(callback) {\n    this.subscribe(EditorEvent.onCloseToLeft, callback);\n  }\n  onCloseToRight(callback) {\n    this.subscribe(EditorEvent.onCloseToRight, callback);\n  }\n  onSplitEditorRight(callback) {\n    this.subscribe(EditorEvent.onSplitEditorRight, callback);\n  }\n  onContextMenuClick(callback) {\n    this.subscribe(EditorEvent.onContextMenuClick, callback);\n  }\n  onMount(callback) {\n    this.subscribe(EditorEvent.onMount, callback);\n  }\n  onModelMount(callback) {\n    this.subscribe(EditorEvent.onModelMount, callback);\n  }\n  onDiffEditorMount(callback) {\n    this.subscribe(EditorEvent.onDiffEditorMount, callback);\n  }\n  onDiffEditorModelMount(callback) {\n    this.subscribe(EditorEvent.onDiffEditorModelMount, callback);\n  }\n  onCurrentChange(callback) {\n    this.subscribe(EditorEvent.onCurrentChange, callback);\n  }\n};\nEditorService = __decorateClass([\n  injectable()\n], EditorService);\nexport {\n  EditorService\n};\n"],"names":["__getOwnPropDesc","__decorateClass","decorators","target","key","kind","result","i","decorator","EditorService","BaseService","EditorModel","toolbarId","searchById","groupId","isUndefined","tabId","options","draft","component","tab","EditorEvent","tabsId","id","toolbars","toolbar","tabs","currentChanged","closed","groupIdx","group","idx","getPrevOrNext","currentActiveTab","others","right","left","saved","groups","acc","cur","from","to","source","sourceTabIndex","targetTabIndex","existInTarget","current","loading","EditorGroupModel","randomId","last","callback","injectable"],"mappings":"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"}