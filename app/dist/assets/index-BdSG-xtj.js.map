{"version":3,"file":"index-BdSG-xtj.js","sources":["../../../esm/client/components/diffEditor/index.js"],"sourcesContent":["import { jsx } from \"react/jsx-runtime\";\nimport { useEffect, useRef } from \"react\";\nimport useMonaco from \"../../hooks/useMonaco\";\nimport { editor } from \"../../../monaco\";\nfunction MonacoDiffEditor({\n  className,\n  style,\n  instance,\n  options = {},\n  model,\n  language,\n  override,\n  value,\n  onMount,\n  onModelMount\n}) {\n  const parent = useRef(null);\n  const monaco = useMonaco();\n  function createDom() {\n    const dom = document.createElement(\"div\");\n    dom.style.setProperty(\"position\", \"relative\");\n    dom.style.setProperty(\"width\", \"100%\");\n    dom.style.setProperty(\"height\", \"100%\");\n    return dom;\n  }\n  useEffect(() => {\n    if (!parent.current)\n      return;\n    const container = instance?.getDomNode();\n    if (container) {\n      if (parent.current.firstChild === container)\n        return;\n      parent.current.innerHTML = \"\";\n      parent.current.appendChild(container);\n    } else {\n      const domElement = createDom();\n      const editorInstance = monaco.createDiffEditor(domElement, { ...options, readOnly: true }, override);\n      onMount?.(editorInstance);\n    }\n  }, [instance]);\n  useEffect(() => {\n    if (instance) {\n      instance.updateOptions(options);\n    }\n  }, [options]);\n  useEffect(() => {\n    if (instance) {\n      if (!model || model.original?.isDisposed() || model.modified?.isDisposed()) {\n        const originalModel = editor.createModel(value?.[0] || \"\", language);\n        const modifiedModel = editor.createModel(value?.[1] || \"\", language);\n        const diffModel = { original: originalModel, modified: modifiedModel };\n        instance.setModel(diffModel);\n        onModelMount?.(diffModel);\n      } else {\n        const currentModel = instance.getModel();\n        if (model.original === currentModel?.original && model.modified === currentModel?.modified)\n          return;\n        instance.setModel(model);\n      }\n    }\n  }, [model, instance]);\n  return /* @__PURE__ */ jsx(\n    \"div\",\n    {\n      ref: parent,\n      className,\n      style: {\n        height: \"100%\",\n        width: \"100%\",\n        ...style\n      }\n    }\n  );\n}\nexport {\n  MonacoDiffEditor as default\n};\n"],"names":["MonacoDiffEditor","className","style","instance","options","model","language","override","value","onMount","onModelMount","parent","useRef","monaco","useMonaco","createDom","dom","useEffect","container","domElement","editorInstance","originalModel","editor","modifiedModel","diffModel","currentModel","jsx"],"mappings":"iNAIA,SAASA,EAAiB,CACxB,UAAAC,EACA,MAAAC,EACA,SAAAC,EACA,QAAAC,EAAU,CAAA,EACV,MAAAC,EACA,SAAAC,EACA,SAAAC,EACA,MAAAC,EACA,QAAAC,EACA,aAAAC,CACF,EAAG,CACD,MAAMC,EAASC,EAAAA,OAAO,IAAI,EACpBC,EAASC,EAAS,EACxB,SAASC,GAAY,CACnB,MAAMC,EAAM,SAAS,cAAc,KAAK,EACxC,OAAAA,EAAI,MAAM,YAAY,WAAY,UAAU,EAC5CA,EAAI,MAAM,YAAY,QAAS,MAAM,EACrCA,EAAI,MAAM,YAAY,SAAU,MAAM,EAC/BA,CACT,CACAC,OAAAA,EAAAA,UAAU,IAAM,CACd,GAAI,CAACN,EAAO,QACV,OACF,MAAMO,EAAYf,GAAU,WAAU,EACtC,GAAIe,EAAW,CACb,GAAIP,EAAO,QAAQ,aAAeO,EAChC,OACFP,EAAO,QAAQ,UAAY,GAC3BA,EAAO,QAAQ,YAAYO,CAAS,CACtC,KAAO,CACL,MAAMC,EAAaJ,EAAS,EACtBK,EAAiBP,EAAO,iBAAiBM,EAAY,CAAE,GAAGf,EAAS,SAAU,EAAI,EAAIG,CAAQ,EACnGE,IAAUW,CAAc,CAC1B,CACF,EAAG,CAACjB,CAAQ,CAAC,EACbc,EAAAA,UAAU,IAAM,CACVd,GACFA,EAAS,cAAcC,CAAO,CAElC,EAAG,CAACA,CAAO,CAAC,EACZa,EAAAA,UAAU,IAAM,CACd,GAAId,EACF,GAAI,CAACE,GAASA,EAAM,UAAU,WAAU,GAAMA,EAAM,UAAU,aAAc,CAC1E,MAAMgB,EAAgBC,EAAO,YAAYd,IAAQ,CAAC,GAAK,GAAIF,CAAQ,EAC7DiB,EAAgBD,EAAO,YAAYd,IAAQ,CAAC,GAAK,GAAIF,CAAQ,EAC7DkB,EAAY,CAAE,SAAUH,EAAe,SAAUE,CAAa,EACpEpB,EAAS,SAASqB,CAAS,EAC3Bd,IAAec,CAAS,CAC1B,KAAO,CACL,MAAMC,EAAetB,EAAS,SAAQ,EACtC,GAAIE,EAAM,WAAaoB,GAAc,UAAYpB,EAAM,WAAaoB,GAAc,SAChF,OACFtB,EAAS,SAASE,CAAK,CACzB,CAEJ,EAAG,CAACA,EAAOF,CAAQ,CAAC,EACGuB,EAAAA,IACrB,MACA,CACE,IAAKf,EACL,UAAAV,EACA,MAAO,CACL,OAAQ,OACR,MAAO,OACP,GAAGC,CACX,CACA,CACA,CACA"}