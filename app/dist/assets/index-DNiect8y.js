import{at as f,aF as L,aw as o,aN as _,aT as k,aI as y,aL as X,ax as z,aM as W,aO as Y,aX as q,aH as J,s as Q,av as U,aC as V}from"./index-Cz3doEcl.js";import"./react-vendor-Bs7gn1Hv.js";import"./monaco-vendor-Dv-Uvxl1.js";function Z(){const t=f.useRef({});function r(m){return function(h){t.current[m]=h}}return r.current=t.current,r}var $=function(t){var r=f.useRef(t);return r.current=t,r};const a={collapse:"mo-collapse",item:"mo-collapse__item",pane:"mo-collapse__pane",header:"mo-collapse__header",title:"mo-collapse__title",content:"mo-collapse__content",extra:"mo-collapse__extra",headerSize:"26px",transitionDelay:"150"},d=parseInt(a.headerSize,10);function K({data:t=[],activePanelKeys:r=[],className:m,title:h,style:p,role:S,onCollapseChange:B,onToolbarClick:H,onContextMenu:T}){const E=Z(),[A,w]=L(),[C,b]=f.useState(new Array(t.length).fill(d)),I=f.useRef(0),D=$(r),j=f.useRef();f.useEffect(()=>(j.current=new MutationObserver(e=>{e.forEach(n=>{N(n.target)})}),()=>{j.current?.disconnect(),window.clearTimeout(I.current)}),[]);const M=e=>{I.current=window.setTimeout(()=>{const n=E.current[e]?.firstElementChild;n&&(j.current?.observe(n,{childList:!1,attributes:!0,subtree:!1,attributeFilter:["style"]}),N(n))},0)},O=()=>{const e=t.map(s=>s.hidden?0:d),n=t.filter(s=>!r.includes(s.id)&&!s.hidden);let i=w.height-n.length*d,u=0;const c=[];r.forEach(s=>{const x=t.findIndex(Q(s)),l=t[x];if(l.hidden)return;const v=l.config?.grow;if(v===0){const R=(E.current[l.id]?.firstElementChild?.getBoundingClientRect().height??0)+d;e[x]=R,i-=R,M(l.id)}else u+=v??1,c.push(x)});const g=i/u;c.forEach(s=>{const l=t[s].config?.grow??1;e[s]=g*l}),b(e)};f.useEffect(()=>{O()},[t,r,w.height]);function N(e){if(e){const n=e.parentElement,i=t.findIndex(c=>c.id===n.dataset.contentKey),u=e.getBoundingClientRect().height;b(c=>{const g=u+d-c[i];c[i]=u+d;const s=t.findIndex((x,l)=>D.current.includes(x.id)&&l>i);return s===-1?[...c]:(c[s]-=g,[...c])})}}const F=e=>{const n=[...r];if(n.includes(e)){const i=n.indexOf(e);n.splice(i,1)}else n.push(e);B?.(n)},G=w.height===0||C.every(e=>e===0);return o.jsxs("div",{ref:A,className:_(a.collapse,m),title:h,style:p,role:S,children:[o.jsx(k,{active:G}),o.jsx(y,{sizes:C,split:"horizontal",paneClassName:_(a.pane),onChange:b,children:t.map((e,n)=>{const i=r.includes(e.id),u=r.includes(t[n-1]?.id),c=i&&u,g=e.config?.grow!==0&&t[n-1]?.config?.grow!==0;return o.jsx(y.Pane,{minSize:d,maxSize:i?1/0:d,resizable:c&&g,hidden:e.hidden,children:o.jsxs("div",{className:_(a.item,e.className,i&&a.active),children:[o.jsx(X,{onContextMenu:s=>T?.({x:s.pageX,y:s.pageY},e),children:o.jsxs(z,{className:a.header,tabIndex:0,justifyContent:"space-between",onClick:()=>F(e.id),children:[o.jsxs(z,{title:e.title||W(e.name),children:[o.jsx(Y,{type:i?"chevron-down":"chevron-right"}),o.jsx("span",{className:a.title,children:e.name})]}),i&&o.jsx(q,{className:a.extra,data:e.toolbar||[],onClick:s=>H?.(s,e.id)},e.id)]})}),o.jsx(J,{visible:i,delay:Number(a.transitionDelay),children:o.jsx("div",{className:a.content,tabIndex:0,ref:E(e.id),"data-content-key":e.id,children:e.render?.(e)})})]})},e.id)})})]})}function se({onToolbarClick:t,onCollapseChange:r,onContextMenu:m}){const h=U("explorer"),p=h.data.concat().sort(V);return p.length?o.jsx(K,{data:p,activePanelKeys:h.active,onCollapseChange:r,onToolbarClick:t,onContextMenu:m}):null}export{se as default};
//# sourceMappingURL=index-DNiect8y.js.map
