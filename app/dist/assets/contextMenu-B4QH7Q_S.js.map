{"version":3,"file":"contextMenu-B4QH7Q_S.js","sources":["../../../esm/services/contextMenu.js"],"sourcesContent":["import { BaseService } from \"../glue\";\nimport { ContextMenuEvent, ContextMenuModel } from \"../models/contextMenu\";\nimport { searchById } from \"../utils\";\nclass ContextMenuService extends BaseService {\n  state;\n  constructor() {\n    super(\"contextMenu\");\n    this.state = new ContextMenuModel();\n  }\n  get(id) {\n    return this.getState().data.find(searchById(id));\n  }\n  getAll() {\n    return this.getState().data;\n  }\n  getScope() {\n    return this.getState().scope;\n  }\n  open(data, pos, scope) {\n    this.add(data);\n    this.updatePosition(pos);\n    this.setVisible(true);\n    this.setScope(scope);\n  }\n  close() {\n    this.clear();\n    this.setVisible(false);\n    this.setScope();\n  }\n  setVisible(visible) {\n    this.dispatch((draft) => {\n      draft.visible = typeof visible === \"function\" ? visible(draft.visible) : visible;\n    });\n  }\n  add(data) {\n    this.dispatch((draft) => {\n      draft.data.push(...data);\n    });\n  }\n  clear() {\n    this.dispatch((draft) => {\n      draft.data.length = 0;\n    });\n  }\n  updatePosition(pos) {\n    this.dispatch((draft) => {\n      draft.position = pos;\n    });\n  }\n  setScope(scope) {\n    this.dispatch((draft) => {\n      draft.scope = scope;\n    });\n  }\n  reset() {\n    this.setState(new ContextMenuModel());\n  }\n  // ===================== Subscriptions =====================\n  onHide(callback) {\n    this.subscribe(ContextMenuEvent.onHide, callback);\n  }\n  onClick(callback) {\n    this.subscribe(ContextMenuEvent.onClick, callback);\n  }\n}\nexport {\n  ContextMenuService\n};\n"],"names":["ContextMenuService","BaseService","ContextMenuModel","id","searchById","data","pos","scope","visible","draft","callback","ContextMenuEvent"],"mappings":"2KAGA,MAAMA,UAA2BC,CAAY,CAC3C,MACA,aAAc,CACZ,MAAM,aAAa,EACnB,KAAK,MAAQ,IAAIC,CACnB,CACA,IAAIC,EAAI,CACN,OAAO,KAAK,WAAW,KAAK,KAAKC,EAAWD,CAAE,CAAC,CACjD,CACA,QAAS,CACP,OAAO,KAAK,SAAQ,EAAG,IACzB,CACA,UAAW,CACT,OAAO,KAAK,SAAQ,EAAG,KACzB,CACA,KAAKE,EAAMC,EAAKC,EAAO,CACrB,KAAK,IAAIF,CAAI,EACb,KAAK,eAAeC,CAAG,EACvB,KAAK,WAAW,EAAI,EACpB,KAAK,SAASC,CAAK,CACrB,CACA,OAAQ,CACN,KAAK,MAAK,EACV,KAAK,WAAW,EAAK,EACrB,KAAK,SAAQ,CACf,CACA,WAAWC,EAAS,CAClB,KAAK,SAAUC,GAAU,CACvBA,EAAM,QAAU,OAAOD,GAAY,WAAaA,EAAQC,EAAM,OAAO,EAAID,CAC3E,CAAC,CACH,CACA,IAAIH,EAAM,CACR,KAAK,SAAUI,GAAU,CACvBA,EAAM,KAAK,KAAK,GAAGJ,CAAI,CACzB,CAAC,CACH,CACA,OAAQ,CACN,KAAK,SAAUI,GAAU,CACvBA,EAAM,KAAK,OAAS,CACtB,CAAC,CACH,CACA,eAAeH,EAAK,CAClB,KAAK,SAAUG,GAAU,CACvBA,EAAM,SAAWH,CACnB,CAAC,CACH,CACA,SAASC,EAAO,CACd,KAAK,SAAUE,GAAU,CACvBA,EAAM,MAAQF,CAChB,CAAC,CACH,CACA,OAAQ,CACN,KAAK,SAAS,IAAIL,CAAkB,CACtC,CAEA,OAAOQ,EAAU,CACf,KAAK,UAAUC,EAAiB,OAAQD,CAAQ,CAClD,CACA,QAAQA,EAAU,CAChB,KAAK,UAAUC,EAAiB,QAASD,CAAQ,CACnD,CACF"}