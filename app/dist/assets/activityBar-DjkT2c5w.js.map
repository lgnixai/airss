{"version":3,"file":"activityBar-DjkT2c5w.js","sources":["../../../esm/services/activityBar.js"],"sourcesContent":["import { BaseService } from \"../glue\";\nimport { ActivityBarEvent, ActivityBarModel } from \"../models/activityBar\";\nimport { arraylize, searchById } from \"../utils\";\nclass ActivityBarService extends BaseService {\n  state;\n  constructor() {\n    super(\"activityBar\");\n    this.state = new ActivityBarModel();\n  }\n  setCurrent(id) {\n    this.dispatch((draft) => {\n      draft.current = id;\n    });\n  }\n  get(id) {\n    return this.getState().data.find(searchById(id));\n  }\n  getCurrent() {\n    return this.getState().current;\n  }\n  add(data, isActive = false) {\n    if (!Array.isArray(data) && isActive) {\n      this.setCurrent(data.id);\n    }\n    this.dispatch((draft) => {\n      const arrayData = arraylize(data);\n      draft.data.push(...arrayData);\n    });\n  }\n  update(item, predict) {\n    const isUpdateData = typeof item === \"object\";\n    this.dispatch((draft) => {\n      const target = draft.data.find(searchById(isUpdateData ? item.id : item));\n      if (target) {\n        Object.assign(target, isUpdateData ? item : predict?.(target) || {});\n      }\n    });\n  }\n  remove(id) {\n    this.dispatch((draft) => {\n      arraylize(id).forEach((item) => {\n        const idx = draft.data.findIndex(searchById(item));\n        draft.data.splice(idx, 1);\n      });\n    });\n  }\n  toggleBar(id, hidden) {\n    this.dispatch((draft) => {\n      const target = draft.data.find(searchById(id));\n      if (target) {\n        target.hidden = typeof hidden === \"boolean\" ? hidden : !target.hidden;\n      }\n    });\n  }\n  reset() {\n    this.setState(new ActivityBarModel());\n  }\n  // ===================== Subscriptions =====================\n  onClick(callback) {\n    this.subscribe(ActivityBarEvent.onClick, callback);\n  }\n  onContextMenu(callback) {\n    this.subscribe(ActivityBarEvent.onContextMenu, callback);\n  }\n  onContextMenuClick(callback) {\n    this.subscribe(ActivityBarEvent.onContextMenuClick, callback);\n  }\n}\nexport {\n  ActivityBarService\n};\n"],"names":["ActivityBarService","BaseService","ActivityBarModel","id","draft","searchById","data","isActive","arrayData","arraylize","item","predict","isUpdateData","target","idx","hidden","callback","ActivityBarEvent"],"mappings":"kLAGA,MAAMA,UAA2BC,CAAY,CAC3C,MACA,aAAc,CACZ,MAAM,aAAa,EACnB,KAAK,MAAQ,IAAIC,CACnB,CACA,WAAWC,EAAI,CACb,KAAK,SAAUC,GAAU,CACvBA,EAAM,QAAUD,CAClB,CAAC,CACH,CACA,IAAIA,EAAI,CACN,OAAO,KAAK,WAAW,KAAK,KAAKE,EAAWF,CAAE,CAAC,CACjD,CACA,YAAa,CACX,OAAO,KAAK,SAAQ,EAAG,OACzB,CACA,IAAIG,EAAMC,EAAW,GAAO,CACtB,CAAC,MAAM,QAAQD,CAAI,GAAKC,GAC1B,KAAK,WAAWD,EAAK,EAAE,EAEzB,KAAK,SAAUF,GAAU,CACvB,MAAMI,EAAYC,EAAUH,CAAI,EAChCF,EAAM,KAAK,KAAK,GAAGI,CAAS,CAC9B,CAAC,CACH,CACA,OAAOE,EAAMC,EAAS,CACpB,MAAMC,EAAe,OAAOF,GAAS,SACrC,KAAK,SAAUN,GAAU,CACvB,MAAMS,EAAST,EAAM,KAAK,KAAKC,EAAWO,EAAeF,EAAK,GAAKA,CAAI,CAAC,EACpEG,GACF,OAAO,OAAOA,EAAQD,EAAeF,EAAOC,IAAUE,CAAM,GAAK,EAAE,CAEvE,CAAC,CACH,CACA,OAAOV,EAAI,CACT,KAAK,SAAUC,GAAU,CACvBK,EAAUN,CAAE,EAAE,QAASO,GAAS,CAC9B,MAAMI,EAAMV,EAAM,KAAK,UAAUC,EAAWK,CAAI,CAAC,EACjDN,EAAM,KAAK,OAAOU,EAAK,CAAC,CAC1B,CAAC,CACH,CAAC,CACH,CACA,UAAUX,EAAIY,EAAQ,CACpB,KAAK,SAAUX,GAAU,CACvB,MAAMS,EAAST,EAAM,KAAK,KAAKC,EAAWF,CAAE,CAAC,EACzCU,IACFA,EAAO,OAAS,OAAOE,GAAW,UAAYA,EAAS,CAACF,EAAO,OAEnE,CAAC,CACH,CACA,OAAQ,CACN,KAAK,SAAS,IAAIX,CAAkB,CACtC,CAEA,QAAQc,EAAU,CAChB,KAAK,UAAUC,EAAiB,QAASD,CAAQ,CACnD,CACA,cAAcA,EAAU,CACtB,KAAK,UAAUC,EAAiB,cAAeD,CAAQ,CACzD,CACA,mBAAmBA,EAAU,CAC3B,KAAK,UAAUC,EAAiB,mBAAoBD,CAAQ,CAC9D,CACF"}