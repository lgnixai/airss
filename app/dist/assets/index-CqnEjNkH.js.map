{"version":3,"file":"index-CqnEjNkH.js","sources":["../../../node_modules/.pnpm/react-use@17.5.1_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/react-use/esm/useCustomCompareEffect.js","../../../node_modules/.pnpm/fast-deep-equal@3.1.3/node_modules/fast-deep-equal/react.js","../../../node_modules/.pnpm/react-use@17.5.1_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/react-use/esm/useDeepCompareEffect.js","../../../esm/client/hooks/useAutoPos.js","../../../esm/client/slots/workbench/style__variables.js","../../../esm/client/slots/workbench/index.js"],"sourcesContent":["import { useEffect, useRef } from 'react';\nvar isPrimitive = function (val) { return val !== Object(val); };\nvar useCustomCompareEffect = function (effect, deps, depsEqual) {\n    if (process.env.NODE_ENV !== 'production') {\n        if (!(deps instanceof Array) || !deps.length) {\n            console.warn('`useCustomCompareEffect` should not be used with no dependencies. Use React.useEffect instead.');\n        }\n        if (deps.every(isPrimitive)) {\n            console.warn('`useCustomCompareEffect` should not be used with dependencies that are all primitive values. Use React.useEffect instead.');\n        }\n        if (typeof depsEqual !== 'function') {\n            console.warn('`useCustomCompareEffect` should be used with depsEqual callback for comparing deps list');\n        }\n    }\n    var ref = useRef(undefined);\n    if (!ref.current || !depsEqual(deps, ref.current)) {\n        ref.current = deps;\n    }\n    useEffect(effect, ref.current);\n};\nexport default useCustomCompareEffect;\n","'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (key === '_owner' && a.$$typeof) {\n        // React-specific: avoid traversing React elements' _owner.\n        //  _owner contains circular references\n        // and is not needed when comparing the actual elements (and not their owners)\n        continue;\n      }\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n","import useCustomCompareEffect from './useCustomCompareEffect';\nimport isDeepEqual from './misc/isDeepEqual';\nvar isPrimitive = function (val) { return val !== Object(val); };\nvar useDeepCompareEffect = function (effect, deps) {\n    if (process.env.NODE_ENV !== 'production') {\n        if (!(deps instanceof Array) || !deps.length) {\n            console.warn('`useDeepCompareEffect` should not be used with no dependencies. Use React.useEffect instead.');\n        }\n        if (deps.every(isPrimitive)) {\n            console.warn('`useDeepCompareEffect` should not be used with dependencies that are all primitive values. Use React.useEffect instead.');\n        }\n    }\n    useCustomCompareEffect(effect, deps, isDeepEqual);\n};\nexport default useDeepCompareEffect;\n","import { useState } from \"react\";\nimport useMeasure from \"react-use/esm/useMeasure\";\nimport useDeepCompareEffect from \"react-use/esm/useDeepCompareEffect\";\nfunction useAutoPos(pos, split = \"vertical\") {\n  const [ref, rect] = useMeasure();\n  const [state, setState] = useState(() => convertAutoToAbsolute(pos, 0));\n  function convertAutoToAbsolute(data, rect2) {\n    const res = [...data];\n    let total = rect2;\n    const autoIndex = [];\n    data.forEach((i, idx) => {\n      if (i === \"auto\") {\n        autoIndex.push(idx);\n      } else {\n        total -= i;\n      }\n    });\n    const per = total / autoIndex.length;\n    autoIndex.forEach((idx) => {\n      res[idx] = per;\n    });\n    return res;\n  }\n  const size = rect[split === \"vertical\" ? \"width\" : \"height\"];\n  useDeepCompareEffect(() => {\n    setState(convertAutoToAbsolute(pos, size));\n  }, [pos, size]);\n  function withChange(fn) {\n    return (absolutePos) => {\n      fn?.(\n        pos.map((item, idx) => {\n          if (item === \"auto\")\n            return \"auto\";\n          return absolutePos[idx];\n        })\n      );\n    };\n  }\n  return [ref, state, withChange];\n}\nexport {\n  useAutoPos as default\n};\n","export default {\n  container: \"mo\",\n  main: \"mo-mainBench\",\n  toaster: \"mo-toaster\",\n}","import { jsx, jsxs } from \"react/jsx-runtime\";\nimport { useEffect, useRef } from \"react\";\nimport { Display, Split } from \"../../components\";\nimport { useAutoPos, useConnector, useDynamic } from \"../../hooks\";\nimport { Toaster } from \"sonner\";\nimport \"normalize.css\";\nimport \"../../classNames/common.css\";\nimport \"./index.css\";\nimport variables from \"./style__variables.js\";\nfunction Workbench({ onSideChange, onEditorChange }) {\n  const layout = useConnector(\"layout\");\n  const auxiliaryBar = useConnector(\"auxiliaryBar\");\n  const StatusBar = useDynamic(\"statusBar\");\n  const MenuBar = useDynamic(\"menuBar\");\n  const AuxiliaryBar = useDynamic(\"auxiliaryBar\");\n  const ActivityBar = useDynamic(\"activityBar\");\n  const Sidebar = useDynamic(\"sidebar\");\n  const Panel = useDynamic(\"panel\");\n  const Editor = useDynamic(\"editor\");\n  const ContextMenu = useDynamic(\"contextMenu\");\n  const ref = useRef(null);\n  const getPosOverBar = (pos) => {\n    const verticalPos = [...pos];\n    const isActiveAuxiliaryBar = !!auxiliaryBar.current;\n    if (!isActiveAuxiliaryBar) {\n      verticalPos[verticalPos.length - 1] = 25;\n    }\n    return verticalPos;\n  };\n  const [sideRef, sidePos, sideChange] = useAutoPos(getPosOverBar(layout.splitPanePos));\n  const [editorRef, editorPos, editorChange] = useAutoPos(\n    layout.panel.panelMaximized ? [0, \"auto\"] : layout.horizontalSplitPanePos,\n    \"horizontal\"\n  );\n  useEffect(() => {\n    ref.current?.focus();\n  }, []);\n  return /* @__PURE__ */ jsxs(\"main\", { className: variables.container, tabIndex: 0, ref, children: [\n    ContextMenu,\n    /* @__PURE__ */ jsx(Display, { visible: !layout.menuBar.hidden, children: MenuBar }),\n    /* @__PURE__ */ jsxs(\"section\", { className: variables.main, children: [\n      /* @__PURE__ */ jsx(Display, { visible: !layout.activityBar.hidden, children: ActivityBar }),\n      /* @__PURE__ */ jsxs(Split, { ref: sideRef, sizes: sidePos, split: \"vertical\", onChange: sideChange(onSideChange), children: [\n        /* @__PURE__ */ jsx(Split.Pane, { minSize: 170, maxSize: 800, hidden: layout.sidebar.hidden, children: Sidebar }),\n        /* @__PURE__ */ jsx(Split.Pane, { children: /* @__PURE__ */ jsxs(\n          Split,\n          {\n            ref: editorRef,\n            sizes: editorPos,\n            split: \"horizontal\",\n            onChange: editorChange(onEditorChange),\n            children: [\n              /* @__PURE__ */ jsx(Split.Pane, { minSize: 150, children: Editor }),\n              /* @__PURE__ */ jsx(Split.Pane, { hidden: layout.panel.hidden, children: Panel })\n            ]\n          }\n        ) }),\n        /* @__PURE__ */ jsx(Split.Pane, { minSize: 150, maxSize: 300, hidden: layout.auxiliaryBar.hidden, resizable: !!auxiliaryBar.current, children: AuxiliaryBar })\n      ] })\n    ] }),\n    /* @__PURE__ */ jsx(Display, { visible: !layout.statusBar.hidden, children: StatusBar }),\n    /* @__PURE__ */ jsx(Toaster, { className: variables.toaster, expand: true, hotkey: [] })\n  ] });\n}\nexport {\n  Workbench as default\n};\n"],"names":["useCustomCompareEffect","effect","deps","depsEqual","ref","useRef","useEffect","react","equal","a","b","length","i","keys","key","useDeepCompareEffect","isDeepEqual","useAutoPos","pos","split","rect","useMeasure","state","setState","useState","convertAutoToAbsolute","data","rect2","res","total","autoIndex","idx","per","size","withChange","fn","absolutePos","item","variables","Workbench","onSideChange","onEditorChange","layout","useConnector","auxiliaryBar","StatusBar","useDynamic","MenuBar","AuxiliaryBar","ActivityBar","Sidebar","Panel","Editor","ContextMenu","getPosOverBar","verticalPos","sideRef","sidePos","sideChange","editorRef","editorPos","editorChange","jsxs","jsx","Display","Split","Toaster"],"mappings":"oLAEA,IAAIA,EAAyB,SAAUC,EAAQC,EAAMC,EAAW,CAY5D,IAAIC,EAAMC,EAAAA,OAAO,MAAS,GACtB,CAACD,EAAI,SAAW,CAACD,EAAUD,EAAME,EAAI,OAAO,KAC5CA,EAAI,QAAUF,GAElBI,YAAUL,EAAQG,EAAI,OAAO,CACjC,kCCbAG,EAAiB,SAASC,EAAMC,EAAGC,EAAG,CACpC,GAAID,IAAMC,EAAG,MAAO,GAEpB,GAAID,GAAKC,GAAK,OAAOD,GAAK,UAAY,OAAOC,GAAK,SAAU,CAC1D,GAAID,EAAE,cAAgBC,EAAE,YAAa,MAAO,GAE5C,IAAIC,EAAQC,EAAGC,EACf,GAAI,MAAM,QAAQJ,CAAC,EAAG,CAEpB,GADAE,EAASF,EAAE,OACPE,GAAUD,EAAE,OAAQ,MAAO,GAC/B,IAAKE,EAAID,EAAQC,MAAQ,GACvB,GAAI,CAACJ,EAAMC,EAAEG,CAAC,EAAGF,EAAEE,CAAC,CAAC,EAAG,MAAO,GACjC,MAAO,EACb,CAII,GAAIH,EAAE,cAAgB,OAAQ,OAAOA,EAAE,SAAWC,EAAE,QAAUD,EAAE,QAAUC,EAAE,MAC5E,GAAID,EAAE,UAAY,OAAO,UAAU,QAAS,OAAOA,EAAE,QAAO,IAAOC,EAAE,QAAO,EAC5E,GAAID,EAAE,WAAa,OAAO,UAAU,SAAU,OAAOA,EAAE,SAAQ,IAAOC,EAAE,SAAQ,EAIhF,GAFAG,EAAO,OAAO,KAAKJ,CAAC,EACpBE,EAASE,EAAK,OACVF,IAAW,OAAO,KAAKD,CAAC,EAAE,OAAQ,MAAO,GAE7C,IAAKE,EAAID,EAAQC,MAAQ,GACvB,GAAI,CAAC,OAAO,UAAU,eAAe,KAAKF,EAAGG,EAAKD,CAAC,CAAC,EAAG,MAAO,GAEhE,IAAKA,EAAID,EAAQC,MAAQ,GAAI,CAC3B,IAAIE,EAAMD,EAAKD,CAAC,EAEhB,GAAI,EAAAE,IAAQ,UAAYL,EAAE,WAOtB,CAACD,EAAMC,EAAEK,CAAG,EAAGJ,EAAEI,CAAG,CAAC,EAAG,MAAO,EACzC,CAEI,MAAO,EACX,CAGE,OAAOL,IAAIA,GAAKC,IAAIA,CACtB,4BCjDA,IAAIK,EAAuB,SAAUd,EAAQC,EAAM,CAS/CF,EAAuBC,EAAQC,EAAMc,CAAW,CACpD,ECVA,SAASC,EAAWC,EAAKC,EAAQ,WAAY,CAC3C,KAAM,CAACf,EAAKgB,CAAI,EAAIC,EAAU,EACxB,CAACC,EAAOC,CAAQ,EAAIC,EAAAA,SAAS,IAAMC,EAAsBP,EAAK,CAAC,CAAC,EACtE,SAASO,EAAsBC,EAAMC,EAAO,CAC1C,MAAMC,EAAM,CAAC,GAAGF,CAAI,EACpB,IAAIG,EAAQF,EACZ,MAAMG,EAAY,CAAA,EAClBJ,EAAK,QAAQ,CAACd,EAAGmB,IAAQ,CACnBnB,IAAM,OACRkB,EAAU,KAAKC,CAAG,EAElBF,GAASjB,CAEb,CAAC,EACD,MAAMoB,EAAMH,EAAQC,EAAU,OAC9B,OAAAA,EAAU,QAASC,GAAQ,CACzBH,EAAIG,CAAG,EAAIC,CACb,CAAC,EACMJ,CACT,CACA,MAAMK,EAAOb,EAAKD,IAAU,WAAa,QAAU,QAAQ,EAC3DJ,EAAqB,IAAM,CACzBQ,EAASE,EAAsBP,EAAKe,CAAI,CAAC,CAC3C,EAAG,CAACf,EAAKe,CAAI,CAAC,EACd,SAASC,EAAWC,EAAI,CACtB,OAAQC,GAAgB,CACtBD,IACEjB,EAAI,IAAI,CAACmB,EAAMN,IACTM,IAAS,OACJ,OACFD,EAAYL,CAAG,CACvB,CACT,CACI,CACF,CACA,MAAO,CAAC3B,EAAKkB,EAAOY,CAAU,CAChC,CCvCA,MAAAI,EAAe,CACb,UAAW,KACX,KAAM,eACN,QAAS,YACX,ECKA,SAASC,EAAU,CAAE,aAAAC,EAAc,eAAAC,GAAkB,CACnD,MAAMC,EAASC,EAAa,QAAQ,EAC9BC,EAAeD,EAAa,cAAc,EAC1CE,EAAYC,EAAW,WAAW,EAClCC,EAAUD,EAAW,SAAS,EAC9BE,EAAeF,EAAW,cAAc,EACxCG,EAAcH,EAAW,aAAa,EACtCI,EAAUJ,EAAW,SAAS,EAC9BK,EAAQL,EAAW,OAAO,EAC1BM,EAASN,EAAW,QAAQ,EAC5BO,EAAcP,EAAW,aAAa,EACtC1C,EAAMC,EAAAA,OAAO,IAAI,EACjBiD,EAAiBpC,GAAQ,CAC7B,MAAMqC,EAAc,CAAC,GAAGrC,CAAG,EAE3B,MAD6B,CAAC,CAAC0B,EAAa,UAE1CW,EAAYA,EAAY,OAAS,CAAC,EAAI,IAEjCA,CACT,EACM,CAACC,EAASC,EAASC,CAAU,EAAIzC,EAAWqC,EAAcZ,EAAO,YAAY,CAAC,EAC9E,CAACiB,EAAWC,EAAWC,CAAY,EAAI5C,EAC3CyB,EAAO,MAAM,eAAiB,CAAC,EAAG,MAAM,EAAIA,EAAO,uBACnD,YACJ,EACEpC,OAAAA,EAAAA,UAAU,IAAM,CACdF,EAAI,SAAS,MAAK,CACpB,EAAG,CAAA,CAAE,EACkB0D,EAAAA,KAAK,OAAQ,CAAE,UAAWxB,EAAU,UAAW,SAAU,EAAG,IAAAlC,EAAK,SAAU,CAChGiD,EACgBU,MAAIC,EAAS,CAAE,QAAS,CAACtB,EAAO,QAAQ,OAAQ,SAAUK,EAAS,EACnEe,EAAAA,KAAK,UAAW,CAAE,UAAWxB,EAAU,KAAM,SAAU,CACrDyB,MAAIC,EAAS,CAAE,QAAS,CAACtB,EAAO,YAAY,OAAQ,SAAUO,EAAa,EAC3Ea,EAAAA,KAAKG,EAAO,CAAE,IAAKT,EAAS,MAAOC,EAAS,MAAO,WAAY,SAAUC,EAAWlB,CAAY,EAAG,SAAU,CAC3GuB,EAAAA,IAAIE,EAAM,KAAM,CAAE,QAAS,IAAK,QAAS,IAAK,OAAQvB,EAAO,QAAQ,OAAQ,SAAUQ,CAAO,CAAE,EAChGa,EAAAA,IAAIE,EAAM,KAAM,CAAE,SAA0BH,EAAAA,KAC1DG,EACA,CACE,IAAKN,EACL,MAAOC,EACP,MAAO,aACP,SAAUC,EAAapB,CAAc,EACrC,SAAU,CACQsB,EAAAA,IAAIE,EAAM,KAAM,CAAE,QAAS,IAAK,SAAUb,EAAQ,EAClDW,MAAIE,EAAM,KAAM,CAAE,OAAQvB,EAAO,MAAM,OAAQ,SAAUS,CAAK,CAAE,CAC9F,CACA,CACA,EAAW,EACaY,EAAAA,IAAIE,EAAM,KAAM,CAAE,QAAS,IAAK,QAAS,IAAK,OAAQvB,EAAO,aAAa,OAAQ,UAAW,CAAC,CAACE,EAAa,QAAS,SAAUI,CAAY,CAAE,CACrK,CAAO,CAAE,CACT,EAAO,EACae,MAAIC,EAAS,CAAE,QAAS,CAACtB,EAAO,UAAU,OAAQ,SAAUG,EAAW,EACvEkB,MAAIG,EAAS,CAAE,UAAW5B,EAAU,QAAS,OAAQ,GAAM,OAAQ,EAAE,CAAE,CAC3F,EAAK,CACL","x_google_ignoreList":[0,1,2]}