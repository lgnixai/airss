import{s as l,b as M,I as c,i as k,a as s}from"./index-Cz3doEcl.js";import{B as w}from"./baseService-IKxxVQs3.js";import"./react-vendor-Bs7gn1Hv.js";import"./monaco-vendor-Dv-Uvxl1.js";class u{constructor(i=[]){this.data=i}}var O=Object.getOwnPropertyDescriptor,S=(t,i,a,o)=>{for(var e=o>1?void 0:o?O(i,a):i,n=t.length-1,h;n>=0;n--)(h=t[n])&&(e=h(e)||e);return e},r=(t,i)=>(a,o)=>i(a,o,t);let d=class extends w{constructor(t,i,a,o,e,n,h,m,f,p,x,y,g,b,B,v,A,T,E,_,C,j){super("extension"),this.locale=t,this.builtin=i,this.contextMenu=a,this.auxiliaryBar=o,this.layout=e,this.statusBar=n,this.menuBar=h,this.activityBar=m,this.sidebar=f,this.explorer=p,this.folderTree=x,this.panel=y,this.output=g,this.editor=b,this.colorTheme=B,this.action=v,this.editorTree=A,this.notification=T,this.search=E,this.settings=_,this.monaco=C,this.module=j,this.state=new u}state;_predicate=()=>!0;getContext=()=>({locale:this.locale,builtin:this.builtin,contextMenu:this.contextMenu,auxiliaryBar:this.auxiliaryBar,layout:this.layout,statusBar:this.statusBar,menuBar:this.menuBar,activityBar:this.activityBar,sidebar:this.sidebar,explorer:this.explorer,folderTree:this.folderTree,panel:this.panel,output:this.output,editor:this.editor,colorTheme:this.colorTheme,action:this.action,editorTree:this.editorTree,notification:this.notification,search:this.search,settings:this.settings});isExtension(t){return t?typeof t=="object"&&["activate","id","name"].every(i=>i in t):!1}get(t){return this.getAll().find(l(t))}getAll(){return this.getState().data}inactive(t){this._predicate=t}add(t){this.dispatch(i=>{i.data.push(...M(t))})}load(t){const i=this.getAll();Array.isArray(i)&&i.filter(this._predicate).forEach(a=>{this.isExtension(a)&&a.contributes&&this.loadContributes(a.contributes,t)})}activate(){const t=this.getAll();if(!Array.isArray(t))return;const i=this.getContext();t.filter(this._predicate).forEach(a=>{this.isExtension(a)&&a.activate(i,this.monaco)})}loadContributes(t,i){Object.keys(t).forEach(o=>{switch(o){case c.Themes:{const e=t[o];if(!Array.isArray(e))return;this.colorTheme.add(e);break}case c.Languages:{const e=t[o];if(!Array.isArray(e))return;this.locale.add(e);break}case c.Commands:{const e=t[o];if(!Array.isArray(e))return;e.forEach(n=>this.action.registerAction(n));break}case c.Modules:{const e=t[o];if(!e)return;Object.keys(e).forEach(n=>{this.module.update(n,e[n])});break}case c.Grammar:{const e=t[o];this.colorTheme._activeGrammar(e,i);break}}})}dispose(t){const i=this.getContext(),a=this.get(t);a&&(a.dispose?.(i),this.dispatch(o=>{const e=o.data.findIndex(l(t));e!==-1&&o.data.splice(e,1)}))}disposeAll(){this.getAll().forEach(i=>{const a=this.getContext();i.dispose?.(a)}),this.reset()}reset(){this.setState(new u)}};d=S([k(),r(0,s("locale")),r(1,s("builtin")),r(2,s("contextMenu")),r(3,s("auxiliaryBar")),r(4,s("layout")),r(5,s("statusBar")),r(6,s("menuBar")),r(7,s("activityBar")),r(8,s("sidebar")),r(9,s("explorer")),r(10,s("folderTree")),r(11,s("panel")),r(12,s("output")),r(13,s("editor")),r(14,s("colorTheme")),r(15,s("action")),r(16,s("editorTree")),r(17,s("notification")),r(18,s("search")),r(19,s("settings")),r(20,s("monaco")),r(21,s("module"))],d);export{d as ExtensionService};
//# sourceMappingURL=extension-BaSBUbGA.js.map
