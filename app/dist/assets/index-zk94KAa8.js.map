{"version":3,"file":"index-zk94KAa8.js","sources":["../../../node_modules/.pnpm/react-use@17.5.1_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/react-use/esm/usePrevious.js","../../../node_modules/.pnpm/react-use@17.5.1_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/react-use/esm/useFirstMountState.js","../../../node_modules/.pnpm/react-use@17.5.1_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/react-use/esm/useUpdateEffect.js","../../../esm/client/hooks/useListener.js","../../../esm/client/components/notificationItem/style__variables.js","../../../esm/client/components/notificationItem/index.js","../../../esm/client/slots/notificationCenter/style__variables.js","../../../esm/client/slots/notificationCenter/index.js","../../../esm/client/slots/notification/style__variables.js","../../../esm/client/slots/notification/index.js"],"sourcesContent":["import { useEffect, useRef } from 'react';\nexport default function usePrevious(state) {\n    var ref = useRef();\n    useEffect(function () {\n        ref.current = state;\n    });\n    return ref.current;\n}\n","import { useRef } from 'react';\nexport function useFirstMountState() {\n    var isFirst = useRef(true);\n    if (isFirst.current) {\n        isFirst.current = false;\n        return true;\n    }\n    return isFirst.current;\n}\n","import { useEffect } from 'react';\nimport { useFirstMountState } from './useFirstMountState';\nvar useUpdateEffect = function (effect, deps) {\n    var isFirstMount = useFirstMountState();\n    useEffect(function () {\n        if (!isFirstMount) {\n            return effect();\n        }\n    }, deps);\n};\nexport default useUpdateEffect;\n","import { useEffect, useRef } from \"react\";\nimport usePrevious from \"react-use/esm/usePrevious\";\nimport useUpdateEffect from \"react-use/esm/useUpdateEffect\";\nfunction useListener(data) {\n  const prev = usePrevious(data);\n  const fns = useRef({ useMount: () => {\n  }, useCreate: () => {\n  }, useRemove: () => {\n  } });\n  useEffect(() => {\n    fns.current.useMount(data);\n  }, []);\n  useUpdateEffect(() => {\n    const creates = [];\n    const removes = [];\n    Array.from(/* @__PURE__ */ new Set([...prev || [], ...data])).forEach((item) => {\n      if (data.includes(item) && !prev?.includes(item)) {\n        creates.push(item);\n      } else if (!data.includes(item) && prev?.includes(item)) {\n        removes.push(item);\n      }\n    });\n    if (creates.length) {\n      fns.current.useCreate(creates);\n    }\n    if (removes.length) {\n      fns.current.useRemove(removes);\n    }\n  }, [data]);\n  return {\n    useMount: (fn) => fns.current.useMount = fn,\n    useCreate: (fn) => fns.current.useCreate = fn,\n    useRemove: (fn) => fns.current.useRemove = fn\n  };\n}\nexport {\n  useListener as default\n};\n","export default {\n  item: \"mo-notification__item\",\n}","import { jsx, jsxs } from \"react/jsx-runtime\";\nimport { useConnector, useLocale } from \"../../hooks\";\nimport Action from \"../action\";\nimport Flex from \"../flex\";\nimport \"./index.css\";\nimport variables from \"./style__variables.js\";\nfunction NotificationItem({ data, onClose, onClick }) {\n  const localize = useLocale();\n  const builtin = useConnector(\"builtin\");\n  return /* @__PURE__ */ jsxs(\n    Flex,\n    {\n      className: variables.item,\n      justifyContent: \"space-between\",\n      alignItems: \"flex-start\",\n      onClick: () => onClick?.(data),\n      children: [\n        typeof data.render === \"function\" ? data.render(data) : data.value,\n        /* @__PURE__ */ jsx(\n          Action,\n          {\n            title: localize(builtin.constants.NOTIFICATION_TOOLBAR_CLEAR, \"Clear Notification\"),\n            onClick: () => onClose?.(data),\n            type: \"close\"\n          }\n        )\n      ]\n    }\n  );\n}\nexport {\n  NotificationItem as default\n};\n","export default {\n  notification: \"mo-notification\",\n  header: \"mo-notification__header\",\n  body: \"mo-notification__body\",\n}","import { jsx, jsxs } from \"react/jsx-runtime\";\nimport { ActionBar, Flex, NotificationItem } from \"../../components\";\nimport { useConnector, useLocale } from \"../../hooks\";\nimport \"./index.css\";\nimport variables from \"./style__variables.js\";\nfunction NotificationCenter({\n  data = [],\n  toolbar = [],\n  onActionBarClick,\n  onCloseNotification\n}) {\n  const localize = useLocale();\n  const builtin = useConnector(\"builtin\");\n  const hasNotifications = data.length > 0;\n  const title = hasNotifications ? localize(builtin.constants.STATUSBAR_ITEM_NOTIFICATION, \"Notifications\") : localize(builtin.constants.NOTIFICATION_ITEM_EMPTY, \"No New Notifications\");\n  return /* @__PURE__ */ jsxs(\"section\", { className: variables.notification, children: [\n    /* @__PURE__ */ jsxs(Flex, { className: variables.header, justifyContent: \"space-between\", children: [\n      /* @__PURE__ */ jsx(\"span\", { children: title }),\n      /* @__PURE__ */ jsx(ActionBar, { data: toolbar, onClick: onActionBarClick })\n    ] }),\n    /* @__PURE__ */ jsx(\"div\", { className: variables.body, children: data.map((item) => /* @__PURE__ */ jsx(NotificationItem, { data: item, onClose: onCloseNotification }, item.id)) })\n  ] });\n}\nexport {\n  NotificationCenter as default\n};\n","export default {\n  bell: \"mo-notification__bell\",\n}","import { Fragment, jsx, jsxs } from \"react/jsx-runtime\";\nimport { useEffect } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport { classNames } from \"../../classNames\";\nimport { Display, Icon, NotificationItem } from \"../../components\";\nimport { useConnector, useListener } from \"../../hooks\";\nimport { searchById } from \"../../../utils\";\nimport { toast } from \"sonner\";\nimport NotificationCenter from \"../notificationCenter\";\nimport \"./index.css\";\nimport variables from \"./style__variables.js\";\nfunction Notification({\n  onKeyPress,\n  onClick,\n  onClickItem,\n  onActionBarClick,\n  onCloseNotification\n}) {\n  const notification = useConnector(\"notification\");\n  const layout = useConnector(\"layout\");\n  const toasters = useListener(notification.toasts);\n  const { data, toolbar } = notification;\n  const hasNotifications = data.length > 0;\n  const renderIcon = hasNotifications ? \"bell-dot\" : \"bell\";\n  toasters.useCreate((data2) => {\n    data2.forEach((id) => {\n      const item = notification.data.find(searchById(id));\n      if (item) {\n        toast(/* @__PURE__ */ jsx(NotificationItem, { data: item, onClose: onCloseNotification, onClick: onClickItem }), {\n          id: item.id,\n          duration: Infinity,\n          unstyled: true\n        });\n      }\n    });\n  });\n  toasters.useRemove((data2) => {\n    data2.forEach((id) => {\n      toast.dismiss(id);\n    });\n  });\n  useEffect(() => {\n    window.addEventListener(\"keydown\", onKeyPress);\n    return () => {\n      window.addEventListener(\"keydown\", onKeyPress);\n    };\n  }, []);\n  return /* @__PURE__ */ jsxs(Fragment, { children: [\n    /* @__PURE__ */ jsx(Icon, { className: classNames(variables.bell), onClick, type: renderIcon }),\n    createPortal(\n      /* @__PURE__ */ jsx(Display, { visible: !layout.notification.hidden, children: /* @__PURE__ */ jsx(\n        NotificationCenter,\n        {\n          data,\n          toolbar,\n          onActionBarClick,\n          onCloseNotification\n        }\n      ) }),\n      document.body\n    )\n  ] });\n}\nexport {\n  Notification as default\n};\n"],"names":["usePrevious","state","ref","useRef","useEffect","useFirstMountState","isFirst","useUpdateEffect","effect","deps","isFirstMount","useListener","data","prev","fns","creates","removes","item","fn","variables$2","NotificationItem","onClose","onClick","localize","useLocale","builtin","useConnector","jsxs","Flex","variables","jsx","Action","variables$1","NotificationCenter","toolbar","onActionBarClick","onCloseNotification","title","ActionBar","Notification","onKeyPress","onClickItem","notification","layout","toasters","renderIcon","data2","id","searchById","toast","Fragment","Icon","classNames","createPortal","Display"],"mappings":"+MACe,SAASA,EAAYC,EAAO,CACvC,IAAIC,EAAMC,EAAAA,OAAM,EAChBC,OAAAA,EAAAA,UAAU,UAAY,CAClBF,EAAI,QAAUD,CAClB,CAAC,EACMC,EAAI,OACf,CCNO,SAASG,GAAqB,CACjC,IAAIC,EAAUH,EAAAA,OAAO,EAAI,EACzB,OAAIG,EAAQ,SACRA,EAAQ,QAAU,GACX,IAEJA,EAAQ,OACnB,CCNA,IAAIC,EAAkB,SAAUC,EAAQC,EAAM,CAC1C,IAAIC,EAAeL,EAAkB,EACrCD,EAAAA,UAAU,UAAY,CAClB,GAAI,CAACM,EACD,OAAOF,EAAM,CAErB,EAAGC,CAAI,CACX,ECNA,SAASE,EAAYC,EAAM,CACzB,MAAMC,EAAOb,EAAYY,CAAI,EACvBE,EAAMX,EAAAA,OAAO,CAAE,SAAU,IAAM,CACrC,EAAG,UAAW,IAAM,CACpB,EAAG,UAAW,IAAM,CACpB,EAAG,EACHC,OAAAA,EAAAA,UAAU,IAAM,CACdU,EAAI,QAAQ,SAASF,CAAI,CAC3B,EAAG,CAAA,CAAE,EACLL,EAAgB,IAAM,CACpB,MAAMQ,EAAU,CAAA,EACVC,EAAU,CAAA,EAChB,MAAM,KAAqB,IAAI,IAAI,CAAC,GAAGH,GAAQ,GAAI,GAAGD,CAAI,CAAC,CAAC,EAAE,QAASK,GAAS,CAC1EL,EAAK,SAASK,CAAI,GAAK,CAACJ,GAAM,SAASI,CAAI,EAC7CF,EAAQ,KAAKE,CAAI,EACR,CAACL,EAAK,SAASK,CAAI,GAAKJ,GAAM,SAASI,CAAI,GACpDD,EAAQ,KAAKC,CAAI,CAErB,CAAC,EACGF,EAAQ,QACVD,EAAI,QAAQ,UAAUC,CAAO,EAE3BC,EAAQ,QACVF,EAAI,QAAQ,UAAUE,CAAO,CAEjC,EAAG,CAACJ,CAAI,CAAC,EACF,CACL,SAAWM,GAAOJ,EAAI,QAAQ,SAAWI,EACzC,UAAYA,GAAOJ,EAAI,QAAQ,UAAYI,EAC3C,UAAYA,GAAOJ,EAAI,QAAQ,UAAYI,CAC/C,CACA,CClCA,MAAAC,EAAe,CACb,KAAM,uBACR,ECIA,SAASC,EAAiB,CAAE,KAAAR,EAAM,QAAAS,EAAS,QAAAC,CAAO,EAAI,CACpD,MAAMC,EAAWC,EAAS,EACpBC,EAAUC,EAAa,SAAS,EACtC,OAAuBC,EAAAA,KACrBC,EACA,CACE,UAAWC,EAAU,KACrB,eAAgB,gBAChB,WAAY,aACZ,QAAS,IAAMP,IAAUV,CAAI,EAC7B,SAAU,CACR,OAAOA,EAAK,QAAW,WAAaA,EAAK,OAAOA,CAAI,EAAIA,EAAK,MAC7CkB,EAAAA,IACdC,EACA,CACE,MAAOR,EAASE,EAAQ,UAAU,2BAA4B,oBAAoB,EAClF,QAAS,IAAMJ,IAAUT,CAAI,EAC7B,KAAM,OAClB,CACA,CACA,CACA,CACA,CACA,CC7BA,MAAAoB,EAAe,CACb,aAAc,kBACd,OAAQ,0BACR,KAAM,uBACR,ECCA,SAASC,EAAmB,CAC1B,KAAArB,EAAO,CAAA,EACP,QAAAsB,EAAU,CAAA,EACV,iBAAAC,EACA,oBAAAC,CACF,EAAG,CACD,MAAMb,EAAWC,EAAS,EACpBC,EAAUC,EAAa,SAAS,EAEhCW,EADmBzB,EAAK,OAAS,EACNW,EAASE,EAAQ,UAAU,4BAA6B,eAAe,EAAIF,EAASE,EAAQ,UAAU,wBAAyB,sBAAsB,EACtL,OAAuBE,EAAAA,KAAK,UAAW,CAAE,UAAWE,EAAU,aAAc,SAAU,CACpEF,OAAKC,EAAM,CAAE,UAAWC,EAAU,OAAQ,eAAgB,gBAAiB,SAAU,CACnFC,EAAAA,IAAI,OAAQ,CAAE,SAAUO,CAAK,CAAE,EAC/BP,EAAAA,IAAIQ,EAAW,CAAE,KAAMJ,EAAS,QAASC,CAAgB,CAAE,CACjF,EAAO,EACaL,MAAI,MAAO,CAAE,UAAWD,EAAU,KAAM,SAAUjB,EAAK,IAAKK,GAAyBa,EAAAA,IAAIV,EAAkB,CAAE,KAAMH,EAAM,QAASmB,GAAuBnB,EAAK,EAAE,CAAC,CAAC,CAAE,CACxL,EAAK,CACL,CCtBA,MAAAY,EAAe,CACb,KAAM,uBACR,ECSA,SAASU,EAAa,CACpB,WAAAC,EACA,QAAAlB,EACA,YAAAmB,EACA,iBAAAN,EACA,oBAAAC,CACF,EAAG,CACD,MAAMM,EAAehB,EAAa,cAAc,EAC1CiB,EAASjB,EAAa,QAAQ,EAC9BkB,EAAWjC,EAAY+B,EAAa,MAAM,EAC1C,CAAE,KAAA9B,EAAM,QAAAsB,CAAO,EAAKQ,EAEpBG,EADmBjC,EAAK,OAAS,EACD,WAAa,OACnD,OAAAgC,EAAS,UAAWE,GAAU,CAC5BA,EAAM,QAASC,GAAO,CACpB,MAAM9B,EAAOyB,EAAa,KAAK,KAAKM,EAAWD,CAAE,CAAC,EAC9C9B,GACFgC,EAAsBnB,EAAAA,IAAIV,EAAkB,CAAE,KAAMH,EAAM,QAASmB,EAAqB,QAASK,CAAW,CAAE,EAAG,CAC/G,GAAIxB,EAAK,GACT,SAAU,IACV,SAAU,EACpB,CAAS,CAEL,CAAC,CACH,CAAC,EACD2B,EAAS,UAAWE,GAAU,CAC5BA,EAAM,QAASC,GAAO,CACpBE,EAAM,QAAQF,CAAE,CAClB,CAAC,CACH,CAAC,EACD3C,EAAAA,UAAU,KACR,OAAO,iBAAiB,UAAWoC,CAAU,EACtC,IAAM,CACX,OAAO,iBAAiB,UAAWA,CAAU,CAC/C,GACC,CAAA,CAAE,EACkBb,EAAAA,KAAKuB,WAAU,CAAE,SAAU,CAChCpB,EAAAA,IAAIqB,EAAM,CAAE,UAAWC,EAAWvB,EAAU,IAAI,EAAG,QAAAP,EAAS,KAAMuB,EAAY,EAC9FQ,EAAAA,aACkBvB,MAAIwB,EAAS,CAAE,QAAS,CAACX,EAAO,aAAa,OAAQ,SAA0Bb,EAAAA,IAC7FG,EACA,CACE,KAAArB,EACA,QAAAsB,EACA,iBAAAC,EACA,oBAAAC,CACV,CACA,EAAS,EACH,SAAS,IACf,CACA,EAAK,CACL","x_google_ignoreList":[0,1,2]}